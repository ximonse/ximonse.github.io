{"version":3,"mappings":"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","names":["db","Dexie","async","initStorage","open","console","log","cards","count","welcomeCard","text","tags","created","Date","now","modified","position","x","y","add","createWelcomeCard","error","getAllCards","toArray","version","stores","changelog","cardCounter","lastTimestamp","createCard","cardData","metadata","card","uniqueId","timestamp","getTime","String","getFullYear","slice","getMonth","padStart","getDate","getHours","getMinutes","getSeconds","getMilliseconds","fromCharCode","generateCardId","createdAt","toISOString","id","logChange","updateCard","updates","updated","update","deleteCard","delete","operation","cardId","data","get","copyExifWithoutOrientation","e","t","Promise","r","i","o","getApp1Segment","then","Blob","type","FileReader","addEventListener","target","result","DataView","getUint16","a","s","getUint32","f","l","c","setUint16","readAsArrayBuffer","UZIP","exports","parse","bin","readUshort","readUint","Uint8Array","length","u","h","d","A","g","p","m","_readLocal","readUTF8","size","csize","buffer","inflateRaw","F","inflate","byteOffset","deflate","level","Math","floor","deflateRaw","adler","encode","writeUint","writeUshort","_noNeed","crc","cpr","usize","file","sizeUTF8","push","_writeHeader","split","pop","toLowerCase","indexOf","writeUTF8","set","table","Uint32Array","min","readASCII","writeASCII","charCodeAt","pad","toString","decodeURIComponent","U","_goodIndex","_hash","_putsE","_","_copyExact","lits","strt","prev","w","v","b","E","_writeBlock","_bestMatch","B","of0","lhst","C","df0","dhst","exb","dxb","_howLong","saved","_putsF","getTrees","contSize","fltree","fdtree","ltree","dtree","itree","ihst","I","makeCodes","revCodes","Q","ordr","_codeTiny","M","S","R","T","_writeLit","O","P","H","L","_hufTree","_lenCodes","getSecond","nonZero","lit","sort","setDepth","restrictDepth","max","_bitsF","_bitsE","_decodeTiny","codes2map","_get17","_check","flmap","fdmap","imap","lmap","dmap","ttree","_copyOut","ldef","ddef","bl_count","next_code","rev15","_get25","Uint16Array","pushV","__proto__","default","forEach","Array","isArray","Object","keys","getOwnPropertyDescriptor","defineProperty","enumerable","freeze","UPNG","nextZero","readBytes","decodeImage","_getBPP","ceil","ctype","depth","tabs","tRNS","PLTE","_decompress","interlace","CgBI","_inflate","_filterZero","width","height","N","n","Z","W","J","X","V","D","q","j","K","z","$","Y","k","_paeth","_IHDR","compress","filter","_copyTile","decode","frames","num_frames","num_plays","rect","delay","round","dispose","blend","toRGBA8","acTL","_bin","addErr","dither","Int16Array","_main","sRGB","pHYs","iCCP","pako","plte","cimg","loop","compressPNG","bpl","img","bpp","_prepareDiff","_updateFrame","quantize","byteLength","est","rgba","inds","abuf","_filterLine","getKDtree","getNearest","ind","left","planeDst","right","i0","i1","bst","tdst","stats","estats","splitPixels","eMq255","eMq","vecDot","random","multVec","sqrt","dot","sml","abs","Cov","encodeLL","toArrayBuffer","getContext","getImageData","ArrayBuffer","set16","set32","setUint32","seek","convert","setTimeout","_dly","toBlob","this","CHROME","FIREFOX","DESKTOP_SAFARI","IE","IOS","ETC","window","WorkerGlobalScope","self","cordova","require","CustomFile","getOriginalSymbol","File","CustomFileReader","getFilefromDataUrl","match","globalThis","atob","name","lastModified","getDataUrlFromFile","onload","onerror","readAsDataURL","loadImage","Image","src","getBrowserName","cachedResult","userAgent","navigator","test","document","documentMode","approximateBelowMaximumCanvasSizeOfBrowser","getNewCanvasAndCtx","OffscreenCanvas","Error","createElement","drawImageInCanvas","fillStyle","fillRect","drawImage","isIOS","includes","platform","drawFileInCanvas","$Try_2_Post","fileType","$Try_2_Catch","$Try_3_Catch","MOBILE_SAFARI","createImageBitmap","canvasToFile","$If_4","call","$If_5","bind","$If_6","convertToBlob","quality","toDataURL","cleanupCanvasMemory","isAutoOrientationInBrowser","getExifOrientation","handleMaxWidthOrHeight","maxWidthOrHeight","isFinite","followExifOrientation","transform","incProgress","signal","aborted","reason","onProgress","setProgress","maxIteration","maxSizeMB","exifOrientation","$If_2","initialQuality","$Loop_3","$Loop_3_exit","alwaysKeepResolution","imageCompression","Number","POSITIVE_INFINITY","useWebWorker","Worker","$Try_1_Catch","libURL","URL","createObjectURL","terminate","progress","postMessage","imageCompressionLibUrl","options","compressOnWebWorker","preserveExif","QUALITY_PRESETS","low","normal","high","extractExifData","dimensions","resolve","reject","url","revokeObjectURL","naturalWidth","naturalHeight","getImageDimensions","fileName","fileSize","processImage","compressed","toFixed","compressImage","base64","reader","fileToBase64","originalSize","compressedSize","compressionRatio","arrangeVertical","centerPos","positions","totalHeight","index","currentY","arrangeHorizontal","totalWidth","currentX","arrangeCluster","angle","PI","cos","sin","arrangeGridVertical","cols","cardsPerCol","startY","cardIndex","col","row","standardWidth","arrangeGridHorizontal","rows","rowHeights","map","reduce","sum","rowIndex","rowWidth","arrangeGridTopAligned","stage","layer","isPanning","cardGroups","Map","selectionRectangle","selectionStartPos","isSelecting","undoStack","redoStack","clipboard","initCanvas","container","getElementById","Konva","Stage","clientWidth","clientHeight","draggable","Layer","Rect","fill","stroke","strokeWidth","visible","loadCards","on","evt","preventDefault","oldScale","scaleX","pointer","getPointerPosition","mousePointTo","scaleBy","newScale","deltaY","clampedScale","scale","newPos","batchDraw","button","ctrlKey","style","cursor","pos","currentPos","setAttrs","selBox","getClientRect","find","group","background","findOne","removeName","getChildren","node","getAttr","groupBox","Util","haveIntersection","addName","updateSelection","parent","image","flipCard","openEditDialog","createNewCard","stageTouchTimer","lastCenter","lastDist","getDistance","p1","p2","pow","getCenter","touch1","touches","touch2","clientX","clientY","menu","cssText","innerHTML","body","appendChild","querySelectorAll","item","cleanup","parentNode","removeChild","importImage","once","showTouchPasteMenu","clearTimeout","newCenter","newDist","pointTo","dx","dy","gKeyHeld","tagName","key","undo","redo","copySelectedCards","pasteCards","exportCanvas","importCanvas","downloadBtn","click","dispatchEvent","CustomEvent","searchInput","focus","select","showCommandPalette","pasteCardsWithArrangement","applyArrangement","togglePinSelectedCards","selectedNodes","handleDeleteCard","setupCanvasEvents","setupImageDragDrop","title","boxShadow","fitAllCards","createFitAllButton","createCommandPaletteButton","onPressStart","onPressEnd","existingMenu","remove","overlay","textContent","icon","label","desc","action","menuItem","escHandler","removeEventListener","showAddMenu","isPressed","createAddButton","renderCard","Group","imageObj","imageData","isFlipped","flipped","isEink","classList","contains","isDark","maxWidth","maxHeight","ratio","setAttr","cornerRadius","shadowColor","shadowBlur","shadowOpacity","shadowOffset","Text","backText","fontSize","fontFamily","wrap","align","verticalAlign","konvaImage","tooltip","updateTooltip","top","handler","off","renderImageCard","cardColor","green","orange","pink","red","yellow","purple","blue","gray","grey","white","getCardColor","fillColor","renderTextCard","locked","isSelected","hasName","showContextMenu","touchTimer","touchStartPos","hasMoved","showTouchBulkMenu","createInlineEditor","dragStartPositions","startPos","delta","originalPos","newPosition","pushUndo","oldData","newData","reloadCanvas","currentText","isImageBack","currentTags","currentColor","dialog","join","textarea","tagsInput","saveBtn","cancelBtn","selectedColor","colorDots","dataset","color","border","save","newText","value","newTags","trim","createBulkEditor","cardIds","selectedCards","addTags","existingTags","Set","selectedIds","picker","colorInfo","showQuickColorPicker","adder","input","mergedTags","showQuickTagAdder","selectedGroups","newFlipped","destroy","clear","shift","getCard","__vitePreload","storage","__VITE_PRELOAD__","pastePosition","firstCard","offsetX","offsetY","cleanData","pastedData","copied","copiedAt","copiedFrom","originalCardId","arrangementFunc","arrangementName","newCardIds","newId","exportData","exportedAt","viewport","json","JSON","stringify","blob","href","download","accept","onchange","files","cardWithoutId","imported","importedAt","importedFrom","importBatchIndex","alert","message","multiple","capture","from","showQualityDialog","processed","offset","commands","palette","renderCommands","filteredCommands","commandList","querySelector","cmd","idx","originalIndex","originalIdx","parseInt","borderColor","commandsWithIndex","query","filtered","handleEsc","fileCount","btn","stopPropagation","dataTransfer","startsWith","minX","Infinity","minY","maxX","maxY","box","contentWidth","contentHeight","paddedWidth","padding","paddedHeight","scaleY","contentCenterX","contentCenterY","matchWithWildcard","term","searchableText","regexPattern","replace","RegExp","checkProximity","proximityMatch","term1","distance","term2","words","positions1","positions2","word","pos1","pos2","evaluateBooleanQuery","substring","parenMatch","innerResult","orParts","some","part","notIndex","beforeNot","afterNot","beforeMatches","afterMatches","every","endsWith","phrase","matches","searchCards","allCards","allGroups","opacity","lowerQuery","matchingCards","isMatch","has","isLocked","menuItems","newLockedState","updateLockIndicator","toggleLockCard","closeMenu","existingLock","pinIcon","listening","anyPinned","newState","arrangeFn","arrangeName","newPositions","all","needsStandardWidth","to","duration","easing","Easings","EaseOut","currentWidth","currentHeight","clearClipboard","deselectAllCards","state","currentView","deviceMode","ua","innerWidth","detectDeviceMode","theme","localStorage","getItem","uiMode","init","savedTheme","themeBtn","themeNames","light","dark","eink","viewToggle","toggleView","toggleTheme","uiModeToggle","toggleUIMode","importBtn","handleImport","handleDownloadBackup","func","wait","timeout","args","later","debounce","handleSearch","blur","applyUIMode","floatingHeader","infoOverlay","infoClose","setupEventListeners","renderColumnView","boardView","columnView","toggleBtn","searchQuery","cardList","canvas","combinedText","sortedCards","timeA","cardElement","className","imageSrc","display","errorText","insertBefore","firstChild","showColumnEditDialog","touchStartY","textToEdit","buttonContainer","deleteBtn","confirm","currentTheme","themes","currentIndex","nextTheme","setAttribute","setItem","modes","nextIndex","toolbar","toolbarActions","commandPaletteBtn","addBtn","fitAllBtn","uiToggleBtn","zIndex","children","child","JSZip","__vite_default__","import","zip","jsonData","exportDate","imagesFolder","folder","imageCount","base64Data","filename","generateAsync","date","event","readyState"],"ignoreList":[1],"sources":["../../src/lib/storage.js","../../node_modules/browser-image-compression/dist/browser-image-compression.mjs","../../src/utils/image-processing.js","../../src/lib/arrangement.js","../../src/lib/canvas.js","../../src/main.js"],"sourcesContent":["/**\n * Storage module using IndexedDB (Dexie.js)\n */\n\nimport Dexie from 'dexie';\n\n// Initialize database\nconst db = new Dexie('SpatialViewDB');\n\n// Define schema\ndb.version(1).stores({\n  cards: '++id, created, modified, *tags',\n  changelog: '++id, timestamp, cardId'\n});\n\n/**\n * Initialize storage\n */\nexport async function initStorage() {\n  try {\n    await db.open();\n    console.log('IndexedDB initialized');\n    \n    // Check if this is first run\n    const count = await db.cards.count();\n    if (count === 0) {\n      console.log('First run - database is empty');\n      await createWelcomeCard();\n    }\n    \n    return db;\n  } catch (error) {\n    console.error('Failed to initialize storage:', error);\n    throw error;\n  }\n}\n\n/**\n * Create welcome card on first run\n */\nasync function createWelcomeCard() {\n  const welcomeCard = {\n    text: 'Vlkommen till Spatial View!\\n\\nDetta r din visuella second brain fr handskrivna anteckningar.',\n    tags: ['vlkommen'],\n    created: Date.now(),\n    modified: Date.now(),\n    position: { x: 100, y: 100 }\n  };\n  \n  await db.cards.add(welcomeCard);\n  console.log('Welcome card created');\n}\n\n/**\n * Get all cards\n */\nexport async function getAllCards() {\n  return await db.cards.toArray();\n}\n\n/**\n * Get card by ID\n */\nexport async function getCard(id) {\n  return await db.cards.get(id);\n}\n\n// Counter for cards created in the same millisecond\nlet cardCounter = 0;\nlet lastTimestamp = 0;\n\n/**\n * Generate unique card ID in format: yymmdd_hh_mm_ss_ms_a\n */\nfunction generateCardId() {\n  const now = new Date();\n  const timestamp = now.getTime();\n\n  // Reset counter if we're in a new millisecond\n  if (timestamp !== lastTimestamp) {\n    cardCounter = 0;\n    lastTimestamp = timestamp;\n  } else {\n    cardCounter++;\n  }\n\n  // Format: yymmdd_hh_mm_ss_ms_a\n  const yy = String(now.getFullYear()).slice(-2);\n  const mm = String(now.getMonth() + 1).padStart(2, '0');\n  const dd = String(now.getDate()).padStart(2, '0');\n  const hh = String(now.getHours()).padStart(2, '0');\n  const min = String(now.getMinutes()).padStart(2, '0');\n  const ss = String(now.getSeconds()).padStart(2, '0');\n  const ms = String(now.getMilliseconds()).padStart(3, '0');\n\n  // Letter suffix: a, b, c, etc.\n  const suffix = String.fromCharCode(97 + cardCounter); // 97 = 'a'\n\n  return `${yy}${mm}${dd}_${hh}_${min}_${ss}_${ms}_${suffix}`;\n}\n\n/**\n * Create new card\n */\nexport async function createCard(cardData, metadata = {}) {\n  const uniqueId = generateCardId();\n\n  const card = {\n    ...cardData,\n    uniqueId,\n    created: Date.now(),\n    modified: Date.now(),\n    metadata: {\n      ...metadata,\n      createdAt: new Date().toISOString()\n    }\n  };\n\n  const id = await db.cards.add(card);\n\n  // Log to changelog\n  await logChange('create', id, card);\n\n  return id;\n}\n\n/**\n * Update existing card\n */\nexport async function updateCard(id, updates) {\n  const updated = {\n    ...updates,\n    modified: Date.now()\n  };\n  \n  await db.cards.update(id, updated);\n  \n  // Log to changelog\n  await logChange('update', id, updated);\n}\n\n/**\n * Delete card\n */\nexport async function deleteCard(id) {\n  await db.cards.delete(id);\n  \n  // Log to changelog\n  await logChange('delete', id, null);\n}\n\n/**\n * Search cards\n */\nexport async function searchCards(query) {\n  const allCards = await db.cards.toArray();\n  \n  return allCards.filter(card => {\n    const tagsStr = card.tags ? card.tags.join(' ') : '';\n    const searchText = (card.text + ' ' + tagsStr).toLowerCase();\n    return searchText.includes(query.toLowerCase());\n  });\n}\n\n/**\n * Log change to changelog for delta sync\n */\nasync function logChange(operation, cardId, data) {\n  await db.changelog.add({\n    timestamp: Date.now(),\n    cardId,\n    operation,\n    data\n  });\n}\n\n/**\n * Export all cards (full backup)\n */\nexport async function exportFull() {\n  const cards = await db.cards.toArray();\n  \n  return {\n    type: 'full',\n    version: '1.0',\n    exportedAt: Date.now(),\n    cards\n  };\n}\n\n/**\n * Export delta (changes since timestamp)\n */\nexport async function exportDelta(sinceTimestamp = 0) {\n  const changes = await db.changelog\n    .where('timestamp')\n    .above(sinceTimestamp)\n    .toArray();\n  \n  return {\n    type: 'delta',\n    version: '1.0',\n    sinceTimestamp,\n    exportedAt: Date.now(),\n    changes\n  };\n}\n\n/**\n * Import cards from JSON\n */\nexport async function importData(jsonData) {\n  if (jsonData.type === 'full') {\n    // Full import - add all cards\n    await db.cards.bulkAdd(jsonData.cards);\n  } else if (jsonData.type === 'delta') {\n    // Delta import - merge changes\n    for (const change of jsonData.changes) {\n      if (change.operation === 'create') {\n        await db.cards.add(change.data);\n      } else if (change.operation === 'update') {\n        await db.cards.put(change.data);\n      } else if (change.operation === 'delete') {\n        await db.cards.delete(change.cardId);\n      }\n    }\n  }\n}\n\n// Export db for advanced usage\nexport { db };\n","/**\n * Browser Image Compression\n * v2.0.2\n * by Donald <donaldcwl@gmail.com>\n * https://github.com/Donaldcwl/browser-image-compression\n */\n\nfunction _mergeNamespaces(e,t){return t.forEach((function(t){t&&\"string\"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(r){if(\"default\"!==r&&!(r in e)){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}}))})),Object.freeze(e)}function copyExifWithoutOrientation(e,t){return new Promise((function(r,i){let o;return getApp1Segment(e).then((function(e){try{return o=e,r(new Blob([t.slice(0,2),o,t.slice(2)],{type:\"image/jpeg\"}))}catch(e){return i(e)}}),i)}))}const getApp1Segment=e=>new Promise(((t,r)=>{const i=new FileReader;i.addEventListener(\"load\",(({target:{result:e}})=>{const i=new DataView(e);let o=0;if(65496!==i.getUint16(o))return r(\"not a valid JPEG\");for(o+=2;;){const a=i.getUint16(o);if(65498===a)break;const s=i.getUint16(o+2);if(65505===a&&1165519206===i.getUint32(o+4)){const a=o+10;let f;switch(i.getUint16(a)){case 18761:f=!0;break;case 19789:f=!1;break;default:return r(\"TIFF header contains invalid endian\")}if(42!==i.getUint16(a+2,f))return r(\"TIFF header contains invalid version\");const l=i.getUint32(a+4,f),c=a+l+2+12*i.getUint16(a+l,f);for(let e=a+l+2;e<c;e+=12){if(274==i.getUint16(e,f)){if(3!==i.getUint16(e+2,f))return r(\"Orientation data type is invalid\");if(1!==i.getUint32(e+4,f))return r(\"Orientation data count is invalid\");i.setUint16(e+8,1,f);break}}return t(e.slice(o,o+2+s))}o+=2+s}return t(new Blob)})),i.readAsArrayBuffer(e)}));var e={},t={get exports(){return e},set exports(t){e=t}};!function(e){var r,i,UZIP={};t.exports=UZIP,UZIP.parse=function(e,t){for(var r=UZIP.bin.readUshort,i=UZIP.bin.readUint,o=0,a={},s=new Uint8Array(e),f=s.length-4;101010256!=i(s,f);)f--;o=f;o+=4;var l=r(s,o+=4);r(s,o+=2);var c=i(s,o+=2),u=i(s,o+=4);o+=4,o=u;for(var h=0;h<l;h++){i(s,o),o+=4,o+=4,o+=4,i(s,o+=4);c=i(s,o+=4);var d=i(s,o+=4),A=r(s,o+=4),g=r(s,o+2),p=r(s,o+4);o+=6;var m=i(s,o+=8);o+=4,o+=A+g+p,UZIP._readLocal(s,m,a,c,d,t)}return a},UZIP._readLocal=function(e,t,r,i,o,a){var s=UZIP.bin.readUshort,f=UZIP.bin.readUint;f(e,t),s(e,t+=4),s(e,t+=2);var l=s(e,t+=2);f(e,t+=2),f(e,t+=4),t+=4;var c=s(e,t+=8),u=s(e,t+=2);t+=2;var h=UZIP.bin.readUTF8(e,t,c);if(t+=c,t+=u,a)r[h]={size:o,csize:i};else{var d=new Uint8Array(e.buffer,t);if(0==l)r[h]=new Uint8Array(d.buffer.slice(t,t+i));else{if(8!=l)throw\"unknown compression method: \"+l;var A=new Uint8Array(o);UZIP.inflateRaw(d,A),r[h]=A}}},UZIP.inflateRaw=function(e,t){return UZIP.F.inflate(e,t)},UZIP.inflate=function(e,t){return e[0],e[1],UZIP.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},UZIP.deflate=function(e,t){null==t&&(t={level:6});var r=0,i=new Uint8Array(50+Math.floor(1.1*e.length));i[r]=120,i[r+1]=156,r+=2,r=UZIP.F.deflateRaw(e,i,r,t.level);var o=UZIP.adler(e,0,e.length);return i[r+0]=o>>>24&255,i[r+1]=o>>>16&255,i[r+2]=o>>>8&255,i[r+3]=o>>>0&255,new Uint8Array(i.buffer,0,r+4)},UZIP.deflateRaw=function(e,t){null==t&&(t={level:6});var r=new Uint8Array(50+Math.floor(1.1*e.length)),i=UZIP.F.deflateRaw(e,r,i,t.level);return new Uint8Array(r.buffer,0,i)},UZIP.encode=function(e,t){null==t&&(t=!1);var r=0,i=UZIP.bin.writeUint,o=UZIP.bin.writeUshort,a={};for(var s in e){var f=!UZIP._noNeed(s)&&!t,l=e[s],c=UZIP.crc.crc(l,0,l.length);a[s]={cpr:f,usize:l.length,crc:c,file:f?UZIP.deflateRaw(l):l}}for(var s in a)r+=a[s].file.length+30+46+2*UZIP.bin.sizeUTF8(s);r+=22;var u=new Uint8Array(r),h=0,d=[];for(var s in a){var A=a[s];d.push(h),h=UZIP._writeHeader(u,h,s,A,0)}var g=0,p=h;for(var s in a){A=a[s];d.push(h),h=UZIP._writeHeader(u,h,s,A,1,d[g++])}var m=h-p;return i(u,h,101010256),h+=4,o(u,h+=4,g),o(u,h+=2,g),i(u,h+=2,m),i(u,h+=4,p),h+=4,h+=2,u.buffer},UZIP._noNeed=function(e){var t=e.split(\".\").pop().toLowerCase();return-1!=\"png,jpg,jpeg,zip\".indexOf(t)},UZIP._writeHeader=function(e,t,r,i,o,a){var s=UZIP.bin.writeUint,f=UZIP.bin.writeUshort,l=i.file;return s(e,t,0==o?67324752:33639248),t+=4,1==o&&(t+=2),f(e,t,20),f(e,t+=2,0),f(e,t+=2,i.cpr?8:0),s(e,t+=2,0),s(e,t+=4,i.crc),s(e,t+=4,l.length),s(e,t+=4,i.usize),f(e,t+=4,UZIP.bin.sizeUTF8(r)),f(e,t+=2,0),t+=2,1==o&&(t+=2,t+=2,s(e,t+=6,a),t+=4),t+=UZIP.bin.writeUTF8(e,t,r),0==o&&(e.set(l,t),t+=l.length),t},UZIP.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var r=t,i=0;i<8;i++)1&r?r=3988292384^r>>>1:r>>>=1;e[t]=r}return e}(),update:function(e,t,r,i){for(var o=0;o<i;o++)e=UZIP.crc.table[255&(e^t[r+o])]^e>>>8;return e},crc:function(e,t,r){return 4294967295^UZIP.crc.update(4294967295,e,t,r)}},UZIP.adler=function(e,t,r){for(var i=1,o=0,a=t,s=t+r;a<s;){for(var f=Math.min(a+5552,s);a<f;)o+=i+=e[a++];i%=65521,o%=65521}return o<<16|i},UZIP.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,r){e[t]=255&r,e[t+1]=r>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,r){e[t]=255&r,e[t+1]=r>>8&255,e[t+2]=r>>16&255,e[t+3]=r>>24&255},readASCII:function(e,t,r){for(var i=\"\",o=0;o<r;o++)i+=String.fromCharCode(e[t+o]);return i},writeASCII:function(e,t,r){for(var i=0;i<r.length;i++)e[t+i]=r.charCodeAt(i)},pad:function(e){return e.length<2?\"0\"+e:e},readUTF8:function(e,t,r){for(var i,o=\"\",a=0;a<r;a++)o+=\"%\"+UZIP.bin.pad(e[t+a].toString(16));try{i=decodeURIComponent(o)}catch(i){return UZIP.bin.readASCII(e,t,r)}return i},writeUTF8:function(e,t,r){for(var i=r.length,o=0,a=0;a<i;a++){var s=r.charCodeAt(a);if(0==(4294967168&s))e[t+o]=s,o++;else if(0==(4294965248&s))e[t+o]=192|s>>6,e[t+o+1]=128|s>>0&63,o+=2;else if(0==(4294901760&s))e[t+o]=224|s>>12,e[t+o+1]=128|s>>6&63,e[t+o+2]=128|s>>0&63,o+=3;else{if(0!=(4292870144&s))throw\"e\";e[t+o]=240|s>>18,e[t+o+1]=128|s>>12&63,e[t+o+2]=128|s>>6&63,e[t+o+3]=128|s>>0&63,o+=4}}return o},sizeUTF8:function(e){for(var t=e.length,r=0,i=0;i<t;i++){var o=e.charCodeAt(i);if(0==(4294967168&o))r++;else if(0==(4294965248&o))r+=2;else if(0==(4294901760&o))r+=3;else{if(0!=(4292870144&o))throw\"e\";r+=4}}return r}},UZIP.F={},UZIP.F.deflateRaw=function(e,t,r,i){var o=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][i],a=UZIP.F.U,s=UZIP.F._goodIndex;UZIP.F._hash;var f=UZIP.F._putsE,l=0,c=r<<3,u=0,h=e.length;if(0==i){for(;l<h;){f(t,c,l+(_=Math.min(65535,h-l))==h?1:0),c=UZIP.F._copyExact(e,l,_,t,c+8),l+=_}return c>>>3}var d=a.lits,A=a.strt,g=a.prev,p=0,m=0,w=0,v=0,b=0,y=0;for(h>2&&(A[y=UZIP.F._hash(e,0)]=0),l=0;l<h;l++){if(b=y,l+1<h-2){y=UZIP.F._hash(e,l+1);var E=l+1&32767;g[E]=A[y],A[y]=E}if(u<=l){(p>14e3||m>26697)&&h-l>100&&(u<l&&(d[p]=l-u,p+=2,u=l),c=UZIP.F._writeBlock(l==h-1||u==h?1:0,d,p,v,e,w,l-w,t,c),p=m=v=0,w=l);var F=0;l<h-2&&(F=UZIP.F._bestMatch(e,l,g,b,Math.min(o[2],h-l),o[3]));var _=F>>>16,B=65535&F;if(0!=F){B=65535&F;var U=s(_=F>>>16,a.of0);a.lhst[257+U]++;var C=s(B,a.df0);a.dhst[C]++,v+=a.exb[U]+a.dxb[C],d[p]=_<<23|l-u,d[p+1]=B<<16|U<<8|C,p+=2,u=l+_}else a.lhst[e[l]]++;m++}}for(w==l&&0!=e.length||(u<l&&(d[p]=l-u,p+=2,u=l),c=UZIP.F._writeBlock(1,d,p,v,e,w,l-w,t,c),p=0,m=0,p=m=v=0,w=l);0!=(7&c);)c++;return c>>>3},UZIP.F._bestMatch=function(e,t,r,i,o,a){var s=32767&t,f=r[s],l=s-f+32768&32767;if(f==s||i!=UZIP.F._hash(e,t-l))return 0;for(var c=0,u=0,h=Math.min(32767,t);l<=h&&0!=--a&&f!=s;){if(0==c||e[t+c]==e[t+c-l]){var d=UZIP.F._howLong(e,t,l);if(d>c){if(u=l,(c=d)>=o)break;l+2<d&&(d=l+2);for(var A=0,g=0;g<d-2;g++){var p=t-l+g+32768&32767,m=p-r[p]+32768&32767;m>A&&(A=m,f=p)}}}l+=(s=f)-(f=r[s])+32768&32767}return c<<16|u},UZIP.F._howLong=function(e,t,r){if(e[t]!=e[t-r]||e[t+1]!=e[t+1-r]||e[t+2]!=e[t+2-r])return 0;var i=t,o=Math.min(e.length,t+258);for(t+=3;t<o&&e[t]==e[t-r];)t++;return t-i},UZIP.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},UZIP.saved=0,UZIP.F._writeBlock=function(e,t,r,i,o,a,s,f,l){var c,u,h,d,A,g,p,m,w,v=UZIP.F.U,b=UZIP.F._putsF,y=UZIP.F._putsE;v.lhst[256]++,u=(c=UZIP.F.getTrees())[0],h=c[1],d=c[2],A=c[3],g=c[4],p=c[5],m=c[6],w=c[7];var E=32+(0==(l+3&7)?0:8-(l+3&7))+(s<<3),F=i+UZIP.F.contSize(v.fltree,v.lhst)+UZIP.F.contSize(v.fdtree,v.dhst),_=i+UZIP.F.contSize(v.ltree,v.lhst)+UZIP.F.contSize(v.dtree,v.dhst);_+=14+3*p+UZIP.F.contSize(v.itree,v.ihst)+(2*v.ihst[16]+3*v.ihst[17]+7*v.ihst[18]);for(var B=0;B<286;B++)v.lhst[B]=0;for(B=0;B<30;B++)v.dhst[B]=0;for(B=0;B<19;B++)v.ihst[B]=0;var U=E<F&&E<_?0:F<_?1:2;if(b(f,l,e),b(f,l+1,U),l+=3,0==U){for(;0!=(7&l);)l++;l=UZIP.F._copyExact(o,a,s,f,l)}else{var C,I;if(1==U&&(C=v.fltree,I=v.fdtree),2==U){UZIP.F.makeCodes(v.ltree,u),UZIP.F.revCodes(v.ltree,u),UZIP.F.makeCodes(v.dtree,h),UZIP.F.revCodes(v.dtree,h),UZIP.F.makeCodes(v.itree,d),UZIP.F.revCodes(v.itree,d),C=v.ltree,I=v.dtree,y(f,l,A-257),y(f,l+=5,g-1),y(f,l+=5,p-4),l+=4;for(var Q=0;Q<p;Q++)y(f,l+3*Q,v.itree[1+(v.ordr[Q]<<1)]);l+=3*p,l=UZIP.F._codeTiny(m,v.itree,f,l),l=UZIP.F._codeTiny(w,v.itree,f,l)}for(var M=a,x=0;x<r;x+=2){for(var S=t[x],R=S>>>23,T=M+(8388607&S);M<T;)l=UZIP.F._writeLit(o[M++],C,f,l);if(0!=R){var O=t[x+1],P=O>>16,H=O>>8&255,L=255&O;y(f,l=UZIP.F._writeLit(257+H,C,f,l),R-v.of0[H]),l+=v.exb[H],b(f,l=UZIP.F._writeLit(L,I,f,l),P-v.df0[L]),l+=v.dxb[L],M+=R}}l=UZIP.F._writeLit(256,C,f,l)}return l},UZIP.F._copyExact=function(e,t,r,i,o){var a=o>>>3;return i[a]=r,i[a+1]=r>>>8,i[a+2]=255-i[a],i[a+3]=255-i[a+1],a+=4,i.set(new Uint8Array(e.buffer,t,r),a),o+(r+4<<3)},UZIP.F.getTrees=function(){for(var e=UZIP.F.U,t=UZIP.F._hufTree(e.lhst,e.ltree,15),r=UZIP.F._hufTree(e.dhst,e.dtree,15),i=[],o=UZIP.F._lenCodes(e.ltree,i),a=[],s=UZIP.F._lenCodes(e.dtree,a),f=0;f<i.length;f+=2)e.ihst[i[f]]++;for(f=0;f<a.length;f+=2)e.ihst[a[f]]++;for(var l=UZIP.F._hufTree(e.ihst,e.itree,7),c=19;c>4&&0==e.itree[1+(e.ordr[c-1]<<1)];)c--;return[t,r,l,o,s,c,i,a]},UZIP.F.getSecond=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(e[r+1]);return t},UZIP.F.nonZero=function(e){for(var t=\"\",r=0;r<e.length;r+=2)0!=e[r+1]&&(t+=(r>>1)+\",\");return t},UZIP.F.contSize=function(e,t){for(var r=0,i=0;i<t.length;i++)r+=t[i]*e[1+(i<<1)];return r},UZIP.F._codeTiny=function(e,t,r,i){for(var o=0;o<e.length;o+=2){var a=e[o],s=e[o+1];i=UZIP.F._writeLit(a,t,r,i);var f=16==a?2:17==a?3:7;a>15&&(UZIP.F._putsE(r,i,s,f),i+=f)}return i},UZIP.F._lenCodes=function(e,t){for(var r=e.length;2!=r&&0==e[r-1];)r-=2;for(var i=0;i<r;i+=2){var o=e[i+1],a=i+3<r?e[i+3]:-1,s=i+5<r?e[i+5]:-1,f=0==i?-1:e[i-1];if(0==o&&a==o&&s==o){for(var l=i+5;l+2<r&&e[l+2]==o;)l+=2;(c=Math.min(l+1-i>>>1,138))<11?t.push(17,c-3):t.push(18,c-11),i+=2*c-2}else if(o==f&&a==o&&s==o){for(l=i+5;l+2<r&&e[l+2]==o;)l+=2;var c=Math.min(l+1-i>>>1,6);t.push(16,c-3),i+=2*c-2}else t.push(o,0)}return r>>>1},UZIP.F._hufTree=function(e,t,r){var i=[],o=e.length,a=t.length,s=0;for(s=0;s<a;s+=2)t[s]=0,t[s+1]=0;for(s=0;s<o;s++)0!=e[s]&&i.push({lit:s,f:e[s]});var f=i.length,l=i.slice(0);if(0==f)return 0;if(1==f){var c=i[0].lit;l=0==c?1:0;return t[1+(c<<1)]=1,t[1+(l<<1)]=1,1}i.sort((function(e,t){return e.f-t.f}));var u=i[0],h=i[1],d=0,A=1,g=2;for(i[0]={lit:-1,f:u.f+h.f,l:u,r:h,d:0};A!=f-1;)u=d!=A&&(g==f||i[d].f<i[g].f)?i[d++]:i[g++],h=d!=A&&(g==f||i[d].f<i[g].f)?i[d++]:i[g++],i[A++]={lit:-1,f:u.f+h.f,l:u,r:h};var p=UZIP.F.setDepth(i[A-1],0);for(p>r&&(UZIP.F.restrictDepth(l,r,p),p=r),s=0;s<f;s++)t[1+(l[s].lit<<1)]=l[s].d;return p},UZIP.F.setDepth=function(e,t){return-1!=e.lit?(e.d=t,t):Math.max(UZIP.F.setDepth(e.l,t+1),UZIP.F.setDepth(e.r,t+1))},UZIP.F.restrictDepth=function(e,t,r){var i=0,o=1<<r-t,a=0;for(e.sort((function(e,t){return t.d==e.d?e.f-t.f:t.d-e.d})),i=0;i<e.length&&e[i].d>t;i++){var s=e[i].d;e[i].d=t,a+=o-(1<<r-s)}for(a>>>=r-t;a>0;){(s=e[i].d)<t?(e[i].d++,a-=1<<t-s-1):i++}for(;i>=0;i--)e[i].d==t&&a<0&&(e[i].d--,a++);0!=a&&console.log(\"debt left\")},UZIP.F._goodIndex=function(e,t){var r=0;return t[16|r]<=e&&(r|=16),t[8|r]<=e&&(r|=8),t[4|r]<=e&&(r|=4),t[2|r]<=e&&(r|=2),t[1|r]<=e&&(r|=1),r},UZIP.F._writeLit=function(e,t,r,i){return UZIP.F._putsF(r,i,t[e<<1]),i+t[1+(e<<1)]},UZIP.F.inflate=function(e,t){var r=Uint8Array;if(3==e[0]&&0==e[1])return t||new r(0);var i=UZIP.F,o=i._bitsF,a=i._bitsE,s=i._decodeTiny,f=i.makeCodes,l=i.codes2map,c=i._get17,u=i.U,h=null==t;h&&(t=new r(e.length>>>2<<3));for(var d,A,g=0,p=0,m=0,w=0,v=0,b=0,y=0,E=0,F=0;0==g;)if(g=o(e,F,1),p=o(e,F+1,2),F+=3,0!=p){if(h&&(t=UZIP.F._check(t,E+(1<<17))),1==p&&(d=u.flmap,A=u.fdmap,b=511,y=31),2==p){m=a(e,F,5)+257,w=a(e,F+5,5)+1,v=a(e,F+10,4)+4,F+=14;for(var _=0;_<38;_+=2)u.itree[_]=0,u.itree[_+1]=0;var B=1;for(_=0;_<v;_++){var U=a(e,F+3*_,3);u.itree[1+(u.ordr[_]<<1)]=U,U>B&&(B=U)}F+=3*v,f(u.itree,B),l(u.itree,B,u.imap),d=u.lmap,A=u.dmap,F=s(u.imap,(1<<B)-1,m+w,e,F,u.ttree);var C=i._copyOut(u.ttree,0,m,u.ltree);b=(1<<C)-1;var I=i._copyOut(u.ttree,m,w,u.dtree);y=(1<<I)-1,f(u.ltree,C),l(u.ltree,C,d),f(u.dtree,I),l(u.dtree,I,A)}for(;;){var Q=d[c(e,F)&b];F+=15&Q;var M=Q>>>4;if(M>>>8==0)t[E++]=M;else{if(256==M)break;var x=E+M-254;if(M>264){var S=u.ldef[M-257];x=E+(S>>>3)+a(e,F,7&S),F+=7&S}var R=A[c(e,F)&y];F+=15&R;var T=R>>>4,O=u.ddef[T],P=(O>>>4)+o(e,F,15&O);for(F+=15&O,h&&(t=UZIP.F._check(t,E+(1<<17)));E<x;)t[E]=t[E++-P],t[E]=t[E++-P],t[E]=t[E++-P],t[E]=t[E++-P];E=x}}}else{0!=(7&F)&&(F+=8-(7&F));var H=4+(F>>>3),L=e[H-4]|e[H-3]<<8;h&&(t=UZIP.F._check(t,E+L)),t.set(new r(e.buffer,e.byteOffset+H,L),E),F=H+L<<3,E+=L}return t.length==E?t:t.slice(0,E)},UZIP.F._check=function(e,t){var r=e.length;if(t<=r)return e;var i=new Uint8Array(Math.max(r<<1,t));return i.set(e,0),i},UZIP.F._decodeTiny=function(e,t,r,i,o,a){for(var s=UZIP.F._bitsE,f=UZIP.F._get17,l=0;l<r;){var c=e[f(i,o)&t];o+=15&c;var u=c>>>4;if(u<=15)a[l]=u,l++;else{var h=0,d=0;16==u?(d=3+s(i,o,2),o+=2,h=a[l-1]):17==u?(d=3+s(i,o,3),o+=3):18==u&&(d=11+s(i,o,7),o+=7);for(var A=l+d;l<A;)a[l]=h,l++}}return o},UZIP.F._copyOut=function(e,t,r,i){for(var o=0,a=0,s=i.length>>>1;a<r;){var f=e[a+t];i[a<<1]=0,i[1+(a<<1)]=f,f>o&&(o=f),a++}for(;a<s;)i[a<<1]=0,i[1+(a<<1)]=0,a++;return o},UZIP.F.makeCodes=function(e,t){for(var r,i,o,a,s=UZIP.F.U,f=e.length,l=s.bl_count,c=0;c<=t;c++)l[c]=0;for(c=1;c<f;c+=2)l[e[c]]++;var u=s.next_code;for(r=0,l[0]=0,i=1;i<=t;i++)r=r+l[i-1]<<1,u[i]=r;for(o=0;o<f;o+=2)0!=(a=e[o+1])&&(e[o]=u[a],u[a]++)},UZIP.F.codes2map=function(e,t,r){for(var i=e.length,o=UZIP.F.U.rev15,a=0;a<i;a+=2)if(0!=e[a+1])for(var s=a>>1,f=e[a+1],l=s<<4|f,c=t-f,u=e[a]<<c,h=u+(1<<c);u!=h;){r[o[u]>>>15-t]=l,u++}},UZIP.F.revCodes=function(e,t){for(var r=UZIP.F.U.rev15,i=15-t,o=0;o<e.length;o+=2){var a=e[o]<<t-e[o+1];e[o]=r[a]>>>i}},UZIP.F._putsE=function(e,t,r){r<<=7&t;var i=t>>>3;e[i]|=r,e[i+1]|=r>>>8},UZIP.F._putsF=function(e,t,r){r<<=7&t;var i=t>>>3;e[i]|=r,e[i+1]|=r>>>8,e[i+2]|=r>>>16},UZIP.F._bitsE=function(e,t,r){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<r)-1},UZIP.F._bitsF=function(e,t,r){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<r)-1},UZIP.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},UZIP.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},UZIP.F.U=(r=Uint16Array,i=Uint32Array,{next_code:new r(16),bl_count:new r(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new r(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new i(32),flmap:new r(512),fltree:[],fdmap:new r(32),fdtree:[],lmap:new r(32768),ltree:[],ttree:[],dmap:new r(32768),dtree:[],imap:new r(512),itree:[],rev15:new r(32768),lhst:new i(286),dhst:new i(30),ihst:new i(19),lits:new i(15e3),strt:new r(65536),prev:new r(32768)}),function(){for(var e=UZIP.F.U,t=0;t<32768;t++){var r=t;r=(4278255360&(r=(4042322160&(r=(3435973836&(r=(2863311530&r)>>>1|(1431655765&r)<<1))>>>2|(858993459&r)<<2))>>>4|(252645135&r)<<4))>>>8|(16711935&r)<<8,e.rev15[t]=(r>>>16|r<<16)>>>17}function pushV(e,t,r){for(;0!=t--;)e.push(0,r)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];pushV(e.fltree,144,8),pushV(e.fltree,112,9),pushV(e.fltree,24,7),pushV(e.fltree,8,8),UZIP.F.makeCodes(e.fltree,9),UZIP.F.codes2map(e.fltree,9,e.flmap),UZIP.F.revCodes(e.fltree,9),pushV(e.fdtree,32,5),UZIP.F.makeCodes(e.fdtree,5),UZIP.F.codes2map(e.fdtree,5,e.fdmap),UZIP.F.revCodes(e.fdtree,5),pushV(e.itree,19,0),pushV(e.ltree,286,0),pushV(e.dtree,30,0),pushV(e.ttree,320,0)}()}();var UZIP=_mergeNamespaces({__proto__:null,default:e},[e]);const UPNG=function(){var e={nextZero(e,t){for(;0!=e[t];)t++;return t},readUshort:(e,t)=>e[t]<<8|e[t+1],writeUshort(e,t,r){e[t]=r>>8&255,e[t+1]=255&r},readUint:(e,t)=>16777216*e[t]+(e[t+1]<<16|e[t+2]<<8|e[t+3]),writeUint(e,t,r){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r},readASCII(e,t,r){let i=\"\";for(let o=0;o<r;o++)i+=String.fromCharCode(e[t+o]);return i},writeASCII(e,t,r){for(let i=0;i<r.length;i++)e[t+i]=r.charCodeAt(i)},readBytes(e,t,r){const i=[];for(let o=0;o<r;o++)i.push(e[t+o]);return i},pad:e=>e.length<2?`0${e}`:e,readUTF8(t,r,i){let o,a=\"\";for(let o=0;o<i;o++)a+=`%${e.pad(t[r+o].toString(16))}`;try{o=decodeURIComponent(a)}catch(o){return e.readASCII(t,r,i)}return o}};function decodeImage(t,r,i,o){const a=r*i,s=_getBPP(o),f=Math.ceil(r*s/8),l=new Uint8Array(4*a),c=new Uint32Array(l.buffer),{ctype:u}=o,{depth:h}=o,d=e.readUshort;if(6==u){const e=a<<2;if(8==h)for(var A=0;A<e;A+=4)l[A]=t[A],l[A+1]=t[A+1],l[A+2]=t[A+2],l[A+3]=t[A+3];if(16==h)for(A=0;A<e;A++)l[A]=t[A<<1]}else if(2==u){const e=o.tabs.tRNS;if(null==e){if(8==h)for(A=0;A<a;A++){var g=3*A;c[A]=255<<24|t[g+2]<<16|t[g+1]<<8|t[g]}if(16==h)for(A=0;A<a;A++){g=6*A;c[A]=255<<24|t[g+4]<<16|t[g+2]<<8|t[g]}}else{var p=e[0];const r=e[1],i=e[2];if(8==h)for(A=0;A<a;A++){var m=A<<2;g=3*A;c[A]=255<<24|t[g+2]<<16|t[g+1]<<8|t[g],t[g]==p&&t[g+1]==r&&t[g+2]==i&&(l[m+3]=0)}if(16==h)for(A=0;A<a;A++){m=A<<2,g=6*A;c[A]=255<<24|t[g+4]<<16|t[g+2]<<8|t[g],d(t,g)==p&&d(t,g+2)==r&&d(t,g+4)==i&&(l[m+3]=0)}}}else if(3==u){const e=o.tabs.PLTE,s=o.tabs.tRNS,c=s?s.length:0;if(1==h)for(var w=0;w<i;w++){var v=w*f,b=w*r;for(A=0;A<r;A++){m=b+A<<2;var y=3*(E=t[v+(A>>3)]>>7-((7&A)<<0)&1);l[m]=e[y],l[m+1]=e[y+1],l[m+2]=e[y+2],l[m+3]=E<c?s[E]:255}}if(2==h)for(w=0;w<i;w++)for(v=w*f,b=w*r,A=0;A<r;A++){m=b+A<<2,y=3*(E=t[v+(A>>2)]>>6-((3&A)<<1)&3);l[m]=e[y],l[m+1]=e[y+1],l[m+2]=e[y+2],l[m+3]=E<c?s[E]:255}if(4==h)for(w=0;w<i;w++)for(v=w*f,b=w*r,A=0;A<r;A++){m=b+A<<2,y=3*(E=t[v+(A>>1)]>>4-((1&A)<<2)&15);l[m]=e[y],l[m+1]=e[y+1],l[m+2]=e[y+2],l[m+3]=E<c?s[E]:255}if(8==h)for(A=0;A<a;A++){var E;m=A<<2,y=3*(E=t[A]);l[m]=e[y],l[m+1]=e[y+1],l[m+2]=e[y+2],l[m+3]=E<c?s[E]:255}}else if(4==u){if(8==h)for(A=0;A<a;A++){m=A<<2;var F=t[_=A<<1];l[m]=F,l[m+1]=F,l[m+2]=F,l[m+3]=t[_+1]}if(16==h)for(A=0;A<a;A++){var _;m=A<<2,F=t[_=A<<2];l[m]=F,l[m+1]=F,l[m+2]=F,l[m+3]=t[_+2]}}else if(0==u)for(p=o.tabs.tRNS?o.tabs.tRNS:-1,w=0;w<i;w++){const e=w*f,i=w*r;if(1==h)for(var B=0;B<r;B++){var U=(F=255*(t[e+(B>>>3)]>>>7-(7&B)&1))==255*p?0:255;c[i+B]=U<<24|F<<16|F<<8|F}else if(2==h)for(B=0;B<r;B++){U=(F=85*(t[e+(B>>>2)]>>>6-((3&B)<<1)&3))==85*p?0:255;c[i+B]=U<<24|F<<16|F<<8|F}else if(4==h)for(B=0;B<r;B++){U=(F=17*(t[e+(B>>>1)]>>>4-((1&B)<<2)&15))==17*p?0:255;c[i+B]=U<<24|F<<16|F<<8|F}else if(8==h)for(B=0;B<r;B++){U=(F=t[e+B])==p?0:255;c[i+B]=U<<24|F<<16|F<<8|F}else if(16==h)for(B=0;B<r;B++){F=t[e+(B<<1)],U=d(t,e+(B<<1))==p?0:255;c[i+B]=U<<24|F<<16|F<<8|F}}return l}function _decompress(e,r,i,o){const a=_getBPP(e),s=Math.ceil(i*a/8),f=new Uint8Array((s+1+e.interlace)*o);return r=e.tabs.CgBI?t(r,f):_inflate(r,f),0==e.interlace?r=_filterZero(r,e,0,i,o):1==e.interlace&&(r=function _readInterlace(e,t){const r=t.width,i=t.height,o=_getBPP(t),a=o>>3,s=Math.ceil(r*o/8),f=new Uint8Array(i*s);let l=0;const c=[0,0,4,0,2,0,1],u=[0,4,0,2,0,1,0],h=[8,8,8,4,4,2,2],d=[8,8,4,4,2,2,1];let A=0;for(;A<7;){const p=h[A],m=d[A];let w=0,v=0,b=c[A];for(;b<i;)b+=p,v++;let y=u[A];for(;y<r;)y+=m,w++;const E=Math.ceil(w*o/8);_filterZero(e,t,l,w,v);let F=0,_=c[A];for(;_<i;){let t=u[A],i=l+F*E<<3;for(;t<r;){var g;if(1==o)g=(g=e[i>>3])>>7-(7&i)&1,f[_*s+(t>>3)]|=g<<7-((7&t)<<0);if(2==o)g=(g=e[i>>3])>>6-(7&i)&3,f[_*s+(t>>2)]|=g<<6-((3&t)<<1);if(4==o)g=(g=e[i>>3])>>4-(7&i)&15,f[_*s+(t>>1)]|=g<<4-((1&t)<<2);if(o>=8){const r=_*s+t*a;for(let t=0;t<a;t++)f[r+t]=e[(i>>3)+t]}i+=o,t+=m}F++,_+=p}w*v!=0&&(l+=v*(1+E)),A+=1}return f}(r,e)),r}function _inflate(e,r){return t(new Uint8Array(e.buffer,2,e.length-6),r)}var t=function(){const e={H:{}};return e.H.N=function(t,r){const i=Uint8Array;let o,a,s=0,f=0,l=0,c=0,u=0,h=0,d=0,A=0,g=0;if(3==t[0]&&0==t[1])return r||new i(0);const p=e.H,m=p.b,w=p.e,v=p.R,b=p.n,y=p.A,E=p.Z,F=p.m,_=null==r;for(_&&(r=new i(t.length>>>2<<5));0==s;)if(s=m(t,g,1),f=m(t,g+1,2),g+=3,0!=f){if(_&&(r=e.H.W(r,A+(1<<17))),1==f&&(o=F.J,a=F.h,h=511,d=31),2==f){l=w(t,g,5)+257,c=w(t,g+5,5)+1,u=w(t,g+10,4)+4,g+=14;let e=1;for(var B=0;B<38;B+=2)F.Q[B]=0,F.Q[B+1]=0;for(B=0;B<u;B++){const r=w(t,g+3*B,3);F.Q[1+(F.X[B]<<1)]=r,r>e&&(e=r)}g+=3*u,b(F.Q,e),y(F.Q,e,F.u),o=F.w,a=F.d,g=v(F.u,(1<<e)-1,l+c,t,g,F.v);const r=p.V(F.v,0,l,F.C);h=(1<<r)-1;const i=p.V(F.v,l,c,F.D);d=(1<<i)-1,b(F.C,r),y(F.C,r,o),b(F.D,i),y(F.D,i,a)}for(;;){const e=o[E(t,g)&h];g+=15&e;const i=e>>>4;if(i>>>8==0)r[A++]=i;else{if(256==i)break;{let e=A+i-254;if(i>264){const r=F.q[i-257];e=A+(r>>>3)+w(t,g,7&r),g+=7&r}const o=a[E(t,g)&d];g+=15&o;const s=o>>>4,f=F.c[s],l=(f>>>4)+m(t,g,15&f);for(g+=15&f;A<e;)r[A]=r[A++-l],r[A]=r[A++-l],r[A]=r[A++-l],r[A]=r[A++-l];A=e}}}}else{0!=(7&g)&&(g+=8-(7&g));const o=4+(g>>>3),a=t[o-4]|t[o-3]<<8;_&&(r=e.H.W(r,A+a)),r.set(new i(t.buffer,t.byteOffset+o,a),A),g=o+a<<3,A+=a}return r.length==A?r:r.slice(0,A)},e.H.W=function(e,t){const r=e.length;if(t<=r)return e;const i=new Uint8Array(r<<1);return i.set(e,0),i},e.H.R=function(t,r,i,o,a,s){const f=e.H.e,l=e.H.Z;let c=0;for(;c<i;){const e=t[l(o,a)&r];a+=15&e;const i=e>>>4;if(i<=15)s[c]=i,c++;else{let e=0,t=0;16==i?(t=3+f(o,a,2),a+=2,e=s[c-1]):17==i?(t=3+f(o,a,3),a+=3):18==i&&(t=11+f(o,a,7),a+=7);const r=c+t;for(;c<r;)s[c]=e,c++}}return a},e.H.V=function(e,t,r,i){let o=0,a=0;const s=i.length>>>1;for(;a<r;){const r=e[a+t];i[a<<1]=0,i[1+(a<<1)]=r,r>o&&(o=r),a++}for(;a<s;)i[a<<1]=0,i[1+(a<<1)]=0,a++;return o},e.H.n=function(t,r){const i=e.H.m,o=t.length;let a,s,f;let l;const c=i.j;for(var u=0;u<=r;u++)c[u]=0;for(u=1;u<o;u+=2)c[t[u]]++;const h=i.K;for(a=0,c[0]=0,s=1;s<=r;s++)a=a+c[s-1]<<1,h[s]=a;for(f=0;f<o;f+=2)l=t[f+1],0!=l&&(t[f]=h[l],h[l]++)},e.H.A=function(t,r,i){const o=t.length,a=e.H.m.r;for(let e=0;e<o;e+=2)if(0!=t[e+1]){const o=e>>1,s=t[e+1],f=o<<4|s,l=r-s;let c=t[e]<<l;const u=c+(1<<l);for(;c!=u;){i[a[c]>>>15-r]=f,c++}}},e.H.l=function(t,r){const i=e.H.m.r,o=15-r;for(let e=0;e<t.length;e+=2){const a=t[e]<<r-t[e+1];t[e]=i[a]>>>o}},e.H.M=function(e,t,r){r<<=7&t;const i=t>>>3;e[i]|=r,e[i+1]|=r>>>8},e.H.I=function(e,t,r){r<<=7&t;const i=t>>>3;e[i]|=r,e[i+1]|=r>>>8,e[i+2]|=r>>>16},e.H.e=function(e,t,r){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<r)-1},e.H.b=function(e,t,r){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<r)-1},e.H.Z=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},e.H.i=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},e.H.m=function(){const e=Uint16Array,t=Uint32Array;return{K:new e(16),j:new e(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new e(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new t(32),J:new e(512),_:[],h:new e(32),$:[],w:new e(32768),C:[],v:[],d:new e(32768),D:[],u:new e(512),Q:[],r:new e(32768),s:new t(286),Y:new t(30),a:new t(19),t:new t(15e3),k:new e(65536),g:new e(32768)}}(),function(){const t=e.H.m;for(var r=0;r<32768;r++){let e=r;e=(2863311530&e)>>>1|(1431655765&e)<<1,e=(3435973836&e)>>>2|(858993459&e)<<2,e=(4042322160&e)>>>4|(252645135&e)<<4,e=(4278255360&e)>>>8|(16711935&e)<<8,t.r[r]=(e>>>16|e<<16)>>>17}function n(e,t,r){for(;0!=t--;)e.push(0,r)}for(r=0;r<32;r++)t.q[r]=t.S[r]<<3|t.T[r],t.c[r]=t.p[r]<<4|t.z[r];n(t._,144,8),n(t._,112,9),n(t._,24,7),n(t._,8,8),e.H.n(t._,9),e.H.A(t._,9,t.J),e.H.l(t._,9),n(t.$,32,5),e.H.n(t.$,5),e.H.A(t.$,5,t.h),e.H.l(t.$,5),n(t.Q,19,0),n(t.C,286,0),n(t.D,30,0),n(t.v,320,0)}(),e.H.N}();function _getBPP(e){return[1,null,3,1,2,null,4][e.ctype]*e.depth}function _filterZero(e,t,r,i,o){let a=_getBPP(t);const s=Math.ceil(i*a/8);let f,l;a=Math.ceil(a/8);let c=e[r],u=0;if(c>1&&(e[r]=[0,0,1][c-2]),3==c)for(u=a;u<s;u++)e[u+1]=e[u+1]+(e[u+1-a]>>>1)&255;for(let t=0;t<o;t++)if(f=r+t*s,l=f+t+1,c=e[l-1],u=0,0==c)for(;u<s;u++)e[f+u]=e[l+u];else if(1==c){for(;u<a;u++)e[f+u]=e[l+u];for(;u<s;u++)e[f+u]=e[l+u]+e[f+u-a]}else if(2==c)for(;u<s;u++)e[f+u]=e[l+u]+e[f+u-s];else if(3==c){for(;u<a;u++)e[f+u]=e[l+u]+(e[f+u-s]>>>1);for(;u<s;u++)e[f+u]=e[l+u]+(e[f+u-s]+e[f+u-a]>>>1)}else{for(;u<a;u++)e[f+u]=e[l+u]+_paeth(0,e[f+u-s],0);for(;u<s;u++)e[f+u]=e[l+u]+_paeth(e[f+u-a],e[f+u-s],e[f+u-a-s])}return e}function _paeth(e,t,r){const i=e+t-r,o=i-e,a=i-t,s=i-r;return o*o<=a*a&&o*o<=s*s?e:a*a<=s*s?t:r}function _IHDR(t,r,i){i.width=e.readUint(t,r),r+=4,i.height=e.readUint(t,r),r+=4,i.depth=t[r],r++,i.ctype=t[r],r++,i.compress=t[r],r++,i.filter=t[r],r++,i.interlace=t[r],r++}function _copyTile(e,t,r,i,o,a,s,f,l){const c=Math.min(t,o),u=Math.min(r,a);let h=0,d=0;for(let r=0;r<u;r++)for(let a=0;a<c;a++)if(s>=0&&f>=0?(h=r*t+a<<2,d=(f+r)*o+s+a<<2):(h=(-f+r)*t-s+a<<2,d=r*o+a<<2),0==l)i[d]=e[h],i[d+1]=e[h+1],i[d+2]=e[h+2],i[d+3]=e[h+3];else if(1==l){var A=e[h+3]*(1/255),g=e[h]*A,p=e[h+1]*A,m=e[h+2]*A,w=i[d+3]*(1/255),v=i[d]*w,b=i[d+1]*w,y=i[d+2]*w;const t=1-A,r=A+w*t,o=0==r?0:1/r;i[d+3]=255*r,i[d+0]=(g+v*t)*o,i[d+1]=(p+b*t)*o,i[d+2]=(m+y*t)*o}else if(2==l){A=e[h+3],g=e[h],p=e[h+1],m=e[h+2],w=i[d+3],v=i[d],b=i[d+1],y=i[d+2];A==w&&g==v&&p==b&&m==y?(i[d]=0,i[d+1]=0,i[d+2]=0,i[d+3]=0):(i[d]=g,i[d+1]=p,i[d+2]=m,i[d+3]=A)}else if(3==l){A=e[h+3],g=e[h],p=e[h+1],m=e[h+2],w=i[d+3],v=i[d],b=i[d+1],y=i[d+2];if(A==w&&g==v&&p==b&&m==y)continue;if(A<220&&w>20)return!1}return!0}return{decode:function decode(r){const i=new Uint8Array(r);let o=8;const a=e,s=a.readUshort,f=a.readUint,l={tabs:{},frames:[]},c=new Uint8Array(i.length);let u,h=0,d=0;const A=[137,80,78,71,13,10,26,10];for(var g=0;g<8;g++)if(i[g]!=A[g])throw\"The input is not a PNG file!\";for(;o<i.length;){const e=a.readUint(i,o);o+=4;const r=a.readASCII(i,o,4);if(o+=4,\"IHDR\"==r)_IHDR(i,o,l);else if(\"iCCP\"==r){for(var p=o;0!=i[p];)p++;a.readASCII(i,o,p-o),i[p+1];const s=i.slice(p+2,o+e);let f=null;try{f=_inflate(s)}catch(e){f=t(s)}l.tabs[r]=f}else if(\"CgBI\"==r)l.tabs[r]=i.slice(o,o+4);else if(\"IDAT\"==r){for(g=0;g<e;g++)c[h+g]=i[o+g];h+=e}else if(\"acTL\"==r)l.tabs[r]={num_frames:f(i,o),num_plays:f(i,o+4)},u=new Uint8Array(i.length);else if(\"fcTL\"==r){if(0!=d)(E=l.frames[l.frames.length-1]).data=_decompress(l,u.slice(0,d),E.rect.width,E.rect.height),d=0;const e={x:f(i,o+12),y:f(i,o+16),width:f(i,o+4),height:f(i,o+8)};let t=s(i,o+22);t=s(i,o+20)/(0==t?100:t);const r={rect:e,delay:Math.round(1e3*t),dispose:i[o+24],blend:i[o+25]};l.frames.push(r)}else if(\"fdAT\"==r){for(g=0;g<e-4;g++)u[d+g]=i[o+g+4];d+=e-4}else if(\"pHYs\"==r)l.tabs[r]=[a.readUint(i,o),a.readUint(i,o+4),i[o+8]];else if(\"cHRM\"==r){l.tabs[r]=[];for(g=0;g<8;g++)l.tabs[r].push(a.readUint(i,o+4*g))}else if(\"tEXt\"==r||\"zTXt\"==r){null==l.tabs[r]&&(l.tabs[r]={});var m=a.nextZero(i,o),w=a.readASCII(i,o,m-o),v=o+e-m-1;if(\"tEXt\"==r)y=a.readASCII(i,m+1,v);else{var b=_inflate(i.slice(m+2,m+2+v));y=a.readUTF8(b,0,b.length)}l.tabs[r][w]=y}else if(\"iTXt\"==r){null==l.tabs[r]&&(l.tabs[r]={});m=0,p=o;m=a.nextZero(i,p);w=a.readASCII(i,p,m-p);const t=i[p=m+1];var y;i[p+1],p+=2,m=a.nextZero(i,p),a.readASCII(i,p,m-p),p=m+1,m=a.nextZero(i,p),a.readUTF8(i,p,m-p);v=e-((p=m+1)-o);if(0==t)y=a.readUTF8(i,p,v);else{b=_inflate(i.slice(p,p+v));y=a.readUTF8(b,0,b.length)}l.tabs[r][w]=y}else if(\"PLTE\"==r)l.tabs[r]=a.readBytes(i,o,e);else if(\"hIST\"==r){const e=l.tabs.PLTE.length/3;l.tabs[r]=[];for(g=0;g<e;g++)l.tabs[r].push(s(i,o+2*g))}else if(\"tRNS\"==r)3==l.ctype?l.tabs[r]=a.readBytes(i,o,e):0==l.ctype?l.tabs[r]=s(i,o):2==l.ctype&&(l.tabs[r]=[s(i,o),s(i,o+2),s(i,o+4)]);else if(\"gAMA\"==r)l.tabs[r]=a.readUint(i,o)/1e5;else if(\"sRGB\"==r)l.tabs[r]=i[o];else if(\"bKGD\"==r)0==l.ctype||4==l.ctype?l.tabs[r]=[s(i,o)]:2==l.ctype||6==l.ctype?l.tabs[r]=[s(i,o),s(i,o+2),s(i,o+4)]:3==l.ctype&&(l.tabs[r]=i[o]);else if(\"IEND\"==r)break;o+=e,a.readUint(i,o),o+=4}var E;return 0!=d&&((E=l.frames[l.frames.length-1]).data=_decompress(l,u.slice(0,d),E.rect.width,E.rect.height)),l.data=_decompress(l,c,l.width,l.height),delete l.compress,delete l.interlace,delete l.filter,l},toRGBA8:function toRGBA8(e){const t=e.width,r=e.height;if(null==e.tabs.acTL)return[decodeImage(e.data,t,r,e).buffer];const i=[];null==e.frames[0].data&&(e.frames[0].data=e.data);const o=t*r*4,a=new Uint8Array(o),s=new Uint8Array(o),f=new Uint8Array(o);for(let c=0;c<e.frames.length;c++){const u=e.frames[c],h=u.rect.x,d=u.rect.y,A=u.rect.width,g=u.rect.height,p=decodeImage(u.data,A,g,e);if(0!=c)for(var l=0;l<o;l++)f[l]=a[l];if(0==u.blend?_copyTile(p,A,g,a,t,r,h,d,0):1==u.blend&&_copyTile(p,A,g,a,t,r,h,d,1),i.push(a.buffer.slice(0)),0==u.dispose);else if(1==u.dispose)_copyTile(s,A,g,a,t,r,h,d,0);else if(2==u.dispose)for(l=0;l<o;l++)a[l]=f[l]}return i},_paeth:_paeth,_copyTile:_copyTile,_bin:e}}();!function(){const{_copyTile:e}=UPNG,{_bin:t}=UPNG,r=UPNG._paeth;var i={table:function(){const e=new Uint32Array(256);for(let t=0;t<256;t++){let r=t;for(let e=0;e<8;e++)1&r?r=3988292384^r>>>1:r>>>=1;e[t]=r}return e}(),update(e,t,r,o){for(let a=0;a<o;a++)e=i.table[255&(e^t[r+a])]^e>>>8;return e},crc:(e,t,r)=>4294967295^i.update(4294967295,e,t,r)};function addErr(e,t,r,i){t[r]+=e[0]*i>>4,t[r+1]+=e[1]*i>>4,t[r+2]+=e[2]*i>>4,t[r+3]+=e[3]*i>>4}function N(e){return Math.max(0,Math.min(255,e))}function D(e,t){const r=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2],a=e[3]-t[3];return r*r+i*i+o*o+a*a}function dither(e,t,r,i,o,a,s){null==s&&(s=1);const f=i.length,l=[];for(var c=0;c<f;c++){const e=i[c];l.push([e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255])}for(c=0;c<f;c++){let e=4294967295;for(var u=0,h=0;h<f;h++){var d=D(l[c],l[h]);h!=c&&d<e&&(e=d,u=h)}}const A=new Uint32Array(o.buffer),g=new Int16Array(t*r*4),p=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(c=0;c<p.length;c++)p[c]=255*((p[c]+.5)/16-.5);for(let o=0;o<r;o++)for(let w=0;w<t;w++){var m;c=4*(o*t+w);if(2!=s)m=[N(e[c]+g[c]),N(e[c+1]+g[c+1]),N(e[c+2]+g[c+2]),N(e[c+3]+g[c+3])];else{d=p[4*(3&o)+(3&w)];m=[N(e[c]+d),N(e[c+1]+d),N(e[c+2]+d),N(e[c+3]+d)]}u=0;let v=16777215;for(h=0;h<f;h++){const e=D(m,l[h]);e<v&&(v=e,u=h)}const b=l[u],y=[m[0]-b[0],m[1]-b[1],m[2]-b[2],m[3]-b[3]];1==s&&(w!=t-1&&addErr(y,g,c+4,7),o!=r-1&&(0!=w&&addErr(y,g,c+4*t-4,3),addErr(y,g,c+4*t,5),w!=t-1&&addErr(y,g,c+4*t+4,1))),a[c>>2]=u,A[c>>2]=i[u]}}function _main(e,r,o,a,s){null==s&&(s={});const{crc:f}=i,l=t.writeUint,c=t.writeUshort,u=t.writeASCII;let h=8;const d=e.frames.length>1;let A,g=!1,p=33+(d?20:0);if(null!=s.sRGB&&(p+=13),null!=s.pHYs&&(p+=21),null!=s.iCCP&&(A=pako.deflate(s.iCCP),p+=21+A.length+4),3==e.ctype){for(var m=e.plte.length,w=0;w<m;w++)e.plte[w]>>>24!=255&&(g=!0);p+=8+3*m+4+(g?8+1*m+4:0)}for(var v=0;v<e.frames.length;v++){d&&(p+=38),p+=(F=e.frames[v]).cimg.length+12,0!=v&&(p+=4)}p+=12;const b=new Uint8Array(p),y=[137,80,78,71,13,10,26,10];for(w=0;w<8;w++)b[w]=y[w];if(l(b,h,13),h+=4,u(b,h,\"IHDR\"),h+=4,l(b,h,r),h+=4,l(b,h,o),h+=4,b[h]=e.depth,h++,b[h]=e.ctype,h++,b[h]=0,h++,b[h]=0,h++,b[h]=0,h++,l(b,h,f(b,h-17,17)),h+=4,null!=s.sRGB&&(l(b,h,1),h+=4,u(b,h,\"sRGB\"),h+=4,b[h]=s.sRGB,h++,l(b,h,f(b,h-5,5)),h+=4),null!=s.iCCP){const e=13+A.length;l(b,h,e),h+=4,u(b,h,\"iCCP\"),h+=4,u(b,h,\"ICC profile\"),h+=11,h+=2,b.set(A,h),h+=A.length,l(b,h,f(b,h-(e+4),e+4)),h+=4}if(null!=s.pHYs&&(l(b,h,9),h+=4,u(b,h,\"pHYs\"),h+=4,l(b,h,s.pHYs[0]),h+=4,l(b,h,s.pHYs[1]),h+=4,b[h]=s.pHYs[2],h++,l(b,h,f(b,h-13,13)),h+=4),d&&(l(b,h,8),h+=4,u(b,h,\"acTL\"),h+=4,l(b,h,e.frames.length),h+=4,l(b,h,null!=s.loop?s.loop:0),h+=4,l(b,h,f(b,h-12,12)),h+=4),3==e.ctype){l(b,h,3*(m=e.plte.length)),h+=4,u(b,h,\"PLTE\"),h+=4;for(w=0;w<m;w++){const t=3*w,r=e.plte[w],i=255&r,o=r>>>8&255,a=r>>>16&255;b[h+t+0]=i,b[h+t+1]=o,b[h+t+2]=a}if(h+=3*m,l(b,h,f(b,h-3*m-4,3*m+4)),h+=4,g){l(b,h,m),h+=4,u(b,h,\"tRNS\"),h+=4;for(w=0;w<m;w++)b[h+w]=e.plte[w]>>>24&255;h+=m,l(b,h,f(b,h-m-4,m+4)),h+=4}}let E=0;for(v=0;v<e.frames.length;v++){var F=e.frames[v];d&&(l(b,h,26),h+=4,u(b,h,\"fcTL\"),h+=4,l(b,h,E++),h+=4,l(b,h,F.rect.width),h+=4,l(b,h,F.rect.height),h+=4,l(b,h,F.rect.x),h+=4,l(b,h,F.rect.y),h+=4,c(b,h,a[v]),h+=2,c(b,h,1e3),h+=2,b[h]=F.dispose,h++,b[h]=F.blend,h++,l(b,h,f(b,h-30,30)),h+=4);const t=F.cimg;l(b,h,(m=t.length)+(0==v?0:4)),h+=4;const r=h;u(b,h,0==v?\"IDAT\":\"fdAT\"),h+=4,0!=v&&(l(b,h,E++),h+=4),b.set(t,h),h+=m,l(b,h,f(b,r,h-r)),h+=4}return l(b,h,0),h+=4,u(b,h,\"IEND\"),h+=4,l(b,h,f(b,h-4,4)),h+=4,b.buffer}function compressPNG(e,t,r){for(let i=0;i<e.frames.length;i++){const o=e.frames[i];o.rect.width;const a=o.rect.height,s=new Uint8Array(a*o.bpl+a);o.cimg=_filterZero(o.img,a,o.bpp,o.bpl,s,t,r)}}function compress(t,r,i,o,a){const s=a[0],f=a[1],l=a[2],c=a[3],u=a[4],h=a[5];let d=6,A=8,g=255;for(var p=0;p<t.length;p++){const e=new Uint8Array(t[p]);for(var m=e.length,w=0;w<m;w+=4)g&=e[w+3]}const v=255!=g,b=function framize(t,r,i,o,a,s){const f=[];for(var l=0;l<t.length;l++){const h=new Uint8Array(t[l]),A=new Uint32Array(h.buffer);var c;let g=0,p=0,m=r,w=i,v=o?1:0;if(0!=l){const b=s||o||1==l||0!=f[l-2].dispose?1:2;let y=0,E=1e9;for(let e=0;e<b;e++){var u=new Uint8Array(t[l-1-e]);const o=new Uint32Array(t[l-1-e]);let s=r,f=i,c=-1,h=-1;for(let e=0;e<i;e++)for(let t=0;t<r;t++){A[d=e*r+t]!=o[d]&&(t<s&&(s=t),t>c&&(c=t),e<f&&(f=e),e>h&&(h=e))}-1==c&&(s=f=c=h=0),a&&(1==(1&s)&&s--,1==(1&f)&&f--);const v=(c-s+1)*(h-f+1);v<E&&(E=v,y=e,g=s,p=f,m=c-s+1,w=h-f+1)}u=new Uint8Array(t[l-1-y]);1==y&&(f[l-1].dispose=2),c=new Uint8Array(m*w*4),e(u,r,i,c,m,w,-g,-p,0),v=e(h,r,i,c,m,w,-g,-p,3)?1:0,1==v?_prepareDiff(h,r,i,c,{x:g,y:p,width:m,height:w}):e(h,r,i,c,m,w,-g,-p,0)}else c=h.slice(0);f.push({rect:{x:g,y:p,width:m,height:w},img:c,blend:v,dispose:0})}if(o)for(l=0;l<f.length;l++){if(1==(A=f[l]).blend)continue;const e=A.rect,o=f[l-1].rect,s=Math.min(e.x,o.x),c=Math.min(e.y,o.y),u={x:s,y:c,width:Math.max(e.x+e.width,o.x+o.width)-s,height:Math.max(e.y+e.height,o.y+o.height)-c};f[l-1].dispose=1,l-1!=0&&_updateFrame(t,r,i,f,l-1,u,a),_updateFrame(t,r,i,f,l,u,a)}let h=0;if(1!=t.length)for(var d=0;d<f.length;d++){var A;h+=(A=f[d]).rect.width*A.rect.height}return f}(t,r,i,s,f,l),y={},E=[],F=[];if(0!=o){const e=[];for(w=0;w<b.length;w++)e.push(b[w].img.buffer);const t=function concatRGBA(e){let t=0;for(var r=0;r<e.length;r++)t+=e[r].byteLength;const i=new Uint8Array(t);let o=0;for(r=0;r<e.length;r++){const t=new Uint8Array(e[r]),a=t.length;for(let e=0;e<a;e+=4){let r=t[e],a=t[e+1],s=t[e+2];const f=t[e+3];0==f&&(r=a=s=0),i[o+e]=r,i[o+e+1]=a,i[o+e+2]=s,i[o+e+3]=f}o+=a}return i.buffer}(e),r=quantize(t,o);for(w=0;w<r.plte.length;w++)E.push(r.plte[w].est.rgba);let i=0;for(w=0;w<b.length;w++){const e=(B=b[w]).img.length;var _=new Uint8Array(r.inds.buffer,i>>2,e>>2);F.push(_);const t=new Uint8Array(r.abuf,i,e);h&&dither(B.img,B.rect.width,B.rect.height,E,t,_),B.img.set(t),i+=e}}else for(p=0;p<b.length;p++){var B=b[p];const e=new Uint32Array(B.img.buffer);var U=B.rect.width;m=e.length,_=new Uint8Array(m);F.push(_);for(w=0;w<m;w++){const t=e[w];if(0!=w&&t==e[w-1])_[w]=_[w-1];else if(w>U&&t==e[w-U])_[w]=_[w-U];else{let e=y[t];if(null==e&&(y[t]=e=E.length,E.push(t),E.length>=300))break;_[w]=e}}}const C=E.length;C<=256&&0==u&&(A=C<=2?1:C<=4?2:C<=16?4:8,A=Math.max(A,c));for(p=0;p<b.length;p++){(B=b[p]).rect.x,B.rect.y;U=B.rect.width;const e=B.rect.height;let t=B.img;new Uint32Array(t.buffer);let r=4*U,i=4;if(C<=256&&0==u){r=Math.ceil(A*U/8);var I=new Uint8Array(r*e);const o=F[p];for(let t=0;t<e;t++){w=t*r;const e=t*U;if(8==A)for(var Q=0;Q<U;Q++)I[w+Q]=o[e+Q];else if(4==A)for(Q=0;Q<U;Q++)I[w+(Q>>1)]|=o[e+Q]<<4-4*(1&Q);else if(2==A)for(Q=0;Q<U;Q++)I[w+(Q>>2)]|=o[e+Q]<<6-2*(3&Q);else if(1==A)for(Q=0;Q<U;Q++)I[w+(Q>>3)]|=o[e+Q]<<7-1*(7&Q)}t=I,d=3,i=1}else if(0==v&&1==b.length){I=new Uint8Array(U*e*3);const o=U*e;for(w=0;w<o;w++){const e=3*w,r=4*w;I[e]=t[r],I[e+1]=t[r+1],I[e+2]=t[r+2]}t=I,d=2,i=3,r=3*U}B.img=t,B.bpl=r,B.bpp=i}return{ctype:d,depth:A,plte:E,frames:b}}function _updateFrame(t,r,i,o,a,s,f){const l=Uint8Array,c=Uint32Array,u=new l(t[a-1]),h=new c(t[a-1]),d=a+1<t.length?new l(t[a+1]):null,A=new l(t[a]),g=new c(A.buffer);let p=r,m=i,w=-1,v=-1;for(let e=0;e<s.height;e++)for(let t=0;t<s.width;t++){const i=s.x+t,f=s.y+e,l=f*r+i,c=g[l];0==c||0==o[a-1].dispose&&h[l]==c&&(null==d||0!=d[4*l+3])||(i<p&&(p=i),i>w&&(w=i),f<m&&(m=f),f>v&&(v=f))}-1==w&&(p=m=w=v=0),f&&(1==(1&p)&&p--,1==(1&m)&&m--),s={x:p,y:m,width:w-p+1,height:v-m+1};const b=o[a];b.rect=s,b.blend=1,b.img=new Uint8Array(s.width*s.height*4),0==o[a-1].dispose?(e(u,r,i,b.img,s.width,s.height,-s.x,-s.y,0),_prepareDiff(A,r,i,b.img,s)):e(A,r,i,b.img,s.width,s.height,-s.x,-s.y,0)}function _prepareDiff(t,r,i,o,a){e(t,r,i,o,a.width,a.height,-a.x,-a.y,2)}function _filterZero(e,t,r,i,o,a,s){const f=[];let l,c=[0,1,2,3,4];-1!=a?c=[a]:(t*i>5e5||1==r)&&(c=[0]),s&&(l={level:0});const u=UZIP;for(var h=0;h<c.length;h++){for(let a=0;a<t;a++)_filterLine(o,e,a,i,r,c[h]);f.push(u.deflate(o,l))}let d,A=1e9;for(h=0;h<f.length;h++)f[h].length<A&&(d=h,A=f[h].length);return f[d]}function _filterLine(e,t,i,o,a,s){const f=i*o;let l=f+i;if(e[l]=s,l++,0==s)if(o<500)for(var c=0;c<o;c++)e[l+c]=t[f+c];else e.set(new Uint8Array(t.buffer,f,o),l);else if(1==s){for(c=0;c<a;c++)e[l+c]=t[f+c];for(c=a;c<o;c++)e[l+c]=t[f+c]-t[f+c-a]+256&255}else if(0==i){for(c=0;c<a;c++)e[l+c]=t[f+c];if(2==s)for(c=a;c<o;c++)e[l+c]=t[f+c];if(3==s)for(c=a;c<o;c++)e[l+c]=t[f+c]-(t[f+c-a]>>1)+256&255;if(4==s)for(c=a;c<o;c++)e[l+c]=t[f+c]-r(t[f+c-a],0,0)+256&255}else{if(2==s)for(c=0;c<o;c++)e[l+c]=t[f+c]+256-t[f+c-o]&255;if(3==s){for(c=0;c<a;c++)e[l+c]=t[f+c]+256-(t[f+c-o]>>1)&255;for(c=a;c<o;c++)e[l+c]=t[f+c]+256-(t[f+c-o]+t[f+c-a]>>1)&255}if(4==s){for(c=0;c<a;c++)e[l+c]=t[f+c]+256-r(0,t[f+c-o],0)&255;for(c=a;c<o;c++)e[l+c]=t[f+c]+256-r(t[f+c-a],t[f+c-o],t[f+c-a-o])&255}}}function quantize(e,t){const r=new Uint8Array(e),i=r.slice(0),o=new Uint32Array(i.buffer),a=getKDtree(i,t),s=a[0],f=a[1],l=r.length,c=new Uint8Array(l>>2);let u;if(r.length<2e7)for(var h=0;h<l;h+=4){u=getNearest(s,d=r[h]*(1/255),A=r[h+1]*(1/255),g=r[h+2]*(1/255),p=r[h+3]*(1/255)),c[h>>2]=u.ind,o[h>>2]=u.est.rgba}else for(h=0;h<l;h+=4){var d=r[h]*(1/255),A=r[h+1]*(1/255),g=r[h+2]*(1/255),p=r[h+3]*(1/255);for(u=s;u.left;)u=planeDst(u.est,d,A,g,p)<=0?u.left:u.right;c[h>>2]=u.ind,o[h>>2]=u.est.rgba}return{abuf:i.buffer,inds:c,plte:f}}function getKDtree(e,t,r){null==r&&(r=1e-4);const i=new Uint32Array(e.buffer),o={i0:0,i1:e.length,bst:null,est:null,tdst:0,left:null,right:null};o.bst=stats(e,o.i0,o.i1),o.est=estats(o.bst);const a=[o];for(;a.length<t;){let t=0,o=0;for(var s=0;s<a.length;s++)a[s].est.L>t&&(t=a[s].est.L,o=s);if(t<r)break;const f=a[o],l=splitPixels(e,i,f.i0,f.i1,f.est.e,f.est.eMq255);if(f.i0>=l||f.i1<=l){f.est.L=0;continue}const c={i0:f.i0,i1:l,bst:null,est:null,tdst:0,left:null,right:null};c.bst=stats(e,c.i0,c.i1),c.est=estats(c.bst);const u={i0:l,i1:f.i1,bst:null,est:null,tdst:0,left:null,right:null};u.bst={R:[],m:[],N:f.bst.N-c.bst.N};for(s=0;s<16;s++)u.bst.R[s]=f.bst.R[s]-c.bst.R[s];for(s=0;s<4;s++)u.bst.m[s]=f.bst.m[s]-c.bst.m[s];u.est=estats(u.bst),f.left=c,f.right=u,a[o]=c,a.push(u)}a.sort(((e,t)=>t.bst.N-e.bst.N));for(s=0;s<a.length;s++)a[s].ind=s;return[o,a]}function getNearest(e,t,r,i,o){if(null==e.left)return e.tdst=function dist(e,t,r,i,o){const a=t-e[0],s=r-e[1],f=i-e[2],l=o-e[3];return a*a+s*s+f*f+l*l}(e.est.q,t,r,i,o),e;const a=planeDst(e.est,t,r,i,o);let s=e.left,f=e.right;a>0&&(s=e.right,f=e.left);const l=getNearest(s,t,r,i,o);if(l.tdst<=a*a)return l;const c=getNearest(f,t,r,i,o);return c.tdst<l.tdst?c:l}function planeDst(e,t,r,i,o){const{e:a}=e;return a[0]*t+a[1]*r+a[2]*i+a[3]*o-e.eMq}function splitPixels(e,t,r,i,o,a){for(i-=4;r<i;){for(;vecDot(e,r,o)<=a;)r+=4;for(;vecDot(e,i,o)>a;)i-=4;if(r>=i)break;const s=t[r>>2];t[r>>2]=t[i>>2],t[i>>2]=s,r+=4,i-=4}for(;vecDot(e,r,o)>a;)r-=4;return r+4}function vecDot(e,t,r){return e[t]*r[0]+e[t+1]*r[1]+e[t+2]*r[2]+e[t+3]*r[3]}function stats(e,t,r){const i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=[0,0,0,0],a=r-t>>2;for(let a=t;a<r;a+=4){const t=e[a]*(1/255),r=e[a+1]*(1/255),s=e[a+2]*(1/255),f=e[a+3]*(1/255);o[0]+=t,o[1]+=r,o[2]+=s,o[3]+=f,i[0]+=t*t,i[1]+=t*r,i[2]+=t*s,i[3]+=t*f,i[5]+=r*r,i[6]+=r*s,i[7]+=r*f,i[10]+=s*s,i[11]+=s*f,i[15]+=f*f}return i[4]=i[1],i[8]=i[2],i[9]=i[6],i[12]=i[3],i[13]=i[7],i[14]=i[11],{R:i,m:o,N:a}}function estats(e){const{R:t}=e,{m:r}=e,{N:i}=e,a=r[0],s=r[1],f=r[2],l=r[3],c=0==i?0:1/i,u=[t[0]-a*a*c,t[1]-a*s*c,t[2]-a*f*c,t[3]-a*l*c,t[4]-s*a*c,t[5]-s*s*c,t[6]-s*f*c,t[7]-s*l*c,t[8]-f*a*c,t[9]-f*s*c,t[10]-f*f*c,t[11]-f*l*c,t[12]-l*a*c,t[13]-l*s*c,t[14]-l*f*c,t[15]-l*l*c],h=u,d=o;let A=[Math.random(),Math.random(),Math.random(),Math.random()],g=0,p=0;if(0!=i)for(let e=0;e<16&&(A=d.multVec(h,A),p=Math.sqrt(d.dot(A,A)),A=d.sml(1/p,A),!(0!=e&&Math.abs(p-g)<1e-9));e++)g=p;const m=[a*c,s*c,f*c,l*c];return{Cov:u,q:m,e:A,L:g,eMq255:d.dot(d.sml(255,m),A),eMq:d.dot(A,m),rgba:(Math.round(255*m[3])<<24|Math.round(255*m[2])<<16|Math.round(255*m[1])<<8|Math.round(255*m[0])<<0)>>>0}}var o={multVec:(e,t)=>[e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3],e[4]*t[0]+e[5]*t[1]+e[6]*t[2]+e[7]*t[3],e[8]*t[0]+e[9]*t[1]+e[10]*t[2]+e[11]*t[3],e[12]*t[0]+e[13]*t[1]+e[14]*t[2]+e[15]*t[3]],dot:(e,t)=>e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3],sml:(e,t)=>[e*t[0],e*t[1],e*t[2],e*t[3]]};UPNG.encode=function encode(e,t,r,i,o,a,s){null==i&&(i=0),null==s&&(s=!1);const f=compress(e,t,r,i,[!1,!1,!1,0,s,!1]);return compressPNG(f,-1),_main(f,t,r,o,a)},UPNG.encodeLL=function encodeLL(e,t,r,i,o,a,s,f){const l={ctype:0+(1==i?0:2)+(0==o?0:4),depth:a,frames:[]},c=(i+o)*a,u=c*t;for(let i=0;i<e.length;i++)l.frames.push({rect:{x:0,y:0,width:t,height:r},img:new Uint8Array(e[i]),blend:0,dispose:1,bpp:Math.ceil(c/8),bpl:Math.ceil(u/8)});return compressPNG(l,0,!0),_main(l,t,r,s,f)},UPNG.encode.compress=compress,UPNG.encode.dither=dither,UPNG.quantize=quantize,UPNG.quantize.getKDtree=getKDtree,UPNG.quantize.getNearest=getNearest}();const r={toArrayBuffer(e,t){const i=e.width,o=e.height,a=i<<2,s=e.getContext(\"2d\").getImageData(0,0,i,o),f=new Uint32Array(s.data.buffer),l=(32*i+31)/32<<2,c=l*o,u=122+c,h=new ArrayBuffer(u),d=new DataView(h),A=1<<20;let g,p,m,w,v=A,b=0,y=0,E=0;function set16(e){d.setUint16(y,e,!0),y+=2}function set32(e){d.setUint32(y,e,!0),y+=4}function seek(e){y+=e}set16(19778),set32(u),seek(4),set32(122),set32(108),set32(i),set32(-o>>>0),set16(1),set16(32),set32(3),set32(c),set32(2835),set32(2835),seek(8),set32(16711680),set32(65280),set32(255),set32(4278190080),set32(1466527264),function convert(){for(;b<o&&v>0;){for(w=122+b*l,g=0;g<a;)v--,p=f[E++],m=p>>>24,d.setUint32(w+g,p<<8|m),g+=4;b++}E<f.length?(v=A,setTimeout(convert,r._dly)):t(h)}()},toBlob(e,t){this.toArrayBuffer(e,(e=>{t(new Blob([e],{type:\"image/bmp\"}))}))},_dly:9};var i={CHROME:\"CHROME\",FIREFOX:\"FIREFOX\",DESKTOP_SAFARI:\"DESKTOP_SAFARI\",IE:\"IE\",IOS:\"IOS\",ETC:\"ETC\"},o={[i.CHROME]:16384,[i.FIREFOX]:11180,[i.DESKTOP_SAFARI]:16384,[i.IE]:8192,[i.IOS]:4096,[i.ETC]:8192};const a=\"undefined\"!=typeof window,s=\"undefined\"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,f=a&&window.cordova&&window.cordova.require&&window.cordova.require(\"cordova/modulemapper\"),CustomFile=(a||s)&&(f&&f.getOriginalSymbol(window,\"File\")||\"undefined\"!=typeof File&&File),CustomFileReader=(a||s)&&(f&&f.getOriginalSymbol(window,\"FileReader\")||\"undefined\"!=typeof FileReader&&FileReader);function getFilefromDataUrl(e,t,r=Date.now()){return new Promise((i=>{const o=e.split(\",\"),a=o[0].match(/:(.*?);/)[1],s=globalThis.atob(o[1]);let f=s.length;const l=new Uint8Array(f);for(;f--;)l[f]=s.charCodeAt(f);const c=new Blob([l],{type:a});c.name=t,c.lastModified=r,i(c)}))}function getDataUrlFromFile(e){return new Promise(((t,r)=>{const i=new CustomFileReader;i.onload=()=>t(i.result),i.onerror=e=>r(e),i.readAsDataURL(e)}))}function loadImage(e){return new Promise(((t,r)=>{const i=new Image;i.onload=()=>t(i),i.onerror=e=>r(e),i.src=e}))}function getBrowserName(){if(void 0!==getBrowserName.cachedResult)return getBrowserName.cachedResult;let e=i.ETC;const{userAgent:t}=navigator;return/Chrom(e|ium)/i.test(t)?e=i.CHROME:/iP(ad|od|hone)/i.test(t)&&/WebKit/i.test(t)?e=i.IOS:/Safari/i.test(t)?e=i.DESKTOP_SAFARI:/Firefox/i.test(t)?e=i.FIREFOX:(/MSIE/i.test(t)||!0==!!document.documentMode)&&(e=i.IE),getBrowserName.cachedResult=e,getBrowserName.cachedResult}function approximateBelowMaximumCanvasSizeOfBrowser(e,t){const r=getBrowserName(),i=o[r];let a=e,s=t,f=a*s;const l=a>s?s/a:a/s;for(;f>i*i;){const e=(i+a)/2,t=(i+s)/2;e<t?(s=t,a=t*l):(s=e*l,a=e),f=a*s}return{width:a,height:s}}function getNewCanvasAndCtx(e,t){let r,i;try{if(r=new OffscreenCanvas(e,t),i=r.getContext(\"2d\"),null===i)throw new Error(\"getContext of OffscreenCanvas returns null\")}catch(e){r=document.createElement(\"canvas\"),i=r.getContext(\"2d\")}return r.width=e,r.height=t,[r,i]}function drawImageInCanvas(e,t){const{width:r,height:i}=approximateBelowMaximumCanvasSizeOfBrowser(e.width,e.height),[o,a]=getNewCanvasAndCtx(r,i);return t&&/jpe?g/.test(t)&&(a.fillStyle=\"white\",a.fillRect(0,0,o.width,o.height)),a.drawImage(e,0,0,o.width,o.height),o}function isIOS(){return void 0!==isIOS.cachedResult||(isIOS.cachedResult=[\"iPad Simulator\",\"iPhone Simulator\",\"iPod Simulator\",\"iPad\",\"iPhone\",\"iPod\"].includes(navigator.platform)||navigator.userAgent.includes(\"Mac\")&&\"undefined\"!=typeof document&&\"ontouchend\"in document),isIOS.cachedResult}function drawFileInCanvas(e,t={}){return new Promise((function(r,o){let a,s;var $Try_2_Post=function(){try{return s=drawImageInCanvas(a,t.fileType||e.type),r([a,s])}catch(e){return o(e)}},$Try_2_Catch=function(t){try{0;var $Try_3_Catch=function(e){try{throw e}catch(e){return o(e)}};try{let t;return getDataUrlFromFile(e).then((function(e){try{return t=e,loadImage(t).then((function(e){try{return a=e,function(){try{return $Try_2_Post()}catch(e){return o(e)}}()}catch(e){return $Try_3_Catch(e)}}),$Try_3_Catch)}catch(e){return $Try_3_Catch(e)}}),$Try_3_Catch)}catch(e){$Try_3_Catch(e)}}catch(e){return o(e)}};try{if(isIOS()||[i.DESKTOP_SAFARI,i.MOBILE_SAFARI].includes(getBrowserName()))throw new Error(\"Skip createImageBitmap on IOS and Safari\");return createImageBitmap(e).then((function(e){try{return a=e,$Try_2_Post()}catch(e){return $Try_2_Catch()}}),$Try_2_Catch)}catch(e){$Try_2_Catch()}}))}function canvasToFile(e,t,i,o,a=1){return new Promise((function(s,f){let l;if(\"image/png\"===t){let c,u,h;return c=e.getContext(\"2d\"),({data:u}=c.getImageData(0,0,e.width,e.height)),h=UPNG.encode([u.buffer],e.width,e.height,4096*a),l=new Blob([h],{type:t}),l.name=i,l.lastModified=o,$If_4.call(this)}{if(\"image/bmp\"===t)return new Promise((t=>r.toBlob(e,t))).then(function(e){try{return l=e,l.name=i,l.lastModified=o,$If_5.call(this)}catch(e){return f(e)}}.bind(this),f);{if(\"function\"==typeof OffscreenCanvas&&e instanceof OffscreenCanvas)return e.convertToBlob({type:t,quality:a}).then(function(e){try{return l=e,l.name=i,l.lastModified=o,$If_6.call(this)}catch(e){return f(e)}}.bind(this),f);{let d;return d=e.toDataURL(t,a),getFilefromDataUrl(d,i,o).then(function(e){try{return l=e,$If_6.call(this)}catch(e){return f(e)}}.bind(this),f)}function $If_6(){return $If_5.call(this)}}function $If_5(){return $If_4.call(this)}}function $If_4(){return s(l)}}))}function cleanupCanvasMemory(e){e.width=0,e.height=0}function isAutoOrientationInBrowser(){return new Promise((function(e,t){let r,i,o,a,s;return void 0!==isAutoOrientationInBrowser.cachedResult?e(isAutoOrientationInBrowser.cachedResult):(r=\"data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==\",getFilefromDataUrl(\"data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==\",\"test.jpg\",Date.now()).then((function(r){try{return i=r,drawFileInCanvas(i).then((function(r){try{return o=r[1],canvasToFile(o,i.type,i.name,i.lastModified).then((function(r){try{return a=r,cleanupCanvasMemory(o),drawFileInCanvas(a).then((function(r){try{return s=r[0],isAutoOrientationInBrowser.cachedResult=1===s.width&&2===s.height,e(isAutoOrientationInBrowser.cachedResult)}catch(e){return t(e)}}),t)}catch(e){return t(e)}}),t)}catch(e){return t(e)}}),t)}catch(e){return t(e)}}),t))}))}function getExifOrientation(e){return new Promise(((t,r)=>{const i=new CustomFileReader;i.onload=e=>{const r=new DataView(e.target.result);if(65496!=r.getUint16(0,!1))return t(-2);const i=r.byteLength;let o=2;for(;o<i;){if(r.getUint16(o+2,!1)<=8)return t(-1);const e=r.getUint16(o,!1);if(o+=2,65505==e){if(1165519206!=r.getUint32(o+=2,!1))return t(-1);const e=18761==r.getUint16(o+=6,!1);o+=r.getUint32(o+4,e);const i=r.getUint16(o,e);o+=2;for(let a=0;a<i;a++)if(274==r.getUint16(o+12*a,e))return t(r.getUint16(o+12*a+8,e))}else{if(65280!=(65280&e))break;o+=r.getUint16(o,!1)}}return t(-1)},i.onerror=e=>r(e),i.readAsArrayBuffer(e)}))}function handleMaxWidthOrHeight(e,t){const{width:r}=e,{height:i}=e,{maxWidthOrHeight:o}=t;let a,s=e;return isFinite(o)&&(r>o||i>o)&&([s,a]=getNewCanvasAndCtx(r,i),r>i?(s.width=o,s.height=i/r*o):(s.width=r/i*o,s.height=o),a.drawImage(e,0,0,s.width,s.height),cleanupCanvasMemory(e)),s}function followExifOrientation(e,t){const{width:r}=e,{height:i}=e,[o,a]=getNewCanvasAndCtx(r,i);switch(t>4&&t<9?(o.width=i,o.height=r):(o.width=r,o.height=i),t){case 2:a.transform(-1,0,0,1,r,0);break;case 3:a.transform(-1,0,0,-1,r,i);break;case 4:a.transform(1,0,0,-1,0,i);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,i,0);break;case 7:a.transform(0,-1,-1,0,i,r);break;case 8:a.transform(0,-1,1,0,0,r)}return a.drawImage(e,0,0,r,i),cleanupCanvasMemory(e),o}function compress(e,t,r=0){return new Promise((function(i,o){let a,s,f,l,c,u,h,d,A,g,p,m,w,v,b,y,E,F,_,B;function incProgress(e=5){if(t.signal&&t.signal.aborted)throw t.signal.reason;a+=e,t.onProgress(Math.min(a,100))}function setProgress(e){if(t.signal&&t.signal.aborted)throw t.signal.reason;a=Math.min(Math.max(e,a),100),t.onProgress(a)}return a=r,s=t.maxIteration||10,f=1024*t.maxSizeMB*1024,incProgress(),drawFileInCanvas(e,t).then(function(r){try{return[,l]=r,incProgress(),c=handleMaxWidthOrHeight(l,t),incProgress(),new Promise((function(r,i){var o;if(!(o=t.exifOrientation))return getExifOrientation(e).then(function(e){try{return o=e,$If_2.call(this)}catch(e){return i(e)}}.bind(this),i);function $If_2(){return r(o)}return $If_2.call(this)})).then(function(r){try{return u=r,incProgress(),isAutoOrientationInBrowser().then(function(r){try{return h=r?c:followExifOrientation(c,u),incProgress(),d=t.initialQuality||1,A=t.fileType||e.type,canvasToFile(h,A,e.name,e.lastModified,d).then(function(r){try{{if(g=r,incProgress(),p=g.size>f,m=g.size>e.size,!p&&!m)return setProgress(100),i(g);var a;function $Loop_3(){if(s--&&(b>f||b>w)){let t,r;return t=B?.95*_.width:_.width,r=B?.95*_.height:_.height,[E,F]=getNewCanvasAndCtx(t,r),F.drawImage(_,0,0,t,r),d*=\"image/png\"===A?.85:.95,canvasToFile(E,A,e.name,e.lastModified,d).then((function(e){try{return y=e,cleanupCanvasMemory(_),_=E,b=y.size,setProgress(Math.min(99,Math.floor((v-b)/(v-f)*100))),$Loop_3}catch(e){return o(e)}}),o)}return[1]}return w=e.size,v=g.size,b=v,_=h,B=!t.alwaysKeepResolution&&p,(a=function(e){for(;e;){if(e.then)return void e.then(a,o);try{if(e.pop){if(e.length)return e.pop()?$Loop_3_exit.call(this):e;e=$Loop_3}else e=e.call(this)}catch(e){return o(e)}}}.bind(this))($Loop_3);function $Loop_3_exit(){return cleanupCanvasMemory(_),cleanupCanvasMemory(E),cleanupCanvasMemory(c),cleanupCanvasMemory(h),cleanupCanvasMemory(l),setProgress(100),i(y)}}}catch(u){return o(u)}}.bind(this),o)}catch(e){return o(e)}}.bind(this),o)}catch(e){return o(e)}}.bind(this),o)}catch(e){return o(e)}}.bind(this),o)}))}const l=\"\\nlet scriptImported = false\\nself.addEventListener('message', async (e) => {\\n  const { file, id, imageCompressionLibUrl, options } = e.data\\n  options.onProgress = (progress) => self.postMessage({ progress, id })\\n  try {\\n    if (!scriptImported) {\\n      // console.log('[worker] importScripts', imageCompressionLibUrl)\\n      self.importScripts(imageCompressionLibUrl)\\n      scriptImported = true\\n    }\\n    // console.log('[worker] self', self)\\n    const compressedFile = await imageCompression(file, options)\\n    self.postMessage({ file: compressedFile, id })\\n  } catch (e) {\\n    // console.error('[worker] error', e)\\n    self.postMessage({ error: e.message + '\\\\n' + e.stack, id })\\n  }\\n})\\n\";let c;function compressOnWebWorker(e,t){return new Promise(((r,i)=>{c||(c=function createWorkerScriptURL(e){const t=[];return\"function\"==typeof e?t.push(`(${e})()`):t.push(e),URL.createObjectURL(new Blob(t))}(l));const o=new Worker(c);o.addEventListener(\"message\",(function handler(e){if(t.signal&&t.signal.aborted)o.terminate();else if(void 0===e.data.progress){if(e.data.error)return i(new Error(e.data.error)),void o.terminate();r(e.data.file),o.terminate()}else t.onProgress(e.data.progress)})),o.addEventListener(\"error\",i),t.signal&&t.signal.addEventListener(\"abort\",(()=>{i(t.signal.reason),o.terminate()})),o.postMessage({file:e,imageCompressionLibUrl:t.libURL,options:{...t,onProgress:void 0,signal:void 0}})}))}function imageCompression(e,t){return new Promise((function(r,i){let o,a,s,f,l,c;if(o={...t},s=0,({onProgress:f}=o),o.maxSizeMB=o.maxSizeMB||Number.POSITIVE_INFINITY,l=\"boolean\"!=typeof o.useWebWorker||o.useWebWorker,delete o.useWebWorker,o.onProgress=e=>{s=e,\"function\"==typeof f&&f(s)},!(e instanceof Blob||e instanceof CustomFile))return i(new Error(\"The file given is not an instance of Blob or File\"));if(!/^image/.test(e.type))return i(new Error(\"The file given is not an image\"));if(c=\"undefined\"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,!l||\"function\"!=typeof Worker||c)return compress(e,o).then(function(e){try{return a=e,$If_4.call(this)}catch(e){return i(e)}}.bind(this),i);var u=function(){try{return $If_4.call(this)}catch(e){return i(e)}}.bind(this),$Try_1_Catch=function(t){try{return compress(e,o).then((function(e){try{return a=e,u()}catch(e){return i(e)}}),i)}catch(e){return i(e)}};try{return o.libURL=o.libURL||\"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js\",compressOnWebWorker(e,o).then((function(e){try{return a=e,u()}catch(e){return $Try_1_Catch()}}),$Try_1_Catch)}catch(e){$Try_1_Catch()}function $If_4(){try{a.name=e.name,a.lastModified=e.lastModified}catch(e){}try{o.preserveExif&&\"image/jpeg\"===e.type&&(!o.fileType||o.fileType&&o.fileType===e.type)&&(a=copyExifWithoutOrientation(e,a))}catch(e){}return r(a)}}))}imageCompression.getDataUrlFromFile=getDataUrlFromFile,imageCompression.getFilefromDataUrl=getFilefromDataUrl,imageCompression.loadImage=loadImage,imageCompression.drawImageInCanvas=drawImageInCanvas,imageCompression.drawFileInCanvas=drawFileInCanvas,imageCompression.canvasToFile=canvasToFile,imageCompression.getExifOrientation=getExifOrientation,imageCompression.handleMaxWidthOrHeight=handleMaxWidthOrHeight,imageCompression.followExifOrientation=followExifOrientation,imageCompression.cleanupCanvasMemory=cleanupCanvasMemory,imageCompression.isAutoOrientationInBrowser=isAutoOrientationInBrowser,imageCompression.approximateBelowMaximumCanvasSizeOfBrowser=approximateBelowMaximumCanvasSizeOfBrowser,imageCompression.copyExifWithoutOrientation=copyExifWithoutOrientation,imageCompression.getBrowserName=getBrowserName,imageCompression.version=\"2.0.2\";export{imageCompression as default};\n//# sourceMappingURL=browser-image-compression.mjs.map\n","/**\n * Image processing utilities\n */\n\nimport imageCompression from 'browser-image-compression';\n\n/**\n * Quality presets\n */\nconst QUALITY_PRESETS = {\n  low: {\n    maxWidthOrHeight: 700,\n    quality: 0.7,\n    useWebWorker: true\n  },\n  normal: {\n    maxWidthOrHeight: 1200,\n    quality: 0.85,\n    useWebWorker: true\n  },\n  high: {\n    maxWidthOrHeight: 2000,\n    quality: 0.95,\n    useWebWorker: true\n  }\n};\n\n/**\n * Compress image with quality preset\n */\nexport async function compressImage(file, quality = 'normal') {\n  try {\n    const options = QUALITY_PRESETS[quality] || QUALITY_PRESETS.normal;\n    const compressed = await imageCompression(file, options);\n\n    console.log(`Image compressed: ${(file.size / 1024).toFixed(1)}KB  ${(compressed.size / 1024).toFixed(1)}KB (${quality})`);\n\n    return compressed;\n  } catch (error) {\n    console.error('Image compression failed:', error);\n    return file; // Return original on error\n  }\n}\n\n/**\n * Convert File/Blob to base64 for storage\n */\nexport async function fileToBase64(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = () => resolve(reader.result);\n    reader.onerror = reject;\n    reader.readAsDataURL(file);\n  });\n}\n\n/**\n * Convert base64 to Blob\n */\nexport function base64ToBlob(base64) {\n  const parts = base64.split(';base64,');\n  const contentType = parts[0].split(':')[1];\n  const raw = window.atob(parts[1]);\n  const rawLength = raw.length;\n  const uInt8Array = new Uint8Array(rawLength);\n\n  for (let i = 0; i < rawLength; ++i) {\n    uInt8Array[i] = raw.charCodeAt(i);\n  }\n\n  return new Blob([uInt8Array], { type: contentType });\n}\n\n/**\n * Get image dimensions\n */\nexport async function getImageDimensions(file) {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    const url = URL.createObjectURL(file);\n\n    img.onload = () => {\n      URL.revokeObjectURL(url);\n      resolve({\n        width: img.naturalWidth,\n        height: img.naturalHeight\n      });\n    };\n\n    img.onerror = () => {\n      URL.revokeObjectURL(url);\n      reject(new Error('Failed to load image'));\n    };\n\n    img.src = url;\n  });\n}\n\n/**\n * Extract EXIF metadata from image\n * Note: browser-image-compression preserves EXIF data\n */\nexport async function extractExifData(file) {\n  // For now, just extract basic file metadata\n  // Full EXIF extraction would require exif-js library\n  const dimensions = await getImageDimensions(file);\n\n  return {\n    fileName: file.name,\n    fileSize: file.size,\n    fileType: file.type,\n    lastModified: file.lastModified,\n    width: dimensions.width,\n    height: dimensions.height,\n    // Future: camera model, GPS, date taken, etc.\n  };\n}\n\n/**\n * Process uploaded image\n * Returns processed image data ready for storage\n */\nexport async function processImage(file, quality = 'normal') {\n  try {\n    // Compress image\n    const compressed = await compressImage(file, quality);\n\n    // Extract metadata\n    const metadata = await extractExifData(file);\n\n    // Convert to base64 for IndexedDB storage\n    const base64 = await fileToBase64(compressed);\n\n    return {\n      base64,\n      metadata: {\n        ...metadata,\n        quality,\n        originalSize: file.size,\n        compressedSize: compressed.size,\n        compressionRatio: (compressed.size / file.size).toFixed(2)\n      }\n    };\n  } catch (error) {\n    console.error('Image processing failed:', error);\n    throw error;\n  }\n}\n","/**\r\n * Card arrangement utilities\r\n * Adapted from spatial-notes-v2 for Konva.js\r\n */\r\n\r\n/**\r\n * Arrange cards in vertical column\r\n * Based on v2's arrangeSelectedInColumn\r\n */\r\nexport function arrangeVertical(cards, centerPos) {\r\n  const gap = 60; // 20% of 300px card width\r\n  const positions = [];\r\n\r\n  // Calculate total height needed\r\n  let totalHeight = 0;\r\n  cards.forEach((card, index) => {\r\n    const height = card.height || 150;\r\n    totalHeight += height;\r\n    if (index < cards.length - 1) totalHeight += gap;\r\n  });\r\n\r\n  // Start from top, centered vertically around centerPos\r\n  let currentY = centerPos.y - totalHeight / 2;\r\n\r\n  cards.forEach(card => {\r\n    const height = card.height || 150;\r\n    const width = card.width || 200;\r\n\r\n    positions.push({\r\n      id: card.id,\r\n      x: centerPos.x - width / 2, // Center horizontally\r\n      y: currentY\r\n    });\r\n\r\n    currentY += height + gap;\r\n  });\r\n\r\n  return positions;\r\n}\r\n\r\n/**\r\n * Arrange cards in horizontal row\r\n * Based on v2's arrangeSelectedInRow\r\n */\r\nexport function arrangeHorizontal(cards, centerPos) {\r\n  const gap = 60; // 20% spacing\r\n  const positions = [];\r\n\r\n  // Calculate total width needed\r\n  let totalWidth = 0;\r\n  cards.forEach((card, index) => {\r\n    const width = card.width || 200;\r\n    totalWidth += width;\r\n    if (index < cards.length - 1) totalWidth += gap;\r\n  });\r\n\r\n  // Start from left, centered horizontally around centerPos\r\n  let currentX = centerPos.x - totalWidth / 2;\r\n\r\n  cards.forEach(card => {\r\n    const width = card.width || 200;\r\n\r\n    positions.push({\r\n      id: card.id,\r\n      x: currentX,\r\n      y: centerPos.y // Top-aligned\r\n    });\r\n\r\n    currentX += width + gap;\r\n  });\r\n\r\n  return positions;\r\n}\r\n\r\n/**\r\n * Arrange cards in grid\r\n * Based on v2's arrangeSelectedInGrid\r\n */\r\nexport function arrangeGrid(cards, centerPos) {\r\n  const spacing = 180; // Both horizontal and vertical\r\n  const positions = [];\r\n\r\n  // Calculate grid dimensions\r\n  const cols = Math.ceil(Math.sqrt(cards.length));\r\n  const rows = Math.ceil(cards.length / cols);\r\n\r\n  const gridWidth = cols * spacing;\r\n  const gridHeight = rows * spacing;\r\n\r\n  // Start position (top-left of grid, centered around centerPos)\r\n  const startX = centerPos.x - gridWidth / 2;\r\n  const startY = centerPos.y - gridHeight / 2;\r\n\r\n  cards.forEach((card, index) => {\r\n    const col = index % cols;\r\n    const row = Math.floor(index / cols);\r\n\r\n    positions.push({\r\n      id: card.id,\r\n      x: startX + col * spacing,\r\n      y: startY + row * spacing\r\n    });\r\n  });\r\n\r\n  return positions;\r\n}\r\n\r\n/**\r\n * Arrange cards in cluster (circle)\r\n * Based on v2's clusterSelectedCards\r\n */\r\nexport function arrangeCluster(cards, centerPos) {\r\n  const radius = 50;\r\n  const positions = [];\r\n\r\n  cards.forEach((card, index) => {\r\n    const angle = (index / cards.length) * 2 * Math.PI;\r\n    const x = centerPos.x + Math.cos(angle) * radius;\r\n    const y = centerPos.y + Math.sin(angle) * radius;\r\n\r\n    positions.push({\r\n      id: card.id,\r\n      x: x,\r\n      y: y\r\n    });\r\n  });\r\n\r\n  return positions;\r\n}\r\n\r\n/**\r\n * Arrange cards in vertical columns (grid variant)\r\n * Max 5 columns, 20px gaps both ways\r\n * All cards use standard width for aligned columns\r\n */\r\nexport function arrangeGridVertical(cards, centerPos) {\r\n  const maxCols = 5;\r\n  const gap = 20;\r\n  const standardWidth = 200; // Standard width for all cards\r\n  const positions = [];\r\n\r\n  const cols = Math.min(maxCols, Math.ceil(Math.sqrt(cards.length)));\r\n  const cardsPerCol = Math.ceil(cards.length / cols);\r\n\r\n  // Calculate total grid width (all columns same width)\r\n  const totalWidth = cols * standardWidth + (cols - 1) * gap;\r\n\r\n  // Start position\r\n  let currentX = centerPos.x - totalWidth / 2;\r\n  const startY = centerPos.y;\r\n\r\n  let cardIndex = 0;\r\n  for (let col = 0; col < cols && cardIndex < cards.length; col++) {\r\n    let currentY = startY;\r\n\r\n    for (let row = 0; row < cardsPerCol && cardIndex < cards.length; row++) {\r\n      const card = cards[cardIndex];\r\n      const height = card.height || 150;\r\n\r\n      positions.push({\r\n        id: card.id,\r\n        x: currentX,\r\n        y: currentY\r\n      });\r\n\r\n      currentY += height + gap;\r\n      cardIndex++;\r\n    }\r\n\r\n    currentX += standardWidth + gap;\r\n  }\r\n\r\n  return positions;\r\n}\r\n\r\n/**\r\n * Arrange cards in packed rows\r\n * Max 5 per row, top-aligned within row, tight vertical packing\r\n * All cards use standard width for aligned columns\r\n */\r\nexport function arrangeGridHorizontal(cards, centerPos) {\r\n  const maxCols = 5;\r\n  const gap = 20;\r\n  const standardWidth = 200; // Standard width for all cards\r\n  const positions = [];\r\n\r\n  // Group cards into rows\r\n  const rows = [];\r\n  for (let i = 0; i < cards.length; i += maxCols) {\r\n    rows.push(cards.slice(i, i + maxCols));\r\n  }\r\n\r\n  // Calculate row heights (tallest card in each row)\r\n  const rowHeights = rows.map(row => {\r\n    return Math.max(...row.map(card => card.height || 150));\r\n  });\r\n\r\n  // Calculate total grid height\r\n  const totalHeight = rowHeights.reduce((sum, h) => sum + h, 0) + (rows.length - 1) * gap;\r\n\r\n  let currentY = centerPos.y - totalHeight / 2;\r\n\r\n  rows.forEach((row, rowIndex) => {\r\n    // Calculate row width (all cards same width)\r\n    const rowWidth = row.length * standardWidth + (row.length - 1) * gap;\r\n    let currentX = centerPos.x - rowWidth / 2;\r\n\r\n    row.forEach(card => {\r\n      positions.push({\r\n        id: card.id,\r\n        x: currentX,\r\n        y: currentY // Top-aligned within row\r\n      });\r\n\r\n      currentX += standardWidth + gap;\r\n    });\r\n\r\n    // Next row starts at bottom of tallest card in current row + gap\r\n    currentY += rowHeights[rowIndex] + gap;\r\n  });\r\n\r\n  return positions;\r\n}\r\n\r\n/**\r\n * Arrange cards in overlapping grid (Kanban-style, for showing titles)\r\n * Max 5 per row, cards overlap vertically to show ~120px of each\r\n * Rows start at left edge\r\n * All cards use standard width for aligned columns\r\n */\r\nexport function arrangeGridTopAligned(cards, centerPos) {\r\n  const maxCols = 5;\r\n  const colSpacing = 15; // Tight horizontal spacing\r\n  const rowSpacing = 120; // Vertical overlap - show 120px of each card\r\n  const standardWidth = 200; // Standard width for all cards\r\n  const positions = [];\r\n\r\n  // Group into rows\r\n  const rows = [];\r\n  for (let i = 0; i < cards.length; i += maxCols) {\r\n    rows.push(cards.slice(i, i + maxCols));\r\n  }\r\n\r\n  const totalHeight = rows.length * rowSpacing;\r\n  let currentY = centerPos.y - totalHeight / 2;\r\n\r\n  rows.forEach(row => {\r\n    // All rows start at the same X position (left-aligned)\r\n    let currentX = centerPos.x;\r\n\r\n    row.forEach(card => {\r\n      positions.push({\r\n        id: card.id,\r\n        x: currentX,\r\n        y: currentY\r\n      });\r\n\r\n      currentX += standardWidth + colSpacing;\r\n    });\r\n\r\n    currentY += rowSpacing; // Overlapping rows\r\n  });\r\n\r\n  return positions;\r\n}\r\n","/**\n * Canvas module using Konva.js\n *\n * FILE ORGANIZATION:\n * This file is organized into clear sections for easier navigation.\n * Use Ctrl+F to jump to section markers like \"// === RENDERING ===\"\n *\n * SECTIONS:\n * 1. Global State & Configuration\n * 2. Rendering (cards, colors)\n * 3. Card Creation & Editing (inline editor, bulk editor, touch menus)\n * 4. Card Operations (flip, delete)\n * 5. Canvas Management (reload, undo/redo)\n * 6. Clipboard (copy/paste/duplicate)\n * 7. Selection & Interaction (events, drag, pan, zoom)\n * 8. Public API (exports)\n * 9. UI Dialogs (command palette, quality dialog, etc)\n * 10. Search (boolean search with wildcards, proximity, etc)\n * 11. Context Menu & Card Actions (lock, pin)\n * 12. UI Buttons & Theme\n * 13. Arrangements & Keyboard Handlers\n *\n * NOTE: This file is large (3700+ lines) due to tight coupling with global state.\n * Future refactoring: Consider CanvasManager class or dependency injection.\n */\n\nimport Konva from 'konva';\nimport { getAllCards, updateCard, createCard, deleteCard } from './storage.js';\nimport { processImage } from '../utils/image-processing.js';\nimport {\n  arrangeVertical,\n  arrangeHorizontal,\n  arrangeGrid,\n  arrangeCluster,\n  arrangeGridVertical,\n  arrangeGridHorizontal,\n  arrangeGridTopAligned\n} from './arrangement.js';\n\n// ============================================================================\n// SECTION 1: GLOBAL STATE & CONFIGURATION\n// ============================================================================\n\nlet stage = null;\nlet layer = null;\nlet isPanning = false;\nlet cardGroups = new Map(); // Map cardId -> Konva.Group\n\n// Selection rectangle\nlet selectionRectangle = null;\nlet selectionStartPos = null;\nlet isSelecting = false;\n\n// Undo/redo stacks\nlet undoStack = [];\nlet redoStack = [];\nconst MAX_UNDO_STACK = 50;\n\n// Clipboard for copy/paste\nlet clipboard = [];\n\n// ============================================================================\n// SECTION 2: RENDERING (Cards, Colors, Visual Elements)\n// ============================================================================\n\n/**\n * Get card color from cardColor property\n */\nfunction getCardColor(cardColor) {\n  const colorMap = {\n    // Format: card-color-X\n    'card-color-1': '#d4f2d4', // Grn\n    'card-color-2': '#ffe4b3', // Orange\n    'card-color-3': '#ffc1cc', // Rd\n    'card-color-4': '#fff7b3', // Gul\n    'card-color-5': '#f3e5f5', // Lila\n    'card-color-6': '#c7e7ff', // Bl\n    'card-color-7': '#e0e0e0', // Gr\n    'card-color-8': '#ffffff', // Vit\n\n    // Format: color names (fr baktkompatibilitet och import)\n    'green': '#d4f2d4',\n    'orange': '#ffe4b3',\n    'pink': '#ffc1cc',\n    'red': '#ffc1cc',\n    'yellow': '#fff7b3',\n    'purple': '#f3e5f5',\n    'blue': '#c7e7ff',\n    'gray': '#e0e0e0',\n    'grey': '#e0e0e0',\n    'white': '#ffffff'\n  };\n\n  return colorMap[cardColor] || '#ffffff'; // Default white\n}\n\n/**\n * Initialize Konva canvas\n */\nexport async function initCanvas() {\n  const container = document.getElementById('canvas-container');\n  \n  if (!container) {\n    console.error('Canvas container not found');\n    return;\n  }\n  \n  // Create stage\n  stage = new Konva.Stage({\n    container: 'canvas-container',\n    width: container.clientWidth,\n    height: container.clientHeight,\n    draggable: false\n  });\n  \n  // Create main layer\n  layer = new Konva.Layer();\n  stage.add(layer);\n\n  // Create selection rectangle (hidden by default)\n  selectionRectangle = new Konva.Rect({\n    fill: 'rgba(33, 150, 243, 0.1)',\n    stroke: '#2196F3',\n    strokeWidth: 1,\n    visible: false\n  });\n  layer.add(selectionRectangle);\n\n  // Load cards from storage\n  await loadCards();\n\n  // Setup event listeners\n  setupCanvasEvents();\n\n  // Setup image drag-and-drop\n  setupImageDragDrop();\n\n  // Create floating buttons\n  createFitAllButton();\n  createCommandPaletteButton();\n  createAddButton();\n\n  console.log('Konva canvas initialized');\n}\n\n/**\n * Load cards from storage and render\n */\nasync function loadCards() {\n  const cards = await getAllCards();\n  \n  for (const card of cards) {\n    renderCard(card);\n  }\n  \n  layer.batchDraw();\n}\n\n/**\n * Render a single card on canvas\n */\nfunction renderCard(cardData) {\n  const group = new Konva.Group({\n    x: cardData.position?.x || 100,\n    y: cardData.position?.y || 100,\n    draggable: true\n  });\n\n  if (cardData.image) {\n    // Image card\n    renderImageCard(group, cardData);\n  } else {\n    // Text card\n    renderTextCard(group, cardData);\n  }\n\n  // Store card ID on group\n  group.setAttr('cardId', cardData.id);\n\n  // Set locked state\n  if (cardData.locked) {\n    group.draggable(false);\n    group.setAttr('locked', true);\n  }\n\n  // Click to select (for deletion)\n  group.on('click', function() {\n    const isSelected = this.hasName('selected');\n    const background = this.findOne('Rect');\n    const isEink = document.body.classList.contains('eink-theme');\n    const isDark = document.body.classList.contains('dark-theme');\n\n    if (isSelected) {\n      this.removeName('selected');\n      if (background) {\n        if (isEink) {\n          background.stroke('#000000');\n          background.strokeWidth(2);\n        } else if (isDark) {\n          background.stroke('#4a5568');\n          background.strokeWidth(1);\n        } else {\n          background.stroke('#e0e0e0');\n          background.strokeWidth(1);\n        }\n      }\n    } else {\n      this.addName('selected');\n      if (background) {\n        if (isEink) {\n          background.stroke('#000000');\n          background.strokeWidth(4);\n        } else {\n          background.stroke('#2196F3');\n          background.strokeWidth(3);\n        }\n      }\n    }\n\n    layer.batchDraw();\n  });\n\n  // Right-click context menu\n  group.on('contextmenu', function(e) {\n    e.evt.preventDefault();\n    showContextMenu(e.evt.clientX, e.evt.clientY, cardData.id, this);\n  });\n\n  // Touch handlers\n  let touchTimer = null;\n  let touchStartPos = null;\n  let hasMoved = false;\n\n  group.on('touchstart', function(e) {\n    const pos = this.position();\n    touchStartPos = { x: pos.x, y: pos.y };\n    hasMoved = false;\n\n    // Long press timer\n    touchTimer = setTimeout(async () => {\n      if (!hasMoved) {\n        // Long press detected\n        const selectedGroups = layer.find('.selected');\n\n        if (selectedGroups.length > 1 && this.hasName('selected')) {\n          // Multiple cards selected: show bulk menu\n          await showTouchBulkMenu(e.evt.clientX || e.evt.touches[0].clientX,\n                                  e.evt.clientY || e.evt.touches[0].clientY);\n        } else {\n          // Single card: open editor\n          if (cardData.image && cardData.flipped) {\n            createInlineEditor(cardData.id, this, cardData.backText || '', true);\n          } else if (cardData.image) {\n            // For image cards (front side), flip them\n            await flipCard(cardData.id);\n          } else {\n            // For text cards, open editor\n            createInlineEditor(cardData.id, this, cardData.text || '', false);\n          }\n        }\n        touchTimer = null;\n      }\n    }, 600); // 600ms long press\n  });\n\n  group.on('touchmove', function() {\n    const currentPos = this.position();\n    const moved = Math.abs(currentPos.x - touchStartPos.x) > 5 ||\n                  Math.abs(currentPos.y - touchStartPos.y) > 5;\n    if (moved) {\n      hasMoved = true;\n    }\n  });\n\n  group.on('touchend touchcancel', function() {\n    if (touchTimer) {\n      clearTimeout(touchTimer);\n      touchTimer = null;\n    }\n  });\n\n  group.on('dragstart', function() {\n    hasMoved = true;\n    if (touchTimer) {\n      clearTimeout(touchTimer);\n      touchTimer = null;\n    }\n  });\n\n  // Group drag - move all selected cards together\n  let dragStartPositions = null;\n\n  group.on('dragstart', function() {\n    const isSelected = this.hasName('selected');\n\n    if (isSelected) {\n      // Save positions of all selected cards\n      dragStartPositions = new Map();\n      const selectedNodes = layer.find('.selected');\n\n      selectedNodes.forEach(node => {\n        if (node !== this && node.getAttr('cardId')) {\n          dragStartPositions.set(node, {\n            x: node.x(),\n            y: node.y()\n          });\n        }\n      });\n    }\n  });\n\n  group.on('dragmove', function() {\n    if (dragStartPositions && dragStartPositions.size > 0) {\n      // Calculate delta from this card's movement\n      const currentPos = this.position();\n      const startPos = { x: this.getAttr('startX'), y: this.getAttr('startY') };\n\n      // Store start position on first move\n      if (startPos.x === undefined) {\n        this.setAttr('startX', currentPos.x);\n        this.setAttr('startY', currentPos.y);\n        return;\n      }\n\n      const delta = {\n        x: currentPos.x - startPos.x,\n        y: currentPos.y - startPos.y\n      };\n\n      // Move all other selected cards by the same delta\n      dragStartPositions.forEach((originalPos, node) => {\n        node.position({\n          x: originalPos.x + delta.x,\n          y: originalPos.y + delta.y\n        });\n      });\n\n      layer.batchDraw();\n    }\n  });\n\n  group.on('dragend', async function() {\n    if (dragStartPositions && dragStartPositions.size > 0) {\n      // Update all moved cards in database and add to undo stack\n      for (const [node, originalPos] of dragStartPositions) {\n        const cardId = node.getAttr('cardId');\n        if (cardId) {\n          const newPosition = { x: node.x(), y: node.y() };\n\n          // Add to undo stack\n          pushUndo({\n            type: 'update',\n            cardId: cardId,\n            oldData: { position: originalPos },\n            newData: { position: newPosition }\n          });\n\n          await updateCard(cardId, { position: newPosition });\n        }\n      }\n\n      dragStartPositions = null;\n    }\n\n    // Clear start position attributes\n    this.setAttr('startX', undefined);\n    this.setAttr('startY', undefined);\n  });\n\n  layer.add(group);\n  cardGroups.set(cardData.id, group);\n}\n\n/**\n * Render text card\n */\nfunction renderTextCard(group, cardData) {\n  // Get card color\n  const cardColor = getCardColor(cardData.cardColor);\n\n  // Check themes\n  const isEink = document.body.classList.contains('eink-theme');\n  const isDark = document.body.classList.contains('dark-theme');\n\n  // E-ink: white with light tint if colored, otherwise white\n  let fillColor = cardColor;\n  if (isEink) {\n    if (cardData.cardColor && cardData.cardColor !== 'yellow') {\n      // Light tint based on card color\n      const colorMap = {\n        blue: '#e6f2ff',\n        green: '#e6ffe6',\n        pink: '#ffe6f2',\n        purple: '#f2e6ff',\n        orange: '#fff2e6'\n      };\n      fillColor = colorMap[cardData.cardColor] || '#ffffff';\n    } else {\n      fillColor = '#ffffff';\n    }\n  } else if (isDark) {\n    fillColor = '#2d3748';\n  }\n\n  // Background\n  const background = new Konva.Rect({\n    width: 200,\n    height: 150,\n    fill: fillColor,\n    stroke: isEink ? '#000000' : (isDark ? '#4a5568' : '#e0e0e0'),\n    strokeWidth: isEink ? 2 : 1,\n    cornerRadius: 8,\n    shadowColor: isEink ? 'transparent' : 'black',\n    shadowBlur: isEink ? 0 : 10,\n    shadowOpacity: isEink ? 0 : 0.1,\n    shadowOffset: { x: 0, y: isEink ? 0 : 2 }\n  });\n\n  // Text\n  const text = new Konva.Text({\n    text: cardData.text || '',\n    x: 16,\n    y: 16,\n    width: 168,\n    fontSize: 16,\n    fontFamily: 'sans-serif',\n    fill: isDark ? '#e0e0e0' : '#1a1a1a',\n    wrap: 'word'\n  });\n\n  group.add(background);\n  group.add(text);\n}\n\n/**\n * Render image card\n */\nfunction renderImageCard(group, cardData) {\n  const imageObj = new Image();\n  const imageData = cardData.image;\n  const isFlipped = cardData.flipped || false;\n\n  imageObj.onload = function() {\n    // Check themes\n    const isEink = document.body.classList.contains('eink-theme');\n    const isDark = document.body.classList.contains('dark-theme');\n\n    // Calculate card dimensions (maintain aspect ratio)\n    // Standard width: 200px for aligned columns\n    const maxWidth = 200;\n    const maxHeight = 300;\n    let width = imageObj.naturalWidth;\n    let height = imageObj.naturalHeight;\n\n    if (width > maxWidth || height > maxHeight) {\n      const ratio = Math.min(maxWidth / width, maxHeight / height);\n      width = width * ratio;\n      height = height * ratio;\n    }\n\n    // Store dimensions on group for flip\n    group.setAttr('cardWidth', width);\n    group.setAttr('cardHeight', height);\n\n    if (isFlipped) {\n      // Show back side (text)\n      const background = new Konva.Rect({\n        width: width,\n        height: height,\n        fill: isEink ? '#ffffff' : (isDark ? '#2d3748' : '#fffacd'),\n        stroke: isEink ? '#000000' : (isDark ? '#4a5568' : '#e0e0e0'),\n        strokeWidth: isEink ? 2 : 1,\n        cornerRadius: 8,\n        shadowColor: isEink ? 'transparent' : 'black',\n        shadowBlur: isEink ? 0 : 10,\n        shadowOpacity: isEink ? 0 : 0.1,\n        shadowOffset: { x: 0, y: isEink ? 0 : 2 }\n      });\n\n      const text = new Konva.Text({\n        text: cardData.backText || 'Dubbelklicka fr att redigera baksidan...',\n        x: 16,\n        y: 16,\n        width: width - 32,\n        height: height - 32,\n        fontSize: 16,\n        fontFamily: 'sans-serif',\n        fill: isDark ? '#e0e0e0' : '#1a1a1a',\n        wrap: 'word',\n        align: 'left',\n        verticalAlign: 'top'\n      });\n\n      group.add(background);\n      group.add(text);\n    } else {\n      // Show front side (image)\n      const background = new Konva.Rect({\n        width: width,\n        height: height,\n        fill: '#ffffff',\n        stroke: isEink ? '#000000' : (isDark ? '#4a5568' : '#e0e0e0'),\n        strokeWidth: isEink ? 2 : 1,\n        cornerRadius: 8,\n        shadowColor: isEink ? 'transparent' : 'black',\n        shadowBlur: isEink ? 0 : 10,\n        shadowOpacity: isEink ? 0 : 0.1,\n        shadowOffset: { x: 0, y: isEink ? 0 : 2 }\n      });\n\n      const konvaImage = new Konva.Image({\n        image: imageObj,\n        width: width,\n        height: height,\n        cornerRadius: 8\n      });\n\n      group.add(background);\n      group.add(konvaImage);\n\n      // Tooltip on hover (show filename)\n      group.on('mouseenter', function() {\n        document.body.style.cursor = 'pointer';\n\n        // Show tooltip\n        const tooltip = document.createElement('div');\n        tooltip.id = 'card-tooltip';\n        tooltip.style.cssText = `\n          position: fixed;\n          background: rgba(0, 0, 0, 0.8);\n          color: white;\n          padding: 8px 12px;\n          border-radius: 6px;\n          font-size: 14px;\n          z-index: 10001;\n          pointer-events: none;\n          font-family: sans-serif;\n        `;\n        tooltip.textContent = cardData.text || 'Bild';\n        document.body.appendChild(tooltip);\n\n        // Update tooltip position on mouse move\n        const updateTooltip = (e) => {\n          tooltip.style.left = (e.clientX + 10) + 'px';\n          tooltip.style.top = (e.clientY + 10) + 'px';\n        };\n\n        stage.on('mousemove', updateTooltip);\n        group.setAttr('tooltipHandler', updateTooltip);\n      });\n\n      group.on('mouseleave', function() {\n        document.body.style.cursor = 'default';\n\n        // Remove tooltip\n        const tooltip = document.getElementById('card-tooltip');\n        if (tooltip) {\n          document.body.removeChild(tooltip);\n        }\n\n        // Remove mousemove handler\n        const handler = group.getAttr('tooltipHandler');\n        if (handler) {\n          stage.off('mousemove', handler);\n        }\n      });\n    }\n\n    layer.batchDraw();\n  };\n\n  imageObj.src = imageData.base64;\n}\n\n// ============================================================================\n// SECTION 3: CARD CREATION & EDITING (Dialogs, Inline Editor, Touch Menus)\n// ============================================================================\n\n/**\n * Create new card\n */\nasync function createNewCard(position) {\n  // Create empty card first\n  const cardData = {\n    text: '',\n    tags: [],\n    position\n  };\n\n  const cardId = await createCard(cardData);\n\n  // Add to undo stack\n  pushUndo({\n    type: 'create',\n    cardId,\n    card: cardData\n  });\n\n  // Reload canvas to show new card\n  await reloadCanvas();\n\n  // Open editor on the new card\n  const group = cardGroups.get(cardId);\n  if (group) {\n    await createInlineEditor(cardId, group, '', false);\n  }\n}\n\n/**\n * Inline text editor using HTML textarea overlay\n */\nasync function createInlineEditor(cardId, group, currentText, isImageBack = false) {\n  // Get card data\n  const cards = await getAllCards();\n  const card = cards.find(c => c.id === cardId);\n  if (!card) return;\n\n  const currentTags = card.tags || [];\n  const currentColor = card.cardColor || '';\n\n  // Create overlay\n  const overlay = document.createElement('div');\n  overlay.style.cssText = `\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.7);\n    z-index: 10000;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  `;\n\n  // Create dialog\n  const dialog = document.createElement('div');\n  dialog.style.cssText = `\n    background: var(--bg-primary);\n    color: var(--text-primary);\n    padding: 24px;\n    border-radius: 12px;\n    max-width: 600px;\n    width: 90%;\n    max-height: 80vh;\n    overflow-y: auto;\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);\n  `;\n\n  dialog.innerHTML = `\n    <h3 style=\"margin-top: 0; margin-bottom: 20px; font-size: 20px; font-weight: 600;\">\n      ${isImageBack ? 'Redigera baksida' : 'Redigera kort'}\n    </h3>\n\n    <div style=\"margin-bottom: 16px;\">\n      <label style=\"display: block; margin-bottom: 8px; font-weight: 500;\">Text:</label>\n      <textarea id=\"editCardText\"\n        style=\"width: 100%; height: 200px; padding: 12px; font-size: 16px;\n               border: 2px solid var(--border-color); border-radius: 8px;\n               background: var(--bg-secondary); color: var(--text-primary);\n               font-family: inherit; resize: vertical; box-sizing: border-box;\"\n      >${currentText || ''}</textarea>\n    </div>\n\n    ${!isImageBack ? `\n    <div style=\"margin-bottom: 16px;\">\n      <label style=\"display: block; margin-bottom: 8px; font-weight: 500;\">Tags (kommaseparerade):</label>\n      <input type=\"text\" id=\"editCardTags\" value=\"${currentTags.join(', ')}\"\n        style=\"width: 100%; padding: 12px; font-size: 16px;\n               border: 2px solid var(--border-color); border-radius: 8px;\n               background: var(--bg-secondary); color: var(--text-primary);\n               box-sizing: border-box;\">\n    </div>\n\n    <div style=\"margin-bottom: 20px;\">\n      <label style=\"display: block; margin-bottom: 8px; font-weight: 500;\">Kortfrg:</label>\n      <div id=\"editColorPicker\" style=\"display: flex; gap: 10px; flex-wrap: wrap;\">\n        <div class=\"color-dot\" data-color=\"\" style=\"width: 36px; height: 36px; border-radius: 50%;\n             background: var(--bg-secondary); border: 3px solid var(--border-color); cursor: pointer;\n             display: flex; align-items: center; justify-content: center; font-size: 20px;\"\n             title=\"Ingen frg\"></div>\n        <div class=\"color-dot\" data-color=\"card-color-1\" style=\"width: 36px; height: 36px; border-radius: 50%;\n             background: #d4f2d4; border: 3px solid transparent; cursor: pointer;\" title=\"Grn\"></div>\n        <div class=\"color-dot\" data-color=\"card-color-2\" style=\"width: 36px; height: 36px; border-radius: 50%;\n             background: #ffe4b3; border: 3px solid transparent; cursor: pointer;\" title=\"Orange\"></div>\n        <div class=\"color-dot\" data-color=\"card-color-3\" style=\"width: 36px; height: 36px; border-radius: 50%;\n             background: #ffc1cc; border: 3px solid transparent; cursor: pointer;\" title=\"Rd\"></div>\n        <div class=\"color-dot\" data-color=\"card-color-4\" style=\"width: 36px; height: 36px; border-radius: 50%;\n             background: #fff7b3; border: 3px solid transparent; cursor: pointer;\" title=\"Gul\"></div>\n        <div class=\"color-dot\" data-color=\"card-color-5\" style=\"width: 36px; height: 36px; border-radius: 50%;\n             background: #f3e5f5; border: 3px solid transparent; cursor: pointer;\" title=\"Lila\"></div>\n        <div class=\"color-dot\" data-color=\"card-color-6\" style=\"width: 36px; height: 36px; border-radius: 50%;\n             background: #c7e7ff; border: 3px solid transparent; cursor: pointer;\" title=\"Bl\"></div>\n        <div class=\"color-dot\" data-color=\"card-color-7\" style=\"width: 36px; height: 36px; border-radius: 50%;\n             background: #e0e0e0; border: 3px solid transparent; cursor: pointer;\" title=\"Gr\"></div>\n        <div class=\"color-dot\" data-color=\"card-color-8\" style=\"width: 36px; height: 36px; border-radius: 50%;\n             background: #ffffff; border: 3px solid #ddd; cursor: pointer;\" title=\"Vit\"></div>\n      </div>\n    </div>\n    ` : ''}\n\n    <div style=\"display: flex; gap: 12px; justify-content: flex-end; margin-top: 24px;\">\n      <button id=\"cancelEdit\" style=\"padding: 12px 24px; background: var(--bg-secondary);\n                                     color: var(--text-primary); border: 2px solid var(--border-color);\n                                     border-radius: 8px; font-size: 16px; font-weight: 500; cursor: pointer;\">\n        Avbryt\n      </button>\n      <button id=\"saveEdit\" style=\"padding: 12px 24px; background: var(--accent-color);\n                                    color: white; border: none; border-radius: 8px;\n                                    font-size: 16px; font-weight: 600; cursor: pointer;\">\n        ${isImageBack ? 'Spara & Vnd tillbaka' : 'Spara'}\n      </button>\n    </div>\n\n    <div style=\"margin-top: 16px; font-size: 13px; color: var(--text-secondary); text-align: center;\">\n      Tips: Ctrl+Enter = Spara, Esc = Avbryt\n    </div>\n  `;\n\n  overlay.appendChild(dialog);\n  document.body.appendChild(overlay);\n\n  // Get elements\n  const textarea = document.getElementById('editCardText');\n  const tagsInput = document.getElementById('editCardTags');\n  const saveBtn = document.getElementById('saveEdit');\n  const cancelBtn = document.getElementById('cancelEdit');\n\n  // Focus textarea\n  textarea.focus();\n  textarea.select();\n\n  // Handle color selection (only for regular cards)\n  let selectedColor = currentColor;\n  if (!isImageBack) {\n    const colorDots = document.querySelectorAll('#editColorPicker .color-dot');\n\n    // Highlight current color\n    colorDots.forEach(dot => {\n      if (dot.dataset.color === currentColor) {\n        dot.style.border = '3px solid var(--accent-color)';\n      } else if (!currentColor && dot.dataset.color === '') {\n        dot.style.border = '3px solid var(--accent-color)';\n      }\n\n      dot.addEventListener('click', function() {\n        // Remove selection from all\n        colorDots.forEach(d => {\n          if (d.dataset.color === '') {\n            d.style.border = '3px solid var(--border-color)';\n          } else if (d.dataset.color === 'card-color-8') {\n            d.style.border = '3px solid #ddd';\n          } else {\n            d.style.border = '3px solid transparent';\n          }\n        });\n\n        // Select this one\n        this.style.border = '3px solid var(--accent-color)';\n        selectedColor = this.dataset.color;\n      });\n    });\n  }\n\n  const cleanup = () => {\n    if (overlay.parentNode) {\n      document.body.removeChild(overlay);\n    }\n    document.removeEventListener('keydown', escHandler);\n  };\n\n  // Save handler\n  const save = async () => {\n    const newText = textarea.value;\n\n    if (isImageBack) {\n      // Save back text and flip card\n      pushUndo({\n        type: 'update',\n        cardId,\n        oldData: { backText: currentText },\n        newData: { backText: newText }\n      });\n\n      await updateCard(cardId, { backText: newText });\n      await flipCard(cardId);\n    } else {\n      // Save regular card\n      const newTags = tagsInput ? tagsInput.value.split(',').map(t => t.trim()).filter(t => t) : currentTags;\n\n      const updates = {\n        text: newText,\n        tags: newTags\n      };\n\n      // Add color if changed\n      if (selectedColor !== currentColor) {\n        updates.cardColor = selectedColor;\n      }\n\n      pushUndo({\n        type: 'update',\n        cardId,\n        oldData: { text: currentText, tags: currentTags, cardColor: currentColor },\n        newData: updates\n      });\n\n      await updateCard(cardId, updates);\n      await reloadCanvas();\n    }\n\n    cleanup();\n  };\n\n  // Event listeners\n  saveBtn.addEventListener('click', save);\n  cancelBtn.addEventListener('click', cleanup);\n\n  // Keyboard shortcuts\n  const escHandler = (e) => {\n    if (e.key === 'Escape') {\n      cleanup();\n    }\n  };\n  document.addEventListener('keydown', escHandler);\n\n  textarea.addEventListener('keydown', (e) => {\n    if (e.ctrlKey && e.key === 'Enter') {\n      e.preventDefault();\n      save();\n    }\n  });\n}\n\n/**\n * Bulk editor for multiple selected cards\n */\nasync function createBulkEditor(cardIds) {\n  const cards = await getAllCards();\n  const selectedCards = cards.filter(c => cardIds.includes(c.id));\n\n  if (selectedCards.length === 0) return;\n\n  // Create overlay\n  const overlay = document.createElement('div');\n  overlay.style.cssText = `\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.7);\n    z-index: 10000;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  `;\n\n  // Create dialog\n  const dialog = document.createElement('div');\n  dialog.style.cssText = `\n    background: var(--bg-primary);\n    color: var(--text-primary);\n    padding: 24px;\n    border-radius: 12px;\n    max-width: 600px;\n    width: 90%;\n    max-height: 80vh;\n    overflow-y: auto;\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);\n  `;\n\n  dialog.innerHTML = `\n    <h3 style=\"margin-top: 0; margin-bottom: 20px; font-size: 20px; font-weight: 600;\">\n      Redigera ${selectedCards.length} kort\n    </h3>\n\n    <div style=\"margin-bottom: 16px; padding: 12px; background: var(--bg-secondary); border-radius: 8px;\">\n      <p style=\"margin: 0; font-size: 14px;\">\n        ndringar appliceras p alla ${selectedCards.length} markerade kort.\n        Lmna flt tomma fr att inte ndra dem.\n      </p>\n    </div>\n\n    <div style=\"margin-bottom: 16px;\">\n      <label style=\"display: block; margin-bottom: 8px; font-weight: 500;\">\n        Lgg till tags (kommaseparerade, lggs till befintliga):\n      </label>\n      <input type=\"text\" id=\"bulkAddTags\"\n        placeholder=\"t.ex. urgent, projekt\"\n        style=\"width: 100%; padding: 12px; font-size: 16px;\n               border: 2px solid var(--border-color); border-radius: 8px;\n               background: var(--bg-secondary); color: var(--text-primary);\n               box-sizing: border-box;\">\n    </div>\n\n    <div style=\"margin-bottom: 20px;\">\n      <label style=\"display: block; margin-bottom: 8px; font-weight: 500;\">Kortfrg:</label>\n      <div id=\"bulkColorPicker\" style=\"display: flex; gap: 10px; flex-wrap: wrap;\">\n        <div class=\"color-dot\" data-color=\"none\" style=\"width: 36px; height: 36px; border-radius: 50%;\n             background: var(--bg-secondary); border: 3px solid var(--accent-color); cursor: pointer;\n             display: flex; align-items: center; justify-content: center; font-size: 20px;\"\n             title=\"ndra inte frg\"></div>\n        <div class=\"color-dot\" data-color=\"\" style=\"width: 36px; height: 36px; border-radius: 50%;\n             background: var(--bg-secondary); border: 3px solid var(--border-color); cursor: pointer;\n             display: flex; align-items: center; justify-content: center; font-size: 20px;\"\n             title=\"Ingen frg\"></div>\n        <div class=\"color-dot\" data-color=\"card-color-1\" style=\"width: 36px; height: 36px; border-radius: 50%;\n             background: #d4f2d4; border: 3px solid transparent; cursor: pointer;\" title=\"Grn\"></div>\n        <div class=\"color-dot\" data-color=\"card-color-2\" style=\"width: 36px; height: 36px; border-radius: 50%;\n             background: #ffe4b3; border: 3px solid transparent; cursor: pointer;\" title=\"Orange\"></div>\n        <div class=\"color-dot\" data-color=\"card-color-3\" style=\"width: 36px; height: 36px; border-radius: 50%;\n             background: #ffc1cc; border: 3px solid transparent; cursor: pointer;\" title=\"Rd\"></div>\n        <div class=\"color-dot\" data-color=\"card-color-4\" style=\"width: 36px; height: 36px; border-radius: 50%;\n             background: #fff7b3; border: 3px solid transparent; cursor: pointer;\" title=\"Gul\"></div>\n        <div class=\"color-dot\" data-color=\"card-color-5\" style=\"width: 36px; height: 36px; border-radius: 50%;\n             background: #f3e5f5; border: 3px solid transparent; cursor: pointer;\" title=\"Lila\"></div>\n        <div class=\"color-dot\" data-color=\"card-color-6\" style=\"width: 36px; height: 36px; border-radius: 50%;\n             background: #c7e7ff; border: 3px solid transparent; cursor: pointer;\" title=\"Bl\"></div>\n        <div class=\"color-dot\" data-color=\"card-color-7\" style=\"width: 36px; height: 36px; border-radius: 50%;\n             background: #e0e0e0; border: 3px solid transparent; cursor: pointer;\" title=\"Gr\"></div>\n        <div class=\"color-dot\" data-color=\"card-color-8\" style=\"width: 36px; height: 36px; border-radius: 50%;\n             background: #ffffff; border: 3px solid #ddd; cursor: pointer;\" title=\"Vit\"></div>\n      </div>\n    </div>\n\n    <div style=\"display: flex; gap: 12px; justify-content: flex-end; margin-top: 24px;\">\n      <button id=\"bulkCancel\" style=\"padding: 12px 24px; background: var(--bg-secondary);\n                                     color: var(--text-primary); border: 2px solid var(--border-color);\n                                     border-radius: 8px; font-size: 16px; font-weight: 500; cursor: pointer;\">\n        Avbryt\n      </button>\n      <button id=\"bulkSave\" style=\"padding: 12px 24px; background: var(--accent-color);\n                                    color: white; border: none; border-radius: 8px;\n                                    font-size: 16px; font-weight: 600; cursor: pointer;\">\n        Uppdatera alla\n      </button>\n    </div>\n\n    <div style=\"margin-top: 16px; font-size: 13px; color: var(--text-secondary); text-align: center;\">\n      Tips: Ctrl+Enter = Spara, Esc = Avbryt\n    </div>\n  `;\n\n  overlay.appendChild(dialog);\n  document.body.appendChild(overlay);\n\n  // Get elements\n  const tagsInput = document.getElementById('bulkAddTags');\n  const saveBtn = document.getElementById('bulkSave');\n  const cancelBtn = document.getElementById('bulkCancel');\n\n  // Handle color selection\n  let selectedColor = 'none'; // Default: don't change\n  const colorDots = document.querySelectorAll('#bulkColorPicker .color-dot');\n\n  colorDots.forEach(dot => {\n    dot.addEventListener('click', function() {\n      // Remove selection from all\n      colorDots.forEach(d => {\n        if (d.dataset.color === 'none') {\n          d.style.border = '3px solid transparent';\n        } else if (d.dataset.color === '') {\n          d.style.border = '3px solid var(--border-color)';\n        } else if (d.dataset.color === 'card-color-8') {\n          d.style.border = '3px solid #ddd';\n        } else {\n          d.style.border = '3px solid transparent';\n        }\n      });\n\n      // Select this one\n      this.style.border = '3px solid var(--accent-color)';\n      selectedColor = this.dataset.color;\n    });\n  });\n\n  const cleanup = () => {\n    if (overlay.parentNode) {\n      document.body.removeChild(overlay);\n    }\n    document.removeEventListener('keydown', escHandler);\n  };\n\n  // Save handler\n  const save = async () => {\n    const addTags = tagsInput.value ? tagsInput.value.split(',').map(t => t.trim()).filter(t => t) : [];\n\n    // Build updates\n    for (const card of selectedCards) {\n      const updates = {};\n\n      // Add tags (merge with existing)\n      if (addTags.length > 0) {\n        const existingTags = card.tags || [];\n        const newTags = [...new Set([...existingTags, ...addTags])]; // Remove duplicates\n        updates.tags = newTags;\n      }\n\n      // Update color (only if not 'none')\n      if (selectedColor !== 'none') {\n        updates.cardColor = selectedColor;\n      }\n\n      // Only update if there are changes\n      if (Object.keys(updates).length > 0) {\n        await updateCard(card.id, updates);\n      }\n    }\n\n    await reloadCanvas();\n    cleanup();\n\n    console.log(`Bulk updated ${selectedCards.length} cards`);\n  };\n\n  // Event listeners\n  saveBtn.addEventListener('click', save);\n  cancelBtn.addEventListener('click', cleanup);\n\n  // Keyboard shortcuts\n  const escHandler = (e) => {\n    if (e.key === 'Escape') {\n      cleanup();\n    }\n  };\n  document.addEventListener('keydown', escHandler);\n\n  tagsInput.addEventListener('keydown', (e) => {\n    if (e.ctrlKey && e.key === 'Enter') {\n      e.preventDefault();\n      save();\n    }\n  });\n\n  // Focus tags input\n  tagsInput.focus();\n}\n\n/**\n * Show touch paste menu (for long-press on empty canvas)\n */\nasync function showTouchPasteMenu(x, y, position) {\n  const menu = document.createElement('div');\n  menu.style.cssText = `\n    position: fixed;\n    left: ${x}px;\n    top: ${y}px;\n    background: var(--bg-primary);\n    color: var(--text-primary);\n    border: 2px solid var(--border-color);\n    border-radius: 12px;\n    padding: 8px;\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n    z-index: 10000;\n    min-width: 200px;\n  `;\n\n  menu.innerHTML = `\n    <div id=\"touchMenuPasteImage\" style=\"padding: 12px; cursor: pointer; border-radius: 8px; font-size: 16px;\">\n       Klistra in bild\n    </div>\n    <div id=\"touchMenuNewCard\" style=\"padding: 12px; cursor: pointer; border-radius: 8px; font-size: 16px;\">\n       Nytt kort\n    </div>\n    <div id=\"touchMenuCancel\" style=\"padding: 12px; cursor: pointer; border-radius: 8px; font-size: 16px; color: var(--text-secondary);\">\n       Avbryt\n    </div>\n  `;\n\n  document.body.appendChild(menu);\n\n  // Add hover effects\n  const items = menu.querySelectorAll('div[id^=\"touchMenu\"]');\n  items.forEach(item => {\n    item.addEventListener('mouseenter', () => {\n      item.style.background = 'var(--bg-secondary)';\n    });\n    item.addEventListener('mouseleave', () => {\n      item.style.background = 'transparent';\n    });\n  });\n\n  const cleanup = () => {\n    if (menu.parentNode) {\n      document.body.removeChild(menu);\n    }\n  };\n\n  // Paste image handler\n  document.getElementById('touchMenuPasteImage').addEventListener('click', async () => {\n    cleanup();\n    await importImage(position);\n  });\n\n  // New card handler\n  document.getElementById('touchMenuNewCard').addEventListener('click', async () => {\n    cleanup();\n    await createNewCard(position);\n  });\n\n  // Cancel handler\n  document.getElementById('touchMenuCancel').addEventListener('click', () => {\n    cleanup();\n  });\n\n  // Close on outside click\n  setTimeout(() => {\n    document.addEventListener('click', cleanup, { once: true });\n  }, 100);\n}\n\n/**\n * Show touch bulk menu (for long-press on selected cards)\n */\nexport async function showTouchBulkMenu(x, y) {\n  const selectedGroups = layer.find('.selected');\n  const selectedIds = selectedGroups.map(g => g.getAttr('cardId')).filter(id => id);\n\n  if (selectedIds.length === 0) return;\n\n  const menu = document.createElement('div');\n  menu.style.cssText = `\n    position: fixed;\n    left: ${x}px;\n    top: ${y}px;\n    background: var(--bg-primary);\n    color: var(--text-primary);\n    border: 2px solid var(--border-color);\n    border-radius: 12px;\n    padding: 8px;\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n    z-index: 10000;\n    min-width: 220px;\n  `;\n\n  menu.innerHTML = `\n    <div style=\"padding: 8px 12px; font-weight: 600; border-bottom: 1px solid var(--border-color); margin-bottom: 4px;\">\n      ${selectedIds.length} kort markerade\n    </div>\n    <div id=\"touchBulkEdit\" style=\"padding: 12px; cursor: pointer; border-radius: 8px; font-size: 16px;\">\n       Redigera alla\n    </div>\n    <div id=\"touchBulkColor\" style=\"padding: 12px; cursor: pointer; border-radius: 8px; font-size: 16px;\">\n       ndra frg\n    </div>\n    <div id=\"touchBulkTag\" style=\"padding: 12px; cursor: pointer; border-radius: 8px; font-size: 16px;\">\n       Lgg till taggar\n    </div>\n    <div id=\"touchBulkCancel\" style=\"padding: 12px; cursor: pointer; border-radius: 8px; font-size: 16px; color: var(--text-secondary); border-top: 1px solid var(--border-color); margin-top: 4px;\">\n       Avbryt\n    </div>\n  `;\n\n  document.body.appendChild(menu);\n\n  // Add hover effects\n  const items = menu.querySelectorAll('div[id^=\"touchBulk\"]');\n  items.forEach(item => {\n    item.addEventListener('mouseenter', () => {\n      item.style.background = 'var(--bg-secondary)';\n    });\n    item.addEventListener('mouseleave', () => {\n      item.style.background = 'transparent';\n    });\n  });\n\n  const cleanup = () => {\n    if (menu.parentNode) {\n      document.body.removeChild(menu);\n    }\n  };\n\n  // Edit all handler\n  document.getElementById('touchBulkEdit').addEventListener('click', async () => {\n    cleanup();\n    await createBulkEditor(selectedIds);\n  });\n\n  // Color picker handler\n  document.getElementById('touchBulkColor').addEventListener('click', async () => {\n    cleanup();\n    await showQuickColorPicker(x, y, selectedIds);\n  });\n\n  // Add tags handler\n  document.getElementById('touchBulkTag').addEventListener('click', async () => {\n    cleanup();\n    await showQuickTagAdder(x, y, selectedIds);\n  });\n\n  // Cancel handler\n  document.getElementById('touchBulkCancel').addEventListener('click', () => {\n    cleanup();\n  });\n\n  // Close on outside click\n  setTimeout(() => {\n    document.addEventListener('click', cleanup, { once: true });\n  }, 100);\n}\n\n/**\n * Quick color picker for bulk operations\n */\nasync function showQuickColorPicker(x, y, cardIds) {\n  const picker = document.createElement('div');\n  picker.style.cssText = `\n    position: fixed;\n    left: ${x}px;\n    top: ${y}px;\n    background: var(--bg-primary);\n    color: var(--text-primary);\n    border: 2px solid var(--border-color);\n    border-radius: 12px;\n    padding: 12px;\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n    z-index: 10001;\n    display: flex;\n    gap: 8px;\n    flex-wrap: wrap;\n    max-width: 200px;\n  `;\n\n  const colors = [\n    { id: '', label: '', title: 'Ingen frg' },\n    { id: 'card-color-1', color: '#d4f2d4', title: 'Grn' },\n    { id: 'card-color-2', color: '#ffe4b3', title: 'Orange' },\n    { id: 'card-color-3', color: '#ffc1cc', title: 'Rd' },\n    { id: 'card-color-4', color: '#fff7b3', title: 'Gul' },\n    { id: 'card-color-5', color: '#f3e5f5', title: 'Lila' },\n    { id: 'card-color-6', color: '#c7e7ff', title: 'Bl' },\n    { id: 'card-color-7', color: '#e0e0e0', title: 'Gr' },\n    { id: 'card-color-8', color: '#ffffff', title: 'Vit' }\n  ];\n\n  colors.forEach(colorInfo => {\n    const dot = document.createElement('div');\n    dot.style.cssText = `\n      width: 40px;\n      height: 40px;\n      border-radius: 50%;\n      background: ${colorInfo.color || 'var(--bg-secondary)'};\n      border: 2px solid var(--border-color);\n      cursor: pointer;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-size: 24px;\n    `;\n    if (!colorInfo.color) {\n      dot.textContent = colorInfo.label;\n    }\n    dot.title = colorInfo.title;\n\n    dot.addEventListener('click', async () => {\n      const cards = await getAllCards();\n      for (const cardId of cardIds) {\n        await updateCard(cardId, { cardColor: colorInfo.id });\n      }\n      await reloadCanvas();\n      cleanup();\n    });\n\n    picker.appendChild(dot);\n  });\n\n  document.body.appendChild(picker);\n\n  const cleanup = () => {\n    if (picker.parentNode) {\n      document.body.removeChild(picker);\n    }\n  };\n\n  setTimeout(() => {\n    document.addEventListener('click', cleanup, { once: true });\n  }, 100);\n}\n\n/**\n * Quick tag adder for bulk operations\n */\nasync function showQuickTagAdder(x, y, cardIds) {\n  const adder = document.createElement('div');\n  adder.style.cssText = `\n    position: fixed;\n    left: ${x}px;\n    top: ${y}px;\n    background: var(--bg-primary);\n    color: var(--text-primary);\n    border: 2px solid var(--border-color);\n    border-radius: 12px;\n    padding: 16px;\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n    z-index: 10001;\n    min-width: 250px;\n  `;\n\n  adder.innerHTML = `\n    <div style=\"margin-bottom: 12px; font-weight: 600;\">Lgg till taggar</div>\n    <input type=\"text\" id=\"quickTagInput\" placeholder=\"t.ex. urgent, projekt\"\n      style=\"width: 100%; padding: 10px; border: 2px solid var(--border-color);\n             border-radius: 8px; background: var(--bg-secondary); color: var(--text-primary);\n             box-sizing: border-box; font-size: 16px; margin-bottom: 12px;\">\n    <div style=\"display: flex; gap: 8px;\">\n      <button id=\"quickTagCancel\" style=\"flex: 1; padding: 10px; background: var(--bg-secondary);\n              color: var(--text-primary); border: 2px solid var(--border-color); border-radius: 8px;\n              cursor: pointer; font-size: 14px;\">Avbryt</button>\n      <button id=\"quickTagSave\" style=\"flex: 1; padding: 10px; background: var(--accent-color);\n              color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 14px;\n              font-weight: 600;\">Lgg till</button>\n    </div>\n  `;\n\n  document.body.appendChild(adder);\n\n  const input = document.getElementById('quickTagInput');\n  const saveBtn = document.getElementById('quickTagSave');\n  const cancelBtn = document.getElementById('quickTagCancel');\n\n  input.focus();\n\n  const cleanup = () => {\n    if (adder.parentNode) {\n      document.body.removeChild(adder);\n    }\n  };\n\n  const save = async () => {\n    const newTags = input.value.split(',').map(t => t.trim()).filter(t => t);\n    if (newTags.length === 0) {\n      cleanup();\n      return;\n    }\n\n    const cards = await getAllCards();\n    for (const cardId of cardIds) {\n      const card = cards.find(c => c.id === cardId);\n      if (card) {\n        const existingTags = card.tags || [];\n        const mergedTags = [...new Set([...existingTags, ...newTags])];\n        await updateCard(cardId, { tags: mergedTags });\n      }\n    }\n\n    await reloadCanvas();\n    cleanup();\n  };\n\n  saveBtn.addEventListener('click', save);\n  cancelBtn.addEventListener('click', cleanup);\n\n  input.addEventListener('keydown', (e) => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      save();\n    } else if (e.key === 'Escape') {\n      cleanup();\n    }\n  });\n}\n\n/**\n * Open edit dialog for card (or bulk edit if multiple selected)\n */\nasync function openEditDialog(cardId) {\n  // Check if multiple cards are selected\n  const selectedGroups = layer.find('.selected');\n\n  if (selectedGroups.length > 1) {\n    // Bulk edit mode\n    const selectedIds = selectedGroups.map(g => g.getAttr('cardId')).filter(id => id);\n    await createBulkEditor(selectedIds);\n  } else {\n    // Single card edit\n    const cards = await getAllCards();\n    const card = cards.find(c => c.id === cardId);\n    if (!card) return;\n\n    const group = cardGroups.get(cardId);\n    if (!group) return;\n\n    if (card.image && card.flipped) {\n      // Flipped image card: inline edit back text\n      createInlineEditor(cardId, group, card.backText || '', true);\n    } else {\n      // Text card: inline edit\n      createInlineEditor(cardId, group, card.text || '', false);\n    }\n  }\n}\n\n// ============================================================================\n// SECTION 4: CARD OPERATIONS (Flip, Delete)\n// ============================================================================\n\n/**\n * Flip image card\n */\nasync function flipCard(cardId) {\n  const cards = await getAllCards();\n  const card = cards.find(c => c.id === cardId);\n\n  if (!card || !card.image) return;\n\n  const newFlipped = !card.flipped;\n\n  pushUndo({\n    type: 'update',\n    cardId,\n    oldData: { flipped: card.flipped },\n    newData: { flipped: newFlipped }\n  });\n\n  await updateCard(cardId, { flipped: newFlipped });\n  await reloadCanvas();\n\n  // If flipping to back side, open editor automatically\n  if (newFlipped) {\n    setTimeout(() => {\n      const group = cardGroups.get(cardId);\n      if (group) {\n        createInlineEditor(cardId, group, card.backText || '', true);\n      }\n    }, 100); // Small delay to let canvas reload\n  }\n}\n\n/**\n * Delete card\n */\nasync function handleDeleteCard(cardId) {\n  // Get card data before deletion (for undo)\n  const cards = await getAllCards();\n  const card = cards.find(c => c.id === cardId);\n\n  if (card) {\n    // Add to undo stack\n    pushUndo({\n      type: 'delete',\n      card: { ...card }\n    });\n  }\n\n  await deleteCard(cardId);\n\n  // Remove from canvas\n  const group = cardGroups.get(cardId);\n  if (group) {\n    group.destroy();\n    cardGroups.delete(cardId);\n    layer.batchDraw();\n  }\n}\n\n// ============================================================================\n// SECTION 5: CANVAS MANAGEMENT (Reload, Undo/Redo)\n// ============================================================================\n\n/**\n * Reload canvas from storage\n */\nasync function reloadCanvas() {\n  // Clear existing cards\n  cardGroups.forEach(group => group.destroy());\n  cardGroups.clear();\n\n  // Reload from storage\n  await loadCards();\n}\n\n/**\n * Undo/redo functions\n */\nfunction pushUndo(action) {\n  undoStack.push(action);\n  if (undoStack.length > MAX_UNDO_STACK) {\n    undoStack.shift();\n  }\n  redoStack = []; // Clear redo stack on new action\n}\n\n// ============================================================================\n// SECTION 6: CLIPBOARD (Copy/Paste/Duplicate)\n// ============================================================================\n\n/**\n * Duplicate/copy selected cards\n */\nasync function duplicateSelectedCards() {\n  const selectedGroups = layer.find('.selected');\n\n  if (selectedGroups.length === 0) {\n    console.log('No cards selected to duplicate');\n    return;\n  }\n\n  const { getCard, createCard } = await import('./storage.js');\n\n  for (const group of selectedGroups) {\n    const cardId = group.getAttr('cardId');\n    if (!cardId) continue;\n\n    // Get original card data\n    const originalCard = await getCard(cardId);\n    if (!originalCard) continue;\n\n    // Create duplicate with offset position\n    const { id, uniqueId, created, modified, metadata, ...cardData } = originalCard;\n\n    const duplicateData = {\n      ...cardData,\n      position: {\n        x: (originalCard.position?.x || 0) + 50,\n        y: (originalCard.position?.y || 0) + 50\n      }\n    };\n\n    // Create with copy metadata\n    await createCard(duplicateData, {\n      copied: true,\n      copiedAt: new Date().toISOString(),\n      copiedFrom: originalCard.uniqueId,\n      originalCardId: cardId\n    });\n  }\n\n  // Reload canvas\n  await reloadCanvas();\n  console.log(`Duplicated ${selectedGroups.length} cards`);\n}\n\n/**\n * Copy selected cards to clipboard\n */\nasync function copySelectedCards() {\n  const selectedGroups = layer.find('.selected');\n\n  if (selectedGroups.length === 0) {\n    console.log('No cards selected to copy');\n    return;\n  }\n\n  const { getCard } = await import('./storage.js');\n\n  clipboard = [];\n\n  for (const group of selectedGroups) {\n    const cardId = group.getAttr('cardId');\n    if (!cardId) continue;\n\n    const card = await getCard(cardId);\n    if (!card) continue;\n\n    // Store card data in clipboard\n    clipboard.push({\n      ...card\n    });\n  }\n\n  console.log(`Copied ${clipboard.length} cards to clipboard`);\n}\n\n/**\n * Paste cards from clipboard\n */\nasync function pasteCards() {\n  if (clipboard.length === 0) {\n    console.log('Clipboard is empty');\n    return;\n  }\n\n  const { createCard } = await import('./storage.js');\n\n  // Get paste position (center of viewport or mouse position)\n  const pointer = stage.getPointerPosition() || {\n    x: stage.width() / 2,\n    y: stage.height() / 2\n  };\n  const scale = stage.scaleX();\n  const pastePosition = {\n    x: (pointer.x - stage.x()) / scale,\n    y: (pointer.y - stage.y()) / scale\n  };\n\n  // Calculate offset from first card's position\n  const firstCard = clipboard[0];\n  const offsetX = pastePosition.x - (firstCard.position?.x || 0);\n  const offsetY = pastePosition.y - (firstCard.position?.y || 0);\n\n  for (const cardData of clipboard) {\n    const { id, uniqueId, created, modified, metadata, ...cleanData } = cardData;\n\n    const pastedData = {\n      ...cleanData,\n      position: {\n        x: (cardData.position?.x || 0) + offsetX,\n        y: (cardData.position?.y || 0) + offsetY\n      }\n    };\n\n    // Create with copy metadata\n    await createCard(pastedData, {\n      copied: true,\n      copiedAt: new Date().toISOString(),\n      copiedFrom: cardData.uniqueId,\n      originalCardId: id\n    });\n  }\n\n  await reloadCanvas();\n  console.log(`Pasted ${clipboard.length} cards`);\n}\n\n/**\n * Paste cards from clipboard and apply arrangement\n */\nasync function pasteCardsWithArrangement(arrangementFunc, arrangementName) {\n  if (clipboard.length === 0) {\n    console.log('Clipboard is empty');\n    return;\n  }\n\n  const { createCard } = await import('./storage.js');\n\n  // Get paste position (center of viewport)\n  const pointer = stage.getPointerPosition() || {\n    x: stage.width() / 2,\n    y: stage.height() / 2\n  };\n  const scale = stage.scaleX();\n  const pastePosition = {\n    x: (pointer.x - stage.x()) / scale,\n    y: (pointer.y - stage.y()) / scale\n  };\n\n  // Create cards first\n  const newCardIds = [];\n  for (const cardData of clipboard) {\n    const { id, uniqueId, created, modified, metadata, ...cleanData } = cardData;\n\n    const pastedData = {\n      ...cleanData,\n      position: pastePosition // Start at paste position\n    };\n\n    // Create with copy metadata\n    const newId = await createCard(pastedData, {\n      copied: true,\n      copiedAt: new Date().toISOString(),\n      copiedFrom: cardData.uniqueId,\n      originalCardId: id\n    });\n\n    newCardIds.push(newId);\n  }\n\n  await reloadCanvas();\n\n  // Select the newly pasted cards\n  layer.find('.selected').forEach(group => {\n    group.removeName('selected');\n    const background = group.findOne('Rect');\n    if (background) {\n      background.stroke(null);\n      background.strokeWidth(0);\n    }\n  });\n\n  newCardIds.forEach(cardId => {\n    const group = cardGroups.get(cardId);\n    if (group) {\n      group.addName('selected');\n      const background = group.findOne('Rect');\n      if (background) {\n        background.stroke('#2196F3');\n        background.strokeWidth(3);\n      }\n    }\n  });\n\n  layer.batchDraw();\n\n  // Apply arrangement to the newly pasted cards\n  await applyArrangement(arrangementFunc, arrangementName);\n\n  console.log(`Pasted and arranged ${clipboard.length} cards using ${arrangementName}`);\n}\n\nasync function undo() {\n  if (undoStack.length === 0) {\n    console.log('Nothing to undo');\n    return;\n  }\n\n  const action = undoStack.pop();\n  redoStack.push(action);\n\n  if (action.type === 'delete') {\n    // Restore deleted card\n    const cardId = await createCard(action.card);\n    await reloadCanvas();\n    console.log('Undo: Restored deleted card');\n  } else if (action.type === 'create') {\n    // Delete created card\n    await deleteCard(action.cardId);\n    await reloadCanvas();\n    console.log('Undo: Deleted created card');\n  } else if (action.type === 'update') {\n    // Restore old values\n    await updateCard(action.cardId, action.oldData);\n    await reloadCanvas();\n    console.log('Undo: Restored old card data');\n  }\n}\n\nasync function redo() {\n  if (redoStack.length === 0) {\n    console.log('Nothing to redo');\n    return;\n  }\n\n  const action = redoStack.pop();\n  undoStack.push(action);\n\n  if (action.type === 'delete') {\n    // Re-delete card\n    await deleteCard(action.card.id);\n    await reloadCanvas();\n    console.log('Redo: Re-deleted card');\n  } else if (action.type === 'create') {\n    // Re-create card\n    const cardId = await createCard(action.card);\n    await reloadCanvas();\n    console.log('Redo: Re-created card');\n  } else if (action.type === 'update') {\n    // Re-apply new values\n    await updateCard(action.cardId, action.newData);\n    await reloadCanvas();\n    console.log('Redo: Re-applied new card data');\n  }\n}\n\n// ============================================================================\n// SECTION 7: SELECTION & INTERACTION (Events, Drag, Pan, Zoom)\n// ============================================================================\n\n/**\n * Update selection based on selection rectangle\n */\nfunction updateSelection() {\n  const selBox = selectionRectangle.getClientRect();\n\n  layer.find('.selected').forEach(group => {\n    const background = group.findOne('Rect');\n    group.removeName('selected');\n    if (background) {\n      background.stroke('#e0e0e0');\n      background.strokeWidth(1);\n    }\n  });\n\n  const groups = layer.getChildren(node => node.getAttr('cardId'));\n  groups.forEach(group => {\n    const groupBox = group.getClientRect();\n\n    // Check if rectangles intersect\n    if (Konva.Util.haveIntersection(selBox, groupBox)) {\n      const background = group.findOne('Rect');\n      group.addName('selected');\n      if (background) {\n        background.stroke('#2196F3');\n        background.strokeWidth(3);\n      }\n    }\n  });\n}\n\n/**\n * Setup canvas events\n */\nfunction setupCanvasEvents() {\n  // Handle window resize\n  window.addEventListener('resize', () => {\n    const container = document.getElementById('canvas-container');\n    if (container && stage) {\n      stage.width(container.clientWidth);\n      stage.height(container.clientHeight);\n    }\n  });\n\n  // Zoom with mouse wheel (faster: 2x speed)\n  stage.on('wheel', (e) => {\n    e.evt.preventDefault();\n\n    const oldScale = stage.scaleX();\n    const pointer = stage.getPointerPosition();\n\n    const mousePointTo = {\n      x: (pointer.x - stage.x()) / oldScale,\n      y: (pointer.y - stage.y()) / oldScale,\n    };\n\n    const scaleBy = 1.1; // Was 1.05, now 1.1 for 2x faster zoom\n    const newScale = e.evt.deltaY < 0 ? oldScale * scaleBy : oldScale / scaleBy;\n\n    // Limit zoom between 0.1x and 5x\n    const clampedScale = Math.max(0.1, Math.min(5, newScale));\n\n    stage.scale({ x: clampedScale, y: clampedScale });\n\n    const newPos = {\n      x: pointer.x - mousePointTo.x * clampedScale,\n      y: pointer.y - mousePointTo.y * clampedScale,\n    };\n\n    stage.position(newPos);\n    stage.batchDraw();\n  });\n\n  // Pan with middle mouse or Ctrl+drag\n  // Selection rectangle with left-click drag on stage\n  stage.on('mousedown', (e) => {\n    // Ctrl+drag or middle mouse = pan\n    if (e.evt.button === 1 || (e.evt.button === 0 && e.evt.ctrlKey)) {\n      isPanning = true;\n      stage.draggable(true);\n      stage.container().style.cursor = 'grabbing';\n      return;\n    }\n\n    // Left click on stage (not on card) = start selection\n    if (e.target === stage && e.evt.button === 0) {\n      isSelecting = true;\n      const pos = stage.getPointerPosition();\n      const scale = stage.scaleX();\n      selectionStartPos = {\n        x: (pos.x - stage.x()) / scale,\n        y: (pos.y - stage.y()) / scale\n      };\n      selectionRectangle.width(0);\n      selectionRectangle.height(0);\n      selectionRectangle.visible(true);\n    }\n  });\n\n  stage.on('mousemove', () => {\n    if (!isSelecting) return;\n\n    const pos = stage.getPointerPosition();\n    const scale = stage.scaleX();\n    const currentPos = {\n      x: (pos.x - stage.x()) / scale,\n      y: (pos.y - stage.y()) / scale\n    };\n\n    const x = Math.min(selectionStartPos.x, currentPos.x);\n    const y = Math.min(selectionStartPos.y, currentPos.y);\n    const width = Math.abs(currentPos.x - selectionStartPos.x);\n    const height = Math.abs(currentPos.y - selectionStartPos.y);\n\n    selectionRectangle.setAttrs({\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    });\n\n    // Update selection\n    updateSelection();\n    layer.batchDraw();\n  });\n\n  stage.on('mouseup', () => {\n    if (isPanning) {\n      isPanning = false;\n      stage.draggable(false);\n      stage.container().style.cursor = 'default';\n    }\n\n    if (isSelecting) {\n      isSelecting = false;\n      selectionRectangle.visible(false);\n      layer.batchDraw();\n    }\n  });\n\n  // Save card position when dragged\n  stage.on('dragend', (e) => {\n    const target = e.target;\n    if (target.getAttr('cardId')) {\n      const cardId = target.getAttr('cardId');\n      const position = { x: target.x(), y: target.y() };\n\n      updateCard(cardId, { position });\n    }\n  });\n\n  // Double-click to edit card or flip image card\n  stage.on('dblclick dbltap', async (e) => {\n    const target = e.target;\n    if (target.parent && target.parent.getAttr('cardId')) {\n      const cardId = target.parent.getAttr('cardId');\n\n      // Get card data to check if it's an image card\n      const cards = await getAllCards();\n      const card = cards.find(c => c.id === cardId);\n\n      if (!card) return;\n\n      if (card.image) {\n        // Image card: always flip on double-click (toggle)\n        await flipCard(cardId);\n      } else {\n        // Text card: open edit dialog\n        openEditDialog(cardId);\n      }\n    } else if (target === stage) {\n      // Double-click on canvas to create new card\n      const pointer = stage.getPointerPosition();\n      const scale = stage.scaleX();\n      const position = {\n        x: (pointer.x - stage.x()) / scale,\n        y: (pointer.y - stage.y()) / scale\n      };\n      createNewCard(position);\n    }\n  });\n\n  // Touch long-press on empty canvas to paste image\n  let stageTouchTimer = null;\n  let stageTouchStart = null;\n  let lastCenter = null;\n  let lastDist = 0;\n\n  function getDistance(p1, p2) {\n    return Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2));\n  }\n\n  function getCenter(p1, p2) {\n    return {\n      x: (p1.x + p2.x) / 2,\n      y: (p1.y + p2.y) / 2\n    };\n  }\n\n  stage.on('touchstart', (e) => {\n    const touch1 = e.evt.touches[0];\n    const touch2 = e.evt.touches[1];\n\n    if (touch1 && touch2) {\n      // Two fingers - prepare for pinch/pan\n      e.evt.preventDefault();\n      lastCenter = getCenter(\n        { x: touch1.clientX, y: touch1.clientY },\n        { x: touch2.clientX, y: touch2.clientY }\n      );\n      lastDist = getDistance(\n        { x: touch1.clientX, y: touch1.clientY },\n        { x: touch2.clientX, y: touch2.clientY }\n      );\n      return;\n    }\n\n    if (e.target !== stage) return; // Only on empty canvas\n\n    stageTouchStart = Date.now();\n\n    stageTouchTimer = setTimeout(async () => {\n      // Long press on empty canvas\n      const pointer = stage.getPointerPosition();\n      const scale = stage.scaleX();\n      const position = {\n        x: (pointer.x - stage.x()) / scale,\n        y: (pointer.y - stage.y()) / scale\n      };\n\n      // Show paste menu\n      await showTouchPasteMenu(e.evt.touches ? e.evt.touches[0].clientX : e.evt.clientX,\n                               e.evt.touches ? e.evt.touches[0].clientY : e.evt.clientY,\n                               position);\n      stageTouchTimer = null;\n    }, 600); // 600ms long press\n  });\n\n  stage.on('touchmove', (e) => {\n    const touch1 = e.evt.touches[0];\n    const touch2 = e.evt.touches[1];\n\n    if (touch1 && touch2) {\n      // Two fingers - pinch to zoom and pan\n      e.evt.preventDefault();\n\n      if (stageTouchTimer) {\n        clearTimeout(stageTouchTimer);\n        stageTouchTimer = null;\n      }\n\n      const newCenter = getCenter(\n        { x: touch1.clientX, y: touch1.clientY },\n        { x: touch2.clientX, y: touch2.clientY }\n      );\n      const newDist = getDistance(\n        { x: touch1.clientX, y: touch1.clientY },\n        { x: touch2.clientX, y: touch2.clientY }\n      );\n\n      const oldScale = stage.scaleX();\n      const pointTo = {\n        x: (newCenter.x - stage.x()) / oldScale,\n        y: (newCenter.y - stage.y()) / oldScale\n      };\n\n      // Zoom\n      const scale = Math.max(0.1, Math.min(5, oldScale * (newDist / lastDist)));\n      stage.scale({ x: scale, y: scale });\n\n      // Pan\n      const dx = newCenter.x - lastCenter.x;\n      const dy = newCenter.y - lastCenter.y;\n      const newPos = {\n        x: newCenter.x - pointTo.x * scale + dx,\n        y: newCenter.y - pointTo.y * scale + dy\n      };\n\n      stage.position(newPos);\n      stage.batchDraw();\n\n      lastDist = newDist;\n      lastCenter = newCenter;\n      return;\n    }\n\n    if (stageTouchTimer && e.target === stage) {\n      clearTimeout(stageTouchTimer);\n      stageTouchTimer = null;\n    }\n  });\n\n  stage.on('touchend touchcancel', (e) => {\n    if (stageTouchTimer) {\n      clearTimeout(stageTouchTimer);\n      stageTouchTimer = null;\n    }\n    lastCenter = null;\n    lastDist = 0;\n  });\n\n  // Track if 'g' key is currently held down for simultaneous combos\n  let gKeyHeld = false;\n\n  // Global keyboard shortcuts\n  window.addEventListener('keydown', async (e) => {\n    // Ignore if typing in input/textarea\n    if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {\n      return;\n    }\n\n    // Ctrl+Z - Undo\n    if (e.ctrlKey && e.key === 'z') {\n      e.preventDefault();\n      await undo();\n      return;\n    }\n\n    // Ctrl+Y - Redo\n    if (e.ctrlKey && e.key === 'y') {\n      e.preventDefault();\n      await redo();\n      return;\n    }\n\n    // Ctrl+C - Copy selected cards\n    if (e.ctrlKey && e.key === 'c') {\n      e.preventDefault();\n      await copySelectedCards();\n      return;\n    }\n\n    // Ctrl+V - Paste copied cards\n    if (e.ctrlKey && e.key === 'v') {\n      e.preventDefault();\n      await pasteCards();\n      return;\n    }\n\n    // Ctrl+A - Select all cards\n    if (e.ctrlKey && e.key === 'a') {\n      e.preventDefault();\n      const allCards = layer.getChildren(node => node.getAttr('cardId'));\n      allCards.forEach(group => {\n        const background = group.findOne('Rect');\n        group.addName('selected');\n        if (background) {\n          background.stroke('#2196F3');\n          background.strokeWidth(3);\n        }\n      });\n      layer.batchDraw();\n      return;\n    }\n\n    // S - Save (export)\n    if (e.key === 's' && !e.ctrlKey) {\n      e.preventDefault();\n      await exportCanvas();\n      console.log('Canvas exported');\n      return;\n    }\n\n    // L - Load (import JSON)\n    if (e.key === 'l' && !e.ctrlKey) {\n      e.preventDefault();\n      await importCanvas();\n      console.log('Canvas import initiated');\n      return;\n    }\n\n    // B - Backup (download zip with all cards and images)\n    if (e.key === 'b' && !e.ctrlKey) {\n      e.preventDefault();\n      const downloadBtn = document.getElementById('btn-download');\n      if (downloadBtn) {\n        downloadBtn.click();\n        console.log('Backup download initiated');\n      }\n      return;\n    }\n\n    // K - Toggle view\n    if (e.key === 'k') {\n      e.preventDefault();\n      toggleViewFromMenu();\n      return;\n    }\n\n    // N - New text card\n    if (e.key === 'n') {\n      e.preventDefault();\n      const pointer = stage.getPointerPosition() || { x: stage.width() / 2, y: stage.height() / 2 };\n      const scale = stage.scaleX();\n      const position = {\n        x: (pointer.x - stage.x()) / scale,\n        y: (pointer.y - stage.y()) / scale\n      };\n      await createNewCard(position);\n      return;\n    }\n\n    // I - Import image\n    if (e.key === 'i') {\n      e.preventDefault();\n      await importImage();\n      return;\n    }\n\n    // F - Focus search\n    if (e.key === 'f') {\n      e.preventDefault();\n      const searchInput = document.getElementById('search-input');\n      if (searchInput) {\n        searchInput.focus();\n        searchInput.select();\n      }\n      return;\n    }\n\n    // Space - Command palette\n    if (e.key === ' ') {\n      e.preventDefault();\n      showCommandPalette();\n      return;\n    }\n\n    // V - Vertical arrangement (or G+V if 'g' is held)\n    if (e.key === 'v' && !e.ctrlKey) {\n      e.preventDefault();\n      if (gKeyHeld) {\n        // G+V = Grid Vertical\n        console.log('G+V pressed (simultaneous)');\n        if (clipboard.length > 0) {\n          await pasteCardsWithArrangement(arrangeGridVertical, 'Grid Vertical');\n        } else {\n          await applyArrangement(arrangeGridVertical, 'Grid Vertical');\n        }\n      } else {\n        // V alone = Vertical\n        console.log('V pressed');\n        await applyArrangement(arrangeVertical, 'Vertical');\n      }\n      return;\n    }\n\n    // H - Horizontal arrangement (or G+H if 'g' is held)\n    if (e.key === 'h' && !e.ctrlKey) {\n      e.preventDefault();\n      if (gKeyHeld) {\n        // G+H = Grid Horizontal\n        console.log('G+H pressed (simultaneous)');\n        await applyArrangement(arrangeGridHorizontal, 'Grid Horizontal');\n      } else {\n        // H alone = Horizontal\n        console.log('H pressed');\n        await applyArrangement(arrangeHorizontal, 'Horizontal');\n      }\n      return;\n    }\n\n    // T - Grid Top-Aligned (only when G is held)\n    if (e.key === 't' && !e.ctrlKey && gKeyHeld) {\n      e.preventDefault();\n      console.log('G+T pressed (simultaneous)');\n      await applyArrangement(arrangeGridTopAligned, 'Grid Top-Aligned');\n      return;\n    }\n\n    // G - Set flag for combos (G+V, G+H, G+T)\n    if (e.key === 'g' && !e.ctrlKey) {\n      e.preventDefault();\n      gKeyHeld = true;\n      console.log('G pressed (waiting for combo)');\n      return;\n    }\n\n    // Q - Paste and arrange in cluster (if clipboard has cards), otherwise arrange selected\n    if (e.key === 'q' && !e.ctrlKey) {\n      e.preventDefault();\n      if (clipboard.length > 0) {\n        await pasteCardsWithArrangement(arrangeCluster, 'Cluster');\n      } else {\n        await applyArrangement(arrangeCluster, 'Cluster');\n      }\n      return;\n    }\n\n    // P - Toggle pin/unpin selected cards\n    if (e.key === 'p' && !e.ctrlKey) {\n      e.preventDefault();\n      await togglePinSelectedCards();\n      return;\n    }\n\n    // Delete/Backspace - Delete selected cards\n    if (e.key === 'Delete' || e.key === 'Backspace') {\n      e.preventDefault();\n      const selectedNodes = layer.find('.selected');\n      for (const node of selectedNodes) {\n        if (node.getAttr('cardId')) {\n          const cardId = node.getAttr('cardId');\n          await handleDeleteCard(cardId);\n        }\n      }\n      return;\n    }\n  });\n\n  // Reset gKeyHeld flag when 'g' is released\n  window.addEventListener('keyup', (e) => {\n    if (e.key === 'g') {\n      gKeyHeld = false;\n      console.log('G released');\n    }\n  });\n}\n\n// ============================================================================\n// SECTION 8: PUBLIC API (Exported Functions)\n// ============================================================================\n\n/**\n * Get stage instance\n */\nexport function getStage() {\n  return stage;\n}\n\n/**\n * Get main layer\n */\nexport function getLayer() {\n  return layer;\n}\n\n/**\n * Add new card (exported for external use)\n */\nexport async function addNewCard() {\n  const pointer = stage.getPointerPosition() || { x: stage.width() / 2, y: stage.height() / 2 };\n  const scale = stage.scaleX();\n  const position = {\n    x: (pointer.x - stage.x()) / scale,\n    y: (pointer.y - stage.y()) / scale\n  };\n\n  await createNewCard(position);\n}\n\n/**\n * Export canvas state as JSON\n */\nexport async function exportCanvas() {\n  const cards = await getAllCards();\n  const exportData = {\n    type: 'full',\n    version: '1.0',\n    exportedAt: Date.now(),\n    cards,\n    viewport: {\n      x: stage.x(),\n      y: stage.y(),\n      scale: stage.scaleX()\n    }\n  };\n\n  const json = JSON.stringify(exportData, null, 2);\n  const blob = new Blob([json], { type: 'application/json' });\n  const url = URL.createObjectURL(blob);\n\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = `spatial-view-${Date.now()}.json`;\n  a.click();\n\n  URL.revokeObjectURL(url);\n}\n\n/**\n * Import canvas from JSON file\n */\nexport async function importCanvas() {\n  return new Promise((resolve, reject) => {\n    const input = document.createElement('input');\n    input.type = 'file';\n    input.accept = 'application/json,.json';\n\n    input.onchange = async (e) => {\n      const file = e.target.files[0];\n      if (!file) {\n        resolve(null);\n        return;\n      }\n\n      try {\n        const text = await file.text();\n        const data = JSON.parse(text);\n\n        // Import cards\n        const { createCard } = await import('./storage.js');\n\n        if (data.cards && Array.isArray(data.cards)) {\n          for (let i = 0; i < data.cards.length; i++) {\n            const card = data.cards[i];\n            // Create each card in storage (without the id to avoid conflicts)\n            const { id, ...cardWithoutId } = card;\n\n            // Add import metadata\n            await createCard(cardWithoutId, {\n              imported: true,\n              importedAt: new Date().toISOString(),\n              importedFrom: file.name,\n              importBatchIndex: i\n            });\n          }\n\n          // Reload canvas to show imported cards\n          await reloadCanvas();\n\n          // Restore viewport if available\n          if (data.viewport) {\n            stage.position({ x: data.viewport.x, y: data.viewport.y });\n            stage.scale({ x: data.viewport.scale, y: data.viewport.scale });\n            stage.batchDraw();\n          }\n\n          console.log(`Imported ${data.cards.length} cards`);\n          alert(`Importerade ${data.cards.length} kort!`);\n          resolve(data.cards.length);\n        } else {\n          throw new Error('Invalid JSON format');\n        }\n      } catch (error) {\n        console.error('Import failed:', error);\n        alert('Misslyckades att importera fil: ' + error.message);\n        reject(error);\n      }\n    };\n\n    input.click();\n  });\n}\n\n/**\n * Import image and create card\n */\nexport async function importImage() {\n  return new Promise((resolve, reject) => {\n    // Create file input\n    const input = document.createElement('input');\n    input.type = 'file';\n    input.accept = 'image/*';\n    input.multiple = true;\n\n    // Check if mobile device for camera option\n    const isMobile = /mobile|android|iphone|ipad|ipod/i.test(navigator.userAgent);\n    if (isMobile) {\n      input.capture = 'environment'; // Use rear camera\n    }\n\n    input.onchange = async (e) => {\n      const files = Array.from(e.target.files);\n      if (files.length === 0) {\n        resolve([]);\n        return;\n      }\n\n      // Show quality selector dialog AFTER files are chosen\n      const quality = await showQualityDialog(files.length);\n      if (!quality) {\n        resolve([]);\n        return;\n      }\n\n      try {\n        const cardIds = [];\n\n        for (const file of files) {\n          // Process image\n          const processed = await processImage(file, quality);\n\n          // Calculate position (stagger multiple images)\n          const pointer = stage.getPointerPosition() || { x: stage.width() / 2, y: stage.height() / 2 };\n          const scale = stage.scaleX();\n          const offset = cardIds.length * 50; // Stagger by 50px\n          const position = {\n            x: ((pointer.x - stage.x()) / scale) + offset,\n            y: ((pointer.y - stage.y()) / scale) + offset\n          };\n\n          // Create card with image\n          const cardId = await createCard({\n            text: processed.metadata.fileName,\n            tags: ['bild'],\n            position,\n            image: {\n              base64: processed.base64,\n              width: processed.metadata.width,\n              height: processed.metadata.height,\n              quality: processed.metadata.quality\n            },\n            metadata: processed.metadata\n          });\n\n          cardIds.push(cardId);\n        }\n\n        // Reload canvas to show new cards\n        await reloadCanvas();\n\n        resolve(cardIds);\n      } catch (error) {\n        console.error('Image import failed:', error);\n        reject(error);\n      }\n    };\n\n    input.click();\n  });\n}\n\n// ============================================================================\n// SECTION 9: UI DIALOGS (Command Palette, Quality Dialog, Text Input)\n// ============================================================================\n\n/**\n * Show command palette\n */\nfunction showCommandPalette() {\n  const commands = [\n    { key: 'N', icon: '', name: 'Nytt text-kort', desc: 'Skapa nytt text-kort vid muspekare', action: async () => {\n      const pointer = stage.getPointerPosition() || { x: stage.width() / 2, y: stage.height() / 2 };\n      const scale = stage.scaleX();\n      const position = {\n        x: (pointer.x - stage.x()) / scale,\n        y: (pointer.y - stage.y()) / scale\n      };\n      await createNewCard(position);\n    }},\n    { key: 'I', icon: '', name: 'Importera bild', desc: 'ppna filvljare fr att importera bilder', action: async () => {\n      await importImage();\n    }},\n    { key: 'F', icon: '', name: 'Sk kort', desc: 'Fokusera skfltet', action: () => {\n      const searchInput = document.getElementById('search-input');\n      if (searchInput) {\n        searchInput.focus();\n        searchInput.select();\n      }\n    }},\n    { key: 'S', icon: '', name: 'Exportera', desc: 'Exportera canvas till JSON-fil', action: async () => {\n      await exportCanvas();\n    }},\n    { key: 'L', icon: '', name: 'Importera JSON', desc: 'Importera kort frn JSON-fil', action: async () => {\n      await importCanvas();\n    }},\n    { key: 'B', icon: '', name: 'Ladda ner backup', desc: 'Ladda ner alla kort och bilder som zip-fil', action: async () => {\n      // Trigger download from main.js\n      const downloadBtn = document.getElementById('btn-download');\n      if (downloadBtn) {\n        downloadBtn.click();\n      }\n    }},\n    { key: 'Delete', icon: '', name: 'Ta bort kort', desc: 'Ta bort markerade kort', action: async () => {\n      const selectedNodes = layer.find('.selected');\n      for (const node of selectedNodes) {\n        if (node.getAttr('cardId')) {\n          const cardId = node.getAttr('cardId');\n          await handleDeleteCard(cardId);\n        }\n      }\n    }},\n    { key: 'Ctrl+Z', icon: '', name: 'ngra', desc: 'ngra senaste ndring', action: async () => {\n      await undo();\n    }},\n    { key: 'Ctrl+Y', icon: '', name: 'Gr om', desc: 'Gr om ngrad ndring', action: async () => {\n      await redo();\n    }},\n    { key: 'Ctrl+C', icon: '', name: 'Kopiera kort', desc: 'Kopiera markerade kort till clipboard', action: async () => {\n      await copySelectedCards();\n    }},\n    { key: 'Ctrl+V', icon: '', name: 'Klistra in kort', desc: 'Klistra in kopierade kort', action: async () => {\n      await pasteCards();\n    }},\n    { key: 'P', icon: '', name: 'Pinna/Avpinna kort', desc: 'Pinna eller avpinna markerade kort (kan inte flyttas)', action: async () => {\n      await togglePinSelectedCards();\n    }},\n    { key: 'V', icon: '', name: 'Arrangera vertikalt', desc: 'Arrangera markerade kort i vertikal kolumn', action: async () => {\n      await applyArrangement(arrangeVertical, 'Vertical');\n    }},\n    { key: 'H', icon: '', name: 'Arrangera horisontellt', desc: 'Arrangera markerade kort i horisontell rad', action: async () => {\n      await applyArrangement(arrangeHorizontal, 'Horizontal');\n    }},\n    { key: 'Q', icon: '', name: 'Arrangera cirkel', desc: 'Klistra in och arrangera i cirkel (om kopierade kort), annars arrangera markerade', action: async () => {\n      if (clipboard.length > 0) {\n        await pasteCardsWithArrangement(arrangeCluster, 'Cluster');\n      } else {\n        await applyArrangement(arrangeCluster, 'Cluster');\n      }\n    }},\n    { key: 'G+V', icon: '', name: 'Arrangera grid vertikalt', desc: 'Klistra in och arrangera vertikalt (om kopierade kort), annars arrangera markerade', action: async () => {\n      if (clipboard.length > 0) {\n        await pasteCardsWithArrangement(arrangeGridVertical, 'Grid Vertical');\n      } else {\n        await applyArrangement(arrangeGridVertical, 'Grid Vertical');\n      }\n    }},\n    { key: 'G+H', icon: '', name: 'Arrangera grid horisontellt', desc: 'Arrangera markerade kort i horisontella rader', action: async () => {\n      await applyArrangement(arrangeGridHorizontal, 'Grid Horizontal');\n    }},\n    { key: 'G+T', icon: '', name: 'Arrangera grid verlappande', desc: 'Arrangera markerade kort verlappande (Kanban-stil)', action: async () => {\n      await applyArrangement(arrangeGridTopAligned, 'Grid Top-Aligned');\n    }},\n    { key: '-', icon: '', name: 'Byt tema', desc: 'Vxla mellan ljust/mrkt/e-ink tema', action: () => {\n      window.dispatchEvent(new CustomEvent('toggleTheme'));\n    }},\n    { key: '-', icon: '', name: 'Byt vy', desc: 'Vxla mellan brd-vy och kolumn-vy', action: () => {\n      window.dispatchEvent(new CustomEvent('toggleView'));\n    }},\n    { key: 'Ctrl+A', icon: '', name: 'Markera alla', desc: 'Markera alla kort p canvas', action: null },\n    { key: 'Scroll', icon: '', name: 'Zooma', desc: 'Zooma in/ut med mushjulet', action: null },\n    { key: 'Ctrl+Drag', icon: '', name: 'Panorera', desc: 'Panorera canvas genom att hlla Ctrl och dra', action: null },\n    { key: 'Double-click', icon: '', name: 'Redigera kort', desc: 'Dubbelklicka p kort fr att redigera', action: null },\n    { key: 'Right-click', icon: '', name: 'Kontextmeny', desc: 'Hgerklicka p kort fr meny', action: null },\n    { key: 'Drag', icon: '', name: 'Flytta kort', desc: 'Dra kort fr att flytta dem', action: null },\n  ];\n\n  // Create modal overlay\n  const overlay = document.createElement('div');\n  overlay.style.cssText = `\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.7);\n    display: flex;\n    align-items: flex-start;\n    justify-content: center;\n    z-index: 10000;\n    padding-top: 80px;\n    overflow-y: auto;\n  `;\n\n  // Create command palette\n  const palette = document.createElement('div');\n  palette.style.cssText = `\n    background: white;\n    border-radius: 12px;\n    padding: 24px;\n    max-width: 600px;\n    width: 90%;\n    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n    max-height: 80vh;\n    overflow-y: auto;\n  `;\n\n  // Function to render command list\n  const renderCommands = (filteredCommands) => {\n    const commandList = palette.querySelector('#command-list');\n    commandList.innerHTML = filteredCommands.map((cmd, idx) => `\n      <div class=\"command-item\" data-original-index=\"${cmd.originalIndex}\" style=\"\n        padding: 16px;\n        background: ${cmd.action ? '#f5f5f5' : '#fafafa'};\n        border-radius: 8px;\n        cursor: ${cmd.action ? 'pointer' : 'default'};\n        transition: all 0.15s;\n        border: 2px solid transparent;\n        display: flex;\n        align-items: center;\n        gap: 16px;\n      \">\n        <div style=\"font-size: 24px; flex-shrink: 0;\">\n          ${cmd.icon}\n        </div>\n        <div style=\"flex: 1; min-width: 0;\">\n          <div style=\"font-weight: 600; font-size: 16px; color: #1a1a1a; margin-bottom: 2px;\">\n            ${cmd.name}\n          </div>\n          <div style=\"font-size: 13px; color: #666;\">\n            ${cmd.desc}\n          </div>\n        </div>\n        <div style=\"\n          background: white;\n          padding: 6px 12px;\n          border-radius: 6px;\n          font-size: 12px;\n          font-weight: 600;\n          color: #666;\n          font-family: monospace;\n          white-space: nowrap;\n          flex-shrink: 0;\n        \">\n          ${cmd.key}\n        </div>\n      </div>\n    `).join('');\n\n    // Add hover and click effects\n    const commandItems = commandList.querySelectorAll('.command-item');\n    commandItems.forEach((item) => {\n      const originalIdx = parseInt(item.dataset.originalIndex);\n      const cmd = commands[originalIdx];\n\n      if (cmd.action) {\n        item.addEventListener('mouseenter', () => {\n          item.style.background = '#e3f2fd';\n          item.style.borderColor = '#2196F3';\n          item.style.transform = 'scale(1.01)';\n        });\n\n        item.addEventListener('mouseleave', () => {\n          item.style.background = '#f5f5f5';\n          item.style.borderColor = 'transparent';\n          item.style.transform = 'scale(1)';\n        });\n\n        item.addEventListener('click', async () => {\n          cleanup();\n          await cmd.action();\n        });\n      }\n    });\n  };\n\n  palette.innerHTML = `\n    <div style=\"display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;\">\n      <h2 style=\"margin: 0; font-size: 24px; color: #1a1a1a;\">\n         Command Palette\n      </h2>\n      <span style=\"color: #999; font-size: 14px;\">Tryck ESC fr att stnga</span>\n    </div>\n\n    <input\n      type=\"text\"\n      id=\"command-search\"\n      placeholder=\"Sk kommandon...\"\n      style=\"\n        width: 100%;\n        padding: 12px 16px;\n        border: 2px solid #e0e0e0;\n        border-radius: 8px;\n        font-size: 16px;\n        margin-bottom: 16px;\n        outline: none;\n        transition: border-color 0.15s;\n      \"\n    />\n\n    <div id=\"command-list\" style=\"display: flex; flex-direction: column; gap: 8px;\">\n    </div>\n  `;\n\n  overlay.appendChild(palette);\n  document.body.appendChild(overlay);\n\n  // Add commands with original index for tracking\n  const commandsWithIndex = commands.map((cmd, idx) => ({ ...cmd, originalIndex: idx }));\n\n  // Initial render with all commands\n  renderCommands(commandsWithIndex);\n\n  // Add search functionality\n  const searchInput = palette.querySelector('#command-search');\n  searchInput.addEventListener('input', (e) => {\n    const query = e.target.value.toLowerCase().trim();\n\n    if (!query) {\n      renderCommands(commandsWithIndex);\n      return;\n    }\n\n    const filtered = commandsWithIndex.filter(cmd =>\n      cmd.name.toLowerCase().includes(query) ||\n      cmd.desc.toLowerCase().includes(query) ||\n      cmd.key.toLowerCase().includes(query)\n    );\n\n    renderCommands(filtered);\n  });\n\n  // Focus search input\n  searchInput.focus();\n\n  // Handle focus on border\n  searchInput.addEventListener('focus', () => {\n    searchInput.style.borderColor = '#2196F3';\n  });\n  searchInput.addEventListener('blur', () => {\n    searchInput.style.borderColor = '#e0e0e0';\n  });\n\n  // Cleanup function\n  const cleanup = () => {\n    document.body.removeChild(overlay);\n  };\n\n  // ESC to close\n  const handleEsc = (e) => {\n    if (e.key === 'Escape') {\n      cleanup();\n      document.removeEventListener('keydown', handleEsc);\n    }\n  };\n  document.addEventListener('keydown', handleEsc);\n\n  // Click overlay to close\n  overlay.addEventListener('click', (e) => {\n    if (e.target === overlay) {\n      cleanup();\n      document.removeEventListener('keydown', handleEsc);\n    }\n  });\n}\n\n/**\n * Show quality selector dialog\n */\nfunction showQualityDialog(fileCount) {\n  return new Promise((resolve) => {\n    // Create modal overlay\n    const overlay = document.createElement('div');\n    overlay.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.5);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 10000;\n    `;\n\n    // Create dialog\n    const dialog = document.createElement('div');\n    dialog.style.cssText = `\n      background: white;\n      border-radius: 12px;\n      padding: 32px;\n      max-width: 500px;\n      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n    `;\n\n    dialog.innerHTML = `\n      <h2 style=\"margin: 0 0 16px 0; font-size: 24px; color: #1a1a1a;\">\n        Vlj kvalitet\n      </h2>\n      <p style=\"margin: 0 0 24px 0; color: #666; font-size: 16px;\">\n        ${fileCount} ${fileCount === 1 ? 'bild vald' : 'bilder valda'}\n      </p>\n\n      <div style=\"display: flex; flex-direction: column; gap: 12px;\">\n        <button id=\"quality-normal\" style=\"\n          padding: 20px;\n          background: #2196F3;\n          color: white;\n          border: none;\n          border-radius: 8px;\n          font-size: 16px;\n          font-weight: 600;\n          cursor: pointer;\n          text-align: left;\n          transition: transform 0.1s;\n        \">\n          <div style=\"font-size: 18px; margin-bottom: 4px;\"> Rimlig fr stor skrm</div>\n          <div style=\"font-size: 14px; opacity: 0.9;\">1200px, hg kvalitet (rekommenderad)</div>\n        </button>\n\n        <button id=\"quality-low\" style=\"\n          padding: 20px;\n          background: #4CAF50;\n          color: white;\n          border: none;\n          border-radius: 8px;\n          font-size: 16px;\n          font-weight: 600;\n          cursor: pointer;\n          text-align: left;\n          transition: transform 0.1s;\n        \">\n          <div style=\"font-size: 18px; margin-bottom: 4px;\"> Anpassad fr anteckningar</div>\n          <div style=\"font-size: 14px; opacity: 0.9;\">700px, optimerad fr vit bakgrund</div>\n        </button>\n\n        <button id=\"quality-cancel\" style=\"\n          padding: 12px;\n          background: transparent;\n          color: #666;\n          border: none;\n          border-radius: 8px;\n          font-size: 14px;\n          cursor: pointer;\n        \">\n          Avbryt\n        </button>\n      </div>\n    `;\n\n    overlay.appendChild(dialog);\n    document.body.appendChild(overlay);\n\n    // Add hover effects\n    const buttons = dialog.querySelectorAll('button[id^=\"quality-\"]');\n    buttons.forEach(btn => {\n      if (btn.id !== 'quality-cancel') {\n        btn.addEventListener('mouseenter', () => {\n          btn.style.transform = 'scale(1.02)';\n        });\n        btn.addEventListener('mouseleave', () => {\n          btn.style.transform = 'scale(1)';\n        });\n      }\n    });\n\n    // Handle button clicks\n    const cleanup = (quality) => {\n      document.body.removeChild(overlay);\n      resolve(quality);\n    };\n\n    dialog.querySelector('#quality-normal').addEventListener('click', () => cleanup('normal'));\n    dialog.querySelector('#quality-low').addEventListener('click', () => cleanup('low'));\n    dialog.querySelector('#quality-cancel').addEventListener('click', () => cleanup(null));\n\n    // ESC to cancel\n    const handleEsc = (e) => {\n      if (e.key === 'Escape') {\n        cleanup(null);\n        document.removeEventListener('keydown', handleEsc);\n      }\n    };\n    document.addEventListener('keydown', handleEsc);\n  });\n}\n\n/**\n * Setup drag-and-drop for images\n */\nexport function setupImageDragDrop() {\n  const container = stage.container();\n\n  // Prevent default drag behavior\n  container.addEventListener('dragover', (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    container.style.border = '3px dashed #2196F3';\n  });\n\n  container.addEventListener('dragleave', (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    container.style.border = 'none';\n  });\n\n  // Handle drop\n  container.addEventListener('drop', async (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    container.style.border = 'none';\n\n    const files = Array.from(e.dataTransfer.files).filter(f => f.type.startsWith('image/'));\n\n    if (files.length === 0) return;\n\n    try {\n      // Show quality selector dialog\n      const quality = await showQualityDialog(files.length);\n      if (!quality) return;\n\n      for (const file of files) {\n        const processed = await processImage(file, quality);\n\n        // Get drop position\n        const pointer = stage.getPointerPosition();\n        const scale = stage.scaleX();\n        const position = {\n          x: (pointer.x - stage.x()) / scale,\n          y: (pointer.y - stage.y()) / scale\n        };\n\n        await createCard({\n          text: processed.metadata.fileName,\n          tags: ['bild'],\n          position,\n          image: {\n            base64: processed.base64,\n            width: processed.metadata.width,\n            height: processed.metadata.height,\n            quality: processed.metadata.quality\n          },\n          metadata: processed.metadata\n        });\n      }\n\n      await reloadCanvas();\n    } catch (error) {\n      console.error('Drag-drop import failed:', error);\n      alert('Misslyckades att importera bild: ' + error.message);\n    }\n  });\n\n  console.log('Drag-and-drop enabled for images');\n}\n\n/**\n * Fit all cards in view\n */\nexport function fitAllCards() {\n  // ALWAYS fit ALL cards (like v2's cy.fit(null, 50))\n  const cards = layer.getChildren().filter(node => node.getAttr('cardId'));\n\n  if (cards.length === 0) {\n    console.log('No cards to fit');\n    return;\n  }\n\n  // Calculate bounding box for all cards\n  let minX = Infinity;\n  let minY = Infinity;\n  let maxX = -Infinity;\n  let maxY = -Infinity;\n\n  cards.forEach(card => {\n    const box = card.getClientRect();\n    minX = Math.min(minX, box.x);\n    minY = Math.min(minY, box.y);\n    maxX = Math.max(maxX, box.x + box.width);\n    maxY = Math.max(maxY, box.y + box.height);\n  });\n\n  const contentWidth = maxX - minX;\n  const contentHeight = maxY - minY;\n\n  // Add fixed padding (50px like v2)\n  const padding = 50;\n  const paddedWidth = contentWidth + padding * 2;\n  const paddedHeight = contentHeight + padding * 2;\n\n  // Calculate scale to fit\n  const scaleX = stage.width() / paddedWidth;\n  const scaleY = stage.height() / paddedHeight;\n  const scale = Math.min(scaleX, scaleY, 1); // Don't zoom in beyond 1x\n\n  // Calculate center of content\n  const contentCenterX = minX + contentWidth / 2;\n  const contentCenterY = minY + contentHeight / 2;\n\n  // Set new scale\n  stage.scale({ x: scale, y: scale });\n\n  // Center the content in the stage\n  stage.position({\n    x: stage.width() / 2 - contentCenterX * scale,\n    y: stage.height() / 2 - contentCenterY * scale\n  });\n\n  stage.batchDraw();\n  console.log('Fitted and centered all cards in view');\n}\n\n// ============================================================================\n// SECTION 10: SEARCH (Boolean Search, Wildcards, Proximity)\n// ============================================================================\n\n/**\n * Check if term matches with wildcard support\n */\nexport function matchWithWildcard(term, searchableText) {\n  if (term.includes('*')) {\n    // Convert wildcard to regex\n    const regexPattern = term.replace(/\\*/g, '.*');\n    const regex = new RegExp('\\\\b' + regexPattern + '\\\\b', 'i');\n    return regex.test(searchableText);\n  }\n  return searchableText.includes(term);\n}\n\n/**\n * Check proximity search (NEAR/x or N/x)\n */\nexport function checkProximity(query, searchableText) {\n  // Match patterns like \"word1 near/5 word2\" or \"word1 n/5 word2\"\n  const proximityMatch = query.match(/(.+?)\\s+(near|n)\\/(\\d+)\\s+(.+)/i);\n  if (!proximityMatch) return false;\n\n  const term1 = proximityMatch[1].trim();\n  const distance = parseInt(proximityMatch[3]);\n  const term2 = proximityMatch[4].trim();\n\n  // Split text into words\n  const words = searchableText.split(/\\s+/);\n\n  // Find positions of both terms\n  const positions1 = [];\n  const positions2 = [];\n\n  words.forEach((word, index) => {\n    if (matchWithWildcard(term1, word)) positions1.push(index);\n    if (matchWithWildcard(term2, word)) positions2.push(index);\n  });\n\n  // Check if any pair is within distance\n  for (const pos1 of positions1) {\n    for (const pos2 of positions2) {\n      if (Math.abs(pos1 - pos2) <= distance) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\n/**\n * Evaluate boolean search query\n * Supports: OR, AND, NOT, \"exact phrases\", *, ( ), NEAR/x, N/x\n */\nexport function evaluateBooleanQuery(query, searchableText) {\n  // Handle different boolean operators\n  console.log('[evaluateBooleanQuery] Query:', query, 'SearchableText:', searchableText.substring(0, 50));\n\n  // Handle parentheses (highest precedence)\n  if (query.includes('(')) {\n    // Find matching parentheses and evaluate recursively\n    const parenMatch = query.match(/\\(([^()]+)\\)/);\n    if (parenMatch) {\n      const innerQuery = parenMatch[1];\n      const innerResult = evaluateBooleanQuery(innerQuery, searchableText);\n      // Replace the parentheses group with result placeholder\n      const replaced = query.replace(parenMatch[0], innerResult ? '__TRUE__' : '__FALSE__');\n      return evaluateBooleanQuery(replaced, searchableText);\n    }\n  }\n\n  // Handle result placeholders from parentheses\n  if (query === '__TRUE__') return true;\n  if (query === '__FALSE__') return false;\n\n  // Handle proximity search (NEAR/x or N/x)\n  if (/\\s+(near|n)\\/\\d+\\s+/i.test(query)) {\n    return checkProximity(query, searchableText);\n  }\n\n  // Split by OR first (lowest precedence)\n  if (query.includes(' or ')) {\n    const orParts = query.split(' or ');\n    console.log('[evaluateBooleanQuery] OR parts:', orParts);\n    return orParts.some(part => evaluateBooleanQuery(part.trim(), searchableText));\n  }\n\n  // Handle NOT operations\n  if (query.includes(' not ')) {\n    const notIndex = query.indexOf(' not ');\n    const beforeNot = query.substring(0, notIndex).trim();\n    const afterNot = query.substring(notIndex + 5).trim(); // ' not '.length = 5\n\n    // If there's something before NOT, it must match\n    let beforeMatches = true;\n    if (beforeNot) {\n      beforeMatches = evaluateBooleanQuery(beforeNot, searchableText);\n    }\n\n    // The part after NOT must NOT match\n    const afterMatches = evaluateBooleanQuery(afterNot, searchableText);\n\n    return beforeMatches && !afterMatches;\n  }\n\n  // Handle AND operations (default behavior and explicit)\n  const andParts = query.includes(' and ') ?\n    query.split(' and ') :\n    query.split(' ').filter(term => term.length > 0);\n\n  return andParts.every(term => {\n    term = term.trim();\n    console.log('[evaluateBooleanQuery] Checking term:', term);\n\n    // Skip placeholders\n    if (term === '__TRUE__') return true;\n    if (term === '__FALSE__') return false;\n\n    // Remove quotes if present for exact phrase matching\n    if (term.startsWith('\"') && term.endsWith('\"')) {\n      // Exact phrase search\n      const phrase = term.slice(1, -1);\n      console.log('[evaluateBooleanQuery] Exact phrase search:', phrase, 'Match:', searchableText.includes(phrase));\n      return searchableText.includes(phrase);\n    } else if (term.startsWith(\"'\") && term.endsWith(\"'\")) {\n      // Also support single quotes\n      const phrase = term.slice(1, -1);\n      console.log('[evaluateBooleanQuery] Single quote phrase search:', phrase, 'Match:', searchableText.includes(phrase));\n      return searchableText.includes(phrase);\n    } else {\n      // Regular word search with wildcard support\n      const matches = matchWithWildcard(term, searchableText);\n      console.log('[evaluateBooleanQuery] Regular/wildcard search:', term, 'Match:', matches);\n      return matches;\n    }\n  });\n}\n\n/**\n * Search and highlight cards\n * @param {string} query - Search query\n */\nexport async function searchCards(query) {\n  console.log('[searchCards] Called with query:', query);\n\n  if (!layer) {\n    console.error('[searchCards] Layer not initialized');\n    return;\n  }\n\n  const allCards = await getAllCards();\n  // Get all groups from layer that have a cardId attribute\n  const allGroups = layer.getChildren().filter(node => node.getAttr('cardId'));\n\n  console.log('[searchCards] Total cards in DB:', allCards.length);\n  console.log('[searchCards] Total card groups on canvas:', allGroups.length);\n\n  if (!query || query.trim() === '') {\n    // Clear search - reset all cards\n    console.log('[searchCards] Clearing search, resetting all cards');\n    allGroups.forEach(group => {\n      group.opacity(1);\n      const background = group.findOne('Rect');\n      if (!group.hasName('selected')) {\n        if (background) {\n          background.stroke('#e0e0e0');\n          background.strokeWidth(1);\n        }\n      }\n    });\n    layer.batchDraw();\n    return;\n  }\n\n  const lowerQuery = query.toLowerCase();\n  const matchingCards = new Set();\n\n  // Find matching cards using boolean logic\n  allCards.forEach(card => {\n    const text = (card.text || '').toLowerCase();\n    const backText = (card.backText || '').toLowerCase();\n    const tags = (card.tags || []).join(' ').toLowerCase();\n\n    // Combine all searchable text\n    const searchableText = [text, backText, tags].join(' ');\n\n    console.log('[searchCards] Checking card:', card.id);\n\n    // Use boolean query evaluation\n    if (evaluateBooleanQuery(lowerQuery, searchableText)) {\n      console.log('[searchCards]  Match found:', card.id);\n      matchingCards.add(card.id);\n    }\n  });\n\n  console.log('[searchCards] Matching card IDs:', Array.from(matchingCards));\n\n  // Apply visual effects\n  allGroups.forEach(group => {\n    const cardId = group.getAttr('cardId');\n    const background = group.findOne('Rect');\n    const isMatch = matchingCards.has(cardId);\n\n    console.log('[searchCards] Group cardId:', cardId, 'isMatch:', isMatch, 'hasBackground:', !!background);\n\n    if (isMatch) {\n      // Matching card: mark and full opacity\n      console.log('[searchCards]  Highlighting match:', cardId);\n      group.opacity(1);\n      group.addName('selected');\n      if (background) {\n        background.stroke('#2196F3');\n        background.strokeWidth(3);\n      }\n    } else {\n      // Non-matching card: fade and remove selection\n      console.log('[searchCards]  Fading non-match:', cardId);\n      group.opacity(0.3);\n      group.removeName('selected');\n      if (background) {\n        background.stroke('#e0e0e0');\n        background.strokeWidth(1);\n      }\n    }\n  });\n\n  layer.batchDraw();\n  console.log(`[searchCards]  Search complete: found ${matchingCards.size} matches for \"${query}\"`);\n}\n\n// ============================================================================\n// SECTION 11: CONTEXT MENU & CARD ACTIONS (Lock, Pin)\n// ============================================================================\n\n/**\n * Show context menu for card\n */\nexport function showContextMenu(x, y, cardId, group) {\n  // Remove any existing context menu\n  const existingMenu = document.getElementById('card-context-menu');\n  if (existingMenu) {\n    existingMenu.remove();\n  }\n\n  const isLocked = group.getAttr('locked') || false;\n\n  // Create menu\n  const menu = document.createElement('div');\n  menu.id = 'card-context-menu';\n  menu.style.cssText = `\n    position: fixed;\n    left: ${x}px;\n    top: ${y}px;\n    background: white;\n    border: 1px solid #e0e0e0;\n    border-radius: 6px;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n    z-index: 10001;\n    min-width: 150px;\n    overflow: hidden;\n  `;\n\n  const menuItems = [\n    {\n      label: isLocked ? ' Avpinna kort' : ' Pinna kort',\n      action: () => toggleLockCard(cardId, group)\n    },\n    {\n      label: ' Redigera',\n      action: () => {\n        if (group.getAttr('cardId')) {\n          const cards = cardGroups.get(cardId);\n          if (cards) {\n            getAllCards().then(allCards => {\n              const card = allCards.find(c => c.id === cardId);\n              if (card && card.image) {\n                flipCard(cardId);\n              } else {\n                openEditDialog(cardId);\n              }\n            });\n          }\n        }\n      }\n    },\n    {\n      label: ' Ta bort',\n      action: () => deleteCard(cardId)\n    }\n  ];\n\n  menuItems.forEach(item => {\n    const menuItem = document.createElement('div');\n    menuItem.textContent = item.label;\n    menuItem.style.cssText = `\n      padding: 10px 16px;\n      cursor: pointer;\n      font-size: 14px;\n      transition: background 0.2s;\n    `;\n    menuItem.addEventListener('mouseenter', () => {\n      menuItem.style.background = '#f5f5f5';\n    });\n    menuItem.addEventListener('mouseleave', () => {\n      menuItem.style.background = 'white';\n    });\n    menuItem.addEventListener('click', () => {\n      item.action();\n      menu.remove();\n    });\n    menu.appendChild(menuItem);\n  });\n\n  document.body.appendChild(menu);\n\n  // Close menu on click outside\n  const closeMenu = (e) => {\n    if (!menu.contains(e.target)) {\n      menu.remove();\n      document.removeEventListener('click', closeMenu);\n    }\n  };\n  setTimeout(() => document.addEventListener('click', closeMenu), 10);\n}\n\n/**\n * Toggle lock state for a card\n */\nasync function toggleLockCard(cardId, group) {\n  const isLocked = group.getAttr('locked') || false;\n  const newLockedState = !isLocked;\n\n  // Update visual state\n  group.draggable(!newLockedState);\n  group.setAttr('locked', newLockedState);\n\n  // Update database\n  await updateCard(cardId, { locked: newLockedState });\n\n  // Visual feedback - add lock icon\n  updateLockIndicator(group, newLockedState);\n\n  console.log(`Card ${cardId} ${newLockedState ? 'locked' : 'unlocked'}`);\n  layer.batchDraw();\n}\n\n/**\n * Update lock indicator on card\n */\nfunction updateLockIndicator(group, isLocked) {\n  // Remove existing lock indicator\n  const existingLock = group.findOne('.lock-indicator');\n  if (existingLock) {\n    existingLock.destroy();\n  }\n\n  if (isLocked) {\n    // Add pin icon\n    const background = group.findOne('Rect');\n    if (background) {\n      const pinIcon = new Konva.Text({\n        text: '',\n        x: background.width() - 30,\n        y: 5,\n        fontSize: 20,\n        name: 'lock-indicator',\n        listening: false\n      });\n      group.add(pinIcon);\n    }\n  }\n}\n\n/**\n * Toggle pin/unpin for selected cards\n */\nasync function togglePinSelectedCards() {\n  const selectedGroups = layer.find('.selected');\n  if (selectedGroups.length === 0) {\n    console.log('No cards selected to pin/unpin');\n    return;\n  }\n\n  // Check if any are pinned\n  const anyPinned = selectedGroups.some(group => group.getAttr('locked'));\n\n  for (const group of selectedGroups) {\n    const cardId = group.getAttr('cardId');\n    if (cardId) {\n      // If any are pinned, unpin all. Otherwise, pin all.\n      const newState = !anyPinned;\n      group.draggable(!newState);\n      group.setAttr('locked', newState);\n      await updateCard(cardId, { locked: newState });\n      updateLockIndicator(group, newState);\n    }\n  }\n\n  console.log(`${anyPinned ? 'Unpinned' : 'Pinned'} ${selectedGroups.length} cards`);\n  layer.batchDraw();\n}\n\n// ============================================================================\n// SECTION 12: UI BUTTONS & THEME (Fit All, Add Menu, Theme Toggle)\n// ============================================================================\n\n/**\n * Create \"Fit All\" button\n */\nfunction createFitAllButton() {\n  const button = document.createElement('button');\n  button.id = 'fit-all-button';\n  button.innerHTML = '';\n  button.title = 'Visa alla kort';\n  button.style.cssText = `\n    position: fixed;\n    bottom: 24px;\n    right: 24px;\n    width: 56px;\n    height: 56px;\n    background: #2196F3;\n    color: white;\n    border: none;\n    border-radius: 50%;\n    font-size: 24px;\n    cursor: pointer;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n    z-index: 1000;\n    transition: all 0.2s;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  `;\n\n  button.addEventListener('mouseenter', () => {\n    button.style.transform = 'scale(1.1)';\n    button.style.boxShadow = '0 6px 16px rgba(0, 0, 0, 0.2)';\n  });\n\n  button.addEventListener('mouseleave', () => {\n    button.style.transform = 'scale(1)';\n    button.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.15)';\n  });\n\n  button.addEventListener('click', fitAllCards);\n\n  document.body.appendChild(button);\n  console.log('Fit All button created');\n}\n\n/**\n * Create \"Command Palette\" button\n */\nfunction createCommandPaletteButton() {\n  const button = document.createElement('button');\n  button.id = 'command-palette-button';\n  button.innerHTML = '';\n  button.title = 'Kommandopalett (Space)';\n  button.style.cssText = `\n    position: fixed;\n    bottom: 168px;\n    right: 24px;\n    width: 56px;\n    height: 56px;\n    background: #2196F3;\n    color: white;\n    border: none;\n    border-radius: 50%;\n    font-size: 28px;\n    cursor: pointer;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n    z-index: 1000;\n    transition: all 0.2s;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  `;\n\n  button.addEventListener('mouseenter', () => {\n    button.style.transform = 'scale(1.1)';\n    button.style.boxShadow = '0 6px 16px rgba(0, 0, 0, 0.2)';\n  });\n\n  button.addEventListener('mouseleave', () => {\n    button.style.transform = 'scale(1)';\n    button.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.15)';\n  });\n\n  button.addEventListener('click', showCommandPalette);\n\n  document.body.appendChild(button);\n  console.log('Command Palette button created');\n}\n\n/**\n * Show add menu overlay\n */\nfunction showAddMenu() {\n  // Remove existing menu if any\n  const existingMenu = document.getElementById('add-menu-overlay');\n  if (existingMenu) {\n    existingMenu.remove();\n    return; // Toggle off\n  }\n\n  // Create overlay\n  const overlay = document.createElement('div');\n  overlay.id = 'add-menu-overlay';\n  overlay.style.cssText = `\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.5);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 10002;\n    backdrop-filter: blur(4px);\n  `;\n\n  // Create menu container\n  const menu = document.createElement('div');\n  menu.style.cssText = `\n    background: white;\n    border-radius: 12px;\n    padding: 24px;\n    min-width: 300px;\n    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  `;\n\n  // Title\n  const title = document.createElement('h2');\n  title.textContent = 'Snabbmeny';\n  title.style.cssText = `\n    margin: 0 0 20px 0;\n    font-size: 24px;\n    color: #1a1a1a;\n  `;\n  menu.appendChild(title);\n\n  // Menu items\n  const menuItems = [\n    {\n      icon: '',\n      label: 'Nytt text-kort',\n      desc: 'Skapa ett nytt text-kort',\n      action: async () => {\n        const pointer = stage.getPointerPosition();\n        const scale = stage.scaleX();\n        const position = pointer ? {\n          x: (pointer.x - stage.x()) / scale,\n          y: (pointer.y - stage.y()) / scale\n        } : { x: 100, y: 100 };\n        await createNewCard(position);\n        overlay.remove();\n      }\n    },\n    {\n      icon: '',\n      label: 'Importera bild',\n      desc: 'Lgg till en bild frn din enhet',\n      action: async () => {\n        overlay.remove(); // Remove overlay BEFORE opening file picker\n        await importImage();\n      }\n    }\n  ];\n\n  menuItems.forEach(item => {\n    const menuItem = document.createElement('div');\n    menuItem.style.cssText = `\n      padding: 16px;\n      margin-bottom: 8px;\n      background: #f5f5f5;\n      border-radius: 8px;\n      cursor: pointer;\n      transition: all 0.15s;\n      display: flex;\n      align-items: center;\n      gap: 16px;\n    `;\n\n    menuItem.innerHTML = `\n      <div style=\"font-size: 28px; flex-shrink: 0;\">${item.icon}</div>\n      <div style=\"flex: 1;\">\n        <div style=\"font-weight: 600; font-size: 16px; color: #1a1a1a; margin-bottom: 2px;\">\n          ${item.label}\n        </div>\n        <div style=\"font-size: 13px; color: #666;\">\n          ${item.desc}\n        </div>\n      </div>\n    `;\n\n    menuItem.addEventListener('mouseenter', () => {\n      menuItem.style.background = '#e8e8e8';\n      menuItem.style.transform = 'translateX(4px)';\n    });\n\n    menuItem.addEventListener('mouseleave', () => {\n      menuItem.style.background = '#f5f5f5';\n      menuItem.style.transform = 'translateX(0)';\n    });\n\n    menuItem.addEventListener('click', item.action);\n    menu.appendChild(menuItem);\n  });\n\n  overlay.appendChild(menu);\n  document.body.appendChild(overlay);\n\n  // Close on overlay click\n  overlay.addEventListener('click', (e) => {\n    if (e.target === overlay) {\n      overlay.remove();\n    }\n  });\n\n  // Close on ESC\n  const escHandler = (e) => {\n    if (e.key === 'Escape') {\n      overlay.remove();\n      document.removeEventListener('keydown', escHandler);\n    }\n  };\n  document.addEventListener('keydown', escHandler);\n}\n\n/**\n * Toggle theme\n */\nfunction toggleTheme() {\n  const body = document.body;\n  const currentTheme = body.getAttribute('data-theme') || 'light';\n\n  const themes = ['light', 'dark', 'eink'];\n  const currentIndex = themes.indexOf(currentTheme);\n  const nextIndex = (currentIndex + 1) % themes.length;\n  const nextTheme = themes[nextIndex];\n\n  body.setAttribute('data-theme', nextTheme);\n  localStorage.setItem('theme', nextTheme);\n\n  console.log(`Theme changed to: ${nextTheme}`);\n}\n\n/**\n * Toggle view from menu\n */\nfunction toggleViewFromMenu() {\n  // Call the main.js toggleView function via custom event\n  window.dispatchEvent(new CustomEvent('toggleView'));\n}\n\n/**\n * Create floating add button\n */\nfunction createAddButton() {\n  const button = document.createElement('button');\n  button.id = 'add-button';\n  button.innerHTML = '+';\n  button.title = 'Nytt kort (N) | Lngpress: Importera bild (I) | Extra lng: Command (C)';\n  button.style.cssText = `\n    position: fixed;\n    bottom: 96px;\n    right: 24px;\n    width: 56px;\n    height: 56px;\n    background: #4CAF50;\n    color: white;\n    border: none;\n    border-radius: 50%;\n    font-size: 32px;\n    font-weight: 300;\n    cursor: pointer;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n    z-index: 1000;\n    transition: all 0.2s;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    line-height: 1;\n  `;\n\n  let pressStartTime = null;\n\n  const onPressStart = () => {\n    pressStartTime = Date.now();\n    button.style.transform = 'scale(0.95)';\n  };\n\n  const onPressEnd = () => {\n    button.style.transform = 'scale(1)';\n    // Show overlay menu\n    showAddMenu();\n  };\n\n  let isPressed = false;\n\n  button.addEventListener('mousedown', () => {\n    isPressed = true;\n    onPressStart();\n  });\n\n  button.addEventListener('mouseup', () => {\n    if (isPressed) {\n      isPressed = false;\n      onPressEnd();\n    }\n  });\n\n  button.addEventListener('mouseleave', () => {\n    if (isPressed) {\n      isPressed = false;\n      button.style.transform = 'scale(1)';\n    }\n  });\n\n  button.addEventListener('touchstart', (e) => {\n    e.preventDefault();\n    isPressed = true;\n    onPressStart();\n  });\n\n  button.addEventListener('touchend', (e) => {\n    e.preventDefault();\n    if (isPressed) {\n      isPressed = false;\n      onPressEnd();\n    }\n  });\n\n  button.addEventListener('mouseenter', () => {\n    if (!isPressed) {\n      button.style.transform = 'scale(1.1)';\n      button.style.boxShadow = '0 6px 16px rgba(0, 0, 0, 0.2)';\n    }\n  });\n\n  button.addEventListener('mouseleave', () => {\n    if (!isPressed) {\n      button.style.transform = 'scale(1)';\n      button.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.15)';\n    }\n  });\n\n  document.body.appendChild(button);\n  console.log('Add button created');\n}\n\n// ============================================================================\n// SECTION 13: ARRANGEMENTS & KEYBOARD HANDLERS (Grid, Vertical, Horizontal, etc.)\n// ============================================================================\n\n/**\n * Apply arrangement to selected cards with animation\n */\nasync function applyArrangement(arrangeFn, arrangeName) {\n  const selectedGroups = layer.find('.selected');\n  if (selectedGroups.length === 0) {\n    console.log('No cards selected for arrangement');\n    return;\n  }\n\n  // Get mouse/center position\n  const pointer = stage.getPointerPosition();\n  const scale = stage.scaleX();\n  const centerPos = pointer ? {\n    x: (pointer.x - stage.x()) / scale,\n    y: (pointer.y - stage.y()) / scale\n  } : {\n    x: 0,\n    y: 0\n  };\n\n  // Prepare card data for arrangement\n  const cardsData = await Promise.all(\n    selectedGroups.map(async group => {\n      const cardId = group.getAttr('cardId');\n      const cards = await getAllCards();\n      const card = cards.find(c => c.id === cardId);\n      const background = group.findOne('Rect');\n\n      return {\n        id: cardId,\n        width: background ? background.width() : 200,\n        height: background ? background.height() : 150,\n        card: card\n      };\n    })\n  );\n\n  // Calculate new positions\n  const newPositions = arrangeFn(cardsData, centerPos);\n\n  // Check if this is a grid arrangement that needs standard width\n  const needsStandardWidth = arrangeName.includes('Grid Vertical') ||\n                             arrangeName.includes('Grid Horizontal') ||\n                             arrangeName.includes('Grid Top-Aligned');\n  const standardWidth = 200;\n\n  // Animate cards to new positions (and resize if needed)\n  newPositions.forEach(({ id, x, y }) => {\n    const group = cardGroups.get(id);\n    if (!group) return;\n\n    // Animate position\n    group.to({\n      x: x,\n      y: y,\n      duration: 0.3,\n      easing: Konva.Easings.EaseOut\n    });\n\n    // Resize cards to standard width for grid arrangements\n    if (needsStandardWidth) {\n      const background = group.findOne('Rect');\n      const text = group.findOne('Text');\n      const image = group.findOne('Image');\n\n      if (background) {\n        const currentWidth = background.width();\n        if (currentWidth !== standardWidth) {\n          background.to({\n            width: standardWidth,\n            duration: 0.3,\n            easing: Konva.Easings.EaseOut\n          });\n        }\n      }\n\n      if (text) {\n        text.to({\n          width: standardWidth - 20,\n          duration: 0.3,\n          easing: Konva.Easings.EaseOut\n        });\n      }\n\n      if (image) {\n        // Scale image proportionally to fit standard width\n        const currentWidth = image.width();\n        const currentHeight = image.height();\n        if (currentWidth !== standardWidth) {\n          const scale = standardWidth / currentWidth;\n          image.to({\n            width: standardWidth,\n            height: currentHeight * scale,\n            duration: 0.3,\n            easing: Konva.Easings.EaseOut\n          });\n\n          // Also resize background to match new image height\n          if (background) {\n            background.to({\n              height: currentHeight * scale + 60, // +60 for text area\n              duration: 0.3,\n              easing: Konva.Easings.EaseOut\n            });\n          }\n        }\n      }\n    }\n\n    // Update database\n    updateCard(id, { position: { x, y } });\n  });\n\n  layer.batchDraw();\n  console.log(`Arranged ${newPositions.length} cards: ${arrangeName}`);\n}\n\n/**\n * Custom modal dialog (replaces prompt)\n */\nfunction showTextInputDialog(title, defaultValue = '') {\n  return new Promise((resolve) => {\n    // Create overlay\n    const overlay = document.createElement('div');\n    overlay.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(0, 0, 0, 0.5);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 10000;\n      backdrop-filter: blur(4px);\n    `;\n\n    // Create dialog\n    const dialog = document.createElement('div');\n    dialog.style.cssText = `\n      background: #ffffff;\n      border-radius: 12px;\n      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\n      padding: 24px;\n      width: 90%;\n      max-width: 500px;\n      animation: slideDown 0.2s ease-out;\n    `;\n\n    // Add animation keyframe\n    if (!document.getElementById('dialog-animation-style')) {\n      const style = document.createElement('style');\n      style.id = 'dialog-animation-style';\n      style.textContent = `\n        @keyframes slideDown {\n          from {\n            opacity: 0;\n            transform: translateY(-20px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n      `;\n      document.head.appendChild(style);\n    }\n\n    // Title\n    const titleEl = document.createElement('h3');\n    titleEl.textContent = title;\n    titleEl.style.cssText = `\n      margin: 0 0 16px 0;\n      font-size: 18px;\n      font-weight: 600;\n      color: #1a1a1a;\n    `;\n\n    // Input\n    const input = document.createElement('textarea');\n    input.value = defaultValue;\n    input.style.cssText = `\n      width: 100%;\n      min-height: 100px;\n      padding: 12px;\n      border: 2px solid #e0e0e0;\n      border-radius: 8px;\n      font-size: 16px;\n      font-family: sans-serif;\n      resize: vertical;\n      margin-bottom: 16px;\n      transition: border-color 0.2s;\n    `;\n    input.addEventListener('focus', () => {\n      input.style.borderColor = '#2196F3';\n    });\n    input.addEventListener('blur', () => {\n      input.style.borderColor = '#e0e0e0';\n    });\n\n    // Buttons container\n    const buttons = document.createElement('div');\n    buttons.style.cssText = `\n      display: flex;\n      gap: 12px;\n      justify-content: flex-end;\n    `;\n\n    // Cancel button\n    const cancelBtn = document.createElement('button');\n    cancelBtn.textContent = 'Avbryt';\n    cancelBtn.style.cssText = `\n      padding: 10px 20px;\n      background: #f5f5f5;\n      color: #666;\n      border: none;\n      border-radius: 8px;\n      font-size: 16px;\n      cursor: pointer;\n      transition: background 0.2s;\n    `;\n    cancelBtn.addEventListener('mouseenter', () => {\n      cancelBtn.style.background = '#e0e0e0';\n    });\n    cancelBtn.addEventListener('mouseleave', () => {\n      cancelBtn.style.background = '#f5f5f5';\n    });\n    cancelBtn.addEventListener('click', () => {\n      document.body.removeChild(overlay);\n      resolve(null);\n    });\n\n    // OK button\n    const okBtn = document.createElement('button');\n    okBtn.textContent = 'OK';\n    okBtn.style.cssText = `\n      padding: 10px 20px;\n      background: #2196F3;\n      color: white;\n      border: none;\n      border-radius: 8px;\n      font-size: 16px;\n      font-weight: 600;\n      cursor: pointer;\n      transition: background 0.2s;\n    `;\n    okBtn.addEventListener('mouseenter', () => {\n      okBtn.style.background = '#1976D2';\n    });\n    okBtn.addEventListener('mouseleave', () => {\n      okBtn.style.background = '#2196F3';\n    });\n    okBtn.addEventListener('click', () => {\n      document.body.removeChild(overlay);\n      resolve(input.value);\n    });\n\n    // Build dialog\n    buttons.appendChild(cancelBtn);\n    buttons.appendChild(okBtn);\n    dialog.appendChild(titleEl);\n    dialog.appendChild(input);\n    dialog.appendChild(buttons);\n    overlay.appendChild(dialog);\n\n    // Handle escape key\n    const escapeHandler = (e) => {\n      if (e.key === 'Escape') {\n        document.body.removeChild(overlay);\n        document.removeEventListener('keydown', escapeHandler);\n        resolve(null);\n      }\n    };\n    document.addEventListener('keydown', escapeHandler);\n\n    // Handle enter key (submit)\n    input.addEventListener('keydown', (e) => {\n      if (e.key === 'Enter' && e.ctrlKey) {\n        okBtn.click();\n      }\n    });\n\n    // Show dialog\n    document.body.appendChild(overlay);\n    input.focus();\n    input.select();\n  });\n}\n\n/**\n * Clear clipboard\n */\nexport function clearClipboard() {\n  clipboard = [];\n  console.log('Clipboard cleared');\n}\n\n/**\n * Deselect all cards\n */\nexport function deselectAllCards() {\n  if (!layer) return;\n\n  layer.find('.selected').forEach(group => {\n    group.removeName('selected');\n    const background = group.findOne('Rect');\n    if (background) {\n      background.stroke('#e0e0e0');\n      background.strokeWidth(1);\n    }\n  });\n\n  layer.batchDraw();\n  console.log('All cards deselected');\n}\n","/**\n * Spatial View v1.0\n * Main entry point\n *\n *  TODO: DENNA FIL R FR STOR (606+ rader)!\n * Behver delas upp enligt ARCHITECTURE.md:\n * - ui/toolbar.js (toolbar interactions, knappar)\n * - ui/search-bar.js (sk-input hantering)\n * - ui/view-switcher.js (byten mellan board/column view)\n * - core/app.js (huvudsaklig init-logik)\n * main.js ska bara vara ~50 rader orchestrator\n */\n\nimport { initCanvas, addNewCard, exportCanvas, importImage, searchCards, clearClipboard, deselectAllCards } from './lib/canvas.js';\nimport { initStorage } from './lib/storage.js';\n\n// App state\nconst state = {\n  currentView: 'board', // 'board' | 'column'\n  deviceMode: detectDeviceMode(),\n  theme: localStorage.getItem('theme') || 'light',\n  uiMode: localStorage.getItem('uiMode') || 'full', // 'full' | 'minimal' | 'toggle-only'\n  cards: [],\n};\n\n/**\n * Detect device mode for optimizations\n */\nfunction detectDeviceMode() {\n  const ua = navigator.userAgent.toLowerCase();\n  \n  // E-ink detection (Viwoood AiPaper Mini or similar)\n  if (ua.includes('eink') || ua.includes('viwoood')) {\n    return 'eink';\n  }\n  \n  // Mobile detection\n  if (/mobile|android|iphone|ipad|ipod/.test(ua)) {\n    return 'mobile';\n  }\n  \n  // Tablet detection\n  if (/tablet|ipad/.test(ua) || (window.innerWidth <= 1024 && 'ontouchstart' in window)) {\n    return 'tablet';\n  }\n  \n  return 'desktop';\n}\n\n/**\n * Apply device-specific optimizations\n */\nfunction applyDeviceOptimizations() {\n  const body = document.body;\n  body.classList.add(`device-${state.deviceMode}`);\n\n  if (state.deviceMode === 'eink') {\n    // E-ink mode: disable animations, use column view\n    state.theme = 'eink';\n    state.currentView = 'column';\n    // Default to minimal UI for e-ink if not set\n    if (!localStorage.getItem('uiMode')) {\n      state.uiMode = 'minimal';\n    }\n    console.log('E-ink mode activated');\n  }\n\n  if (state.deviceMode === 'mobile' || state.deviceMode === 'tablet') {\n    // Mobile/tablet mode: start with column view\n    state.currentView = 'column';\n    // Default to minimal UI for touch devices if not set\n    if (!localStorage.getItem('uiMode')) {\n      state.uiMode = 'minimal';\n    }\n    console.log(`${state.deviceMode} mode activated`);\n  }\n\n}\n\n/**\n * Initialize app\n */\nasync function init() {\n  console.log('Initializing Spatial View...');\n  console.log('Device mode:', state.deviceMode);\n  \n  // Apply device optimizations\n  applyDeviceOptimizations();\n  \n  // Initialize storage\n  await initStorage();\n\n  // Initialize canvas (Konva) - always initialize for switching\n  await initCanvas();\n\n  // Setup event listeners\n  setupEventListeners();\n\n  // If starting in column view, render it\n  if (state.currentView === 'column') {\n    await renderColumnView();\n  }\n\n  console.log('Spatial View ready!');\n}\n\n/**\n * Setup global event listeners\n */\nfunction setupEventListeners() {\n  // Apply saved theme from localStorage\n  const body = document.body;\n  const savedTheme = localStorage.getItem('theme') || state.theme;\n  if (savedTheme && savedTheme !== 'light') {\n    body.classList.remove('dark-theme', 'eink-theme', 'sepia-theme');\n    if (savedTheme === 'dark') {\n      body.classList.add('dark-theme');\n    } else if (savedTheme === 'eink') {\n      body.classList.add('eink-theme');\n    }\n    state.theme = savedTheme;\n    console.log('Applied saved theme:', savedTheme);\n  }\n\n  // Update theme button text\n  const themeBtn = document.getElementById('btn-theme-toggle');\n  const themeNames = {\n    'light': ' Ljust',\n    'dark': ' Mrkt',\n    'eink': ' E-ink'\n  };\n  if (themeBtn) {\n    themeBtn.textContent = themeNames[savedTheme] || ' Tema';\n  }\n\n  // View toggle\n  const viewToggle = document.getElementById('btn-view-toggle');\n  viewToggle?.addEventListener('click', toggleView);\n\n  // Theme toggle\n  themeBtn?.addEventListener('click', toggleTheme);\n\n  // UI mode toggle\n  const uiModeToggle = document.getElementById('btn-ui-mode-toggle');\n  uiModeToggle?.addEventListener('click', toggleUIMode);\n\n  // Import button\n  const importBtn = document.getElementById('btn-import');\n  importBtn?.addEventListener('click', handleImport);\n\n  // Download button\n  const downloadBtn = document.getElementById('btn-download');\n  downloadBtn?.addEventListener('click', handleDownloadBackup);\n\n  // Search\n  const searchInput = document.getElementById('search-input');\n  searchInput?.addEventListener('input', debounce(handleSearch, 300));\n\n  // Escape to clear search (local - when focused)\n  searchInput?.addEventListener('keydown', (e) => {\n    if (e.key === 'Escape') {\n      searchInput.value = '';\n      handleSearch({ target: searchInput }); // Clear search results\n      searchInput.blur(); // Unfocus the search input\n    }\n  });\n\n  // Global Escape handler for search, clipboard, and selection\n  document.addEventListener('keydown', (e) => {\n    if (e.key === 'Escape') {\n      // Clear clipboard\n      clearClipboard();\n\n      // Deselect all cards\n      deselectAllCards();\n\n      // If search has content, clear it\n      if (searchInput && searchInput.value) {\n        searchInput.value = '';\n        handleSearch({ target: searchInput }); // Clear search results\n        searchInput.blur(); // Unfocus the search input\n      }\n    }\n  });\n\n  // Listen for toggle view event from canvas\n  window.addEventListener('toggleView', toggleView);\n\n  // Listen for toggle theme event from canvas\n  window.addEventListener('toggleTheme', toggleTheme);\n\n  // Apply saved UI mode\n  applyUIMode();\n\n  // Info overlay handlers\n  const floatingHeader = document.getElementById('floating-header');\n  const infoOverlay = document.getElementById('info-overlay');\n  const infoClose = document.getElementById('info-close');\n\n  floatingHeader?.addEventListener('click', () => {\n    infoOverlay?.classList.add('active');\n  });\n\n  infoClose?.addEventListener('click', () => {\n    infoOverlay?.classList.remove('active');\n  });\n\n  // Close on overlay background click\n  infoOverlay?.addEventListener('click', (e) => {\n    if (e.target === infoOverlay) {\n      infoOverlay.classList.remove('active');\n    }\n  });\n}\n\n/**\n * Toggle between board and column view\n */\nasync function toggleView() {\n  state.currentView = state.currentView === 'board' ? 'column' : 'board';\n\n  const boardView = document.getElementById('board-view');\n  const columnView = document.getElementById('column-view');\n  const toggleBtn = document.getElementById('btn-view-toggle');\n\n  if (state.currentView === 'board') {\n    boardView?.classList.add('active');\n    columnView?.classList.remove('active');\n    toggleBtn.textContent = ' Vy';\n  } else {\n    boardView?.classList.remove('active');\n    columnView?.classList.add('active');\n    toggleBtn.textContent = ' Vy';\n    // Load cards in column view\n    await renderColumnView();\n  }\n}\n\n/**\n * Render cards in column view\n */\nasync function renderColumnView(searchQuery = '') {\n  const cardList = document.getElementById('card-list');\n  if (!cardList) return;\n\n  // Import storage to get cards\n  const { getAllCards } = await import('./lib/storage.js');\n  let cards = await getAllCards();\n\n  // Clear existing content\n  cardList.innerHTML = '';\n\n  if (cards.length === 0) {\n    cardList.innerHTML = '<div style=\"padding: 40px; text-align: center; color: #999;\">Inga kort nnu. Klicka p \"+ Lgg till\" fr att skapa ett kort.</div>';\n    return;\n  }\n\n  // Filter by search query if provided\n  if (searchQuery && searchQuery.trim()) {\n    const query = searchQuery.trim().toLowerCase();\n\n    // Import boolean search function\n    const { evaluateBooleanQuery } = await import('./lib/canvas.js');\n\n    cards = cards.filter(card => {\n      const text = card.text || '';\n      const backText = card.backText || '';\n      const combinedText = (text + ' ' + backText).toLowerCase();\n\n      // Use boolean search (same as board view)\n      return evaluateBooleanQuery(query, combinedText);\n    });\n\n    if (cards.length === 0) {\n      cardList.innerHTML = `<div style=\"padding: 40px; text-align: center; color: #999;\">Inga kort matchade \"${searchQuery}\"</div>`;\n      return;\n    }\n  }\n\n  // Sort cards by last modified (newest first)\n  const sortedCards = [...cards].sort((a, b) => {\n    const timeA = a.lastModified || 0;\n    const timeB = b.lastModified || 0;\n    return timeB - timeA;\n  });\n\n  // Check themes\n  const isEink = document.body.classList.contains('eink-theme');\n  const isDark = document.body.classList.contains('dark-theme');\n\n  // Render each card\n  sortedCards.forEach(card => {\n    const cardElement = document.createElement('div');\n    cardElement.className = 'column-card';\n\n    if (isEink) {\n      // E-ink: white card, black border, NO shadows, rounded corners\n      cardElement.style.cssText = `\n        background: white;\n        border: 2px solid #000;\n        border-radius: 8px;\n        padding: 16px;\n        margin-bottom: 16px;\n        box-shadow: none;\n        cursor: pointer;\n        transition: none;\n      `;\n    } else if (isDark) {\n      // Dark theme: blue card, white text\n      cardElement.style.cssText = `\n        background: #2d3748;\n        border: 1px solid #4a5568;\n        border-radius: 8px;\n        padding: 16px;\n        margin-bottom: 16px;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n        cursor: pointer;\n        transition: all 0.2s;\n        color: #e0e0e0;\n      `;\n    } else {\n      // Light theme\n      cardElement.style.cssText = `\n        background: white;\n        border: 1px solid #e0e0e0;\n        border-radius: 8px;\n        padding: 16px;\n        margin-bottom: 16px;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n        cursor: pointer;\n        transition: all 0.2s;\n      `;\n    }\n\n    if (card.image) {\n      // Image card\n      const img = document.createElement('img');\n      // Handle both direct base64 string and object format\n      const imageSrc = typeof card.image === 'string' ? card.image : card.image.base64;\n      img.src = imageSrc;\n      img.style.cssText = `\n        width: 100%;\n        max-width: 100%;\n        height: auto;\n        border-radius: 4px;\n        margin-bottom: 12px;\n        display: block;\n      `;\n\n      // Error handling for images\n      img.onerror = () => {\n        console.error('Failed to load image for card:', card.id);\n        img.style.display = 'none';\n        const errorText = document.createElement('div');\n        errorText.textContent = ' Bild kunde inte laddas';\n        errorText.style.cssText = `\n          padding: 20px;\n          background: #fff3cd;\n          border-radius: 4px;\n          color: #856404;\n          text-align: center;\n          margin-bottom: 12px;\n        `;\n        cardElement.insertBefore(errorText, cardElement.firstChild);\n      };\n\n      cardElement.appendChild(img);\n\n      if (card.text || card.backText) {\n        const text = document.createElement('div');\n        text.textContent = card.backText || card.text || '';\n        text.style.cssText = `\n          font-size: 14px;\n          color: ${isDark ? '#e0e0e0' : '#666'};\n          line-height: 1.5;\n          white-space: pre-wrap;\n        `;\n        cardElement.appendChild(text);\n      }\n    } else {\n      // Text card\n      const text = document.createElement('div');\n      text.textContent = card.text || 'Tomt kort';\n      text.style.cssText = `\n        font-size: 16px;\n        color: ${isDark ? '#e0e0e0' : '#1a1a1a'};\n        line-height: 1.6;\n        white-space: pre-wrap;\n      `;\n      cardElement.appendChild(text);\n    }\n\n    // Hover effect\n    cardElement.addEventListener('mouseenter', () => {\n      if (isEink) {\n        // E-ink: thicker border on hover\n        cardElement.style.border = '3px solid #000';\n      } else if (isDark) {\n        // Dark theme\n        cardElement.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.5)';\n        cardElement.style.transform = 'translateY(-2px)';\n      } else {\n        // Light theme\n        cardElement.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.15)';\n        cardElement.style.transform = 'translateY(-2px)';\n      }\n    });\n\n    cardElement.addEventListener('mouseleave', () => {\n      if (isEink) {\n        // E-ink: back to normal border\n        cardElement.style.border = '2px solid #000';\n      } else if (isDark) {\n        // Dark theme\n        cardElement.style.boxShadow = '0 2px 4px rgba(0, 0, 0, 0.3)';\n        cardElement.style.transform = 'translateY(0)';\n      } else {\n        // Light theme\n        cardElement.style.boxShadow = '0 2px 4px rgba(0, 0, 0, 0.1)';\n        cardElement.style.transform = 'translateY(0)';\n      }\n    });\n\n    // Click to select (same as board view)\n    cardElement.addEventListener('click', () => {\n      const isSelected = cardElement.classList.contains('selected');\n\n      if (isSelected) {\n        cardElement.classList.remove('selected');\n        if (isEink) {\n          cardElement.style.border = '2px solid #000';\n        } else if (isDark) {\n          cardElement.style.border = '1px solid #4a5568';\n        } else {\n          cardElement.style.border = '1px solid #e0e0e0';\n        }\n      } else {\n        cardElement.classList.add('selected');\n        if (isEink) {\n          cardElement.style.border = '4px solid #000';\n        } else {\n          cardElement.style.border = '3px solid #2196F3';\n        }\n      }\n    });\n\n    // Double-click to edit (same as board view)\n    cardElement.addEventListener('dblclick', () => {\n      showColumnEditDialog(card, cardElement);\n    });\n\n    // Right-click context menu (same as board view)\n    cardElement.addEventListener('contextmenu', async (e) => {\n      e.preventDefault();\n      // Import context menu function from canvas\n      const { showContextMenu } = await import('./lib/canvas.js');\n      showContextMenu(e.clientX, e.clientY, card.id, cardElement);\n    });\n\n    // Touch handlers (same as board view)\n    let touchTimer = null;\n    let touchStartY = null;\n    let hasMoved = false;\n\n    cardElement.addEventListener('touchstart', (e) => {\n      touchStartY = e.touches[0].clientY;\n      hasMoved = false;\n\n      // Long press timer\n      touchTimer = setTimeout(async () => {\n        if (!hasMoved) {\n          // Long press detected\n          const selectedCards = cardList.querySelectorAll('.column-card.selected');\n\n          if (selectedCards.length > 1 && cardElement.classList.contains('selected')) {\n            // Multiple cards selected: show bulk menu\n            const { showTouchBulkMenu } = await import('./lib/canvas.js');\n            await showTouchBulkMenu(e.touches[0].clientX, e.touches[0].clientY);\n          } else {\n            // Single card: open editor\n            showColumnEditDialog(card, cardElement);\n          }\n          touchTimer = null;\n        }\n      }, 600); // 600ms long press\n    });\n\n    cardElement.addEventListener('touchmove', (e) => {\n      const currentY = e.touches[0].clientY;\n      const moved = Math.abs(currentY - touchStartY) > 5;\n      if (moved) {\n        hasMoved = true;\n      }\n    });\n\n    cardElement.addEventListener('touchend', () => {\n      if (touchTimer) {\n        clearTimeout(touchTimer);\n        touchTimer = null;\n      }\n    });\n\n    cardElement.addEventListener('touchcancel', () => {\n      if (touchTimer) {\n        clearTimeout(touchTimer);\n        touchTimer = null;\n      }\n    });\n\n    cardList.appendChild(cardElement);\n  });\n}\n\n/**\n * Show edit dialog for card in column view\n */\nasync function showColumnEditDialog(card, cardElement) {\n  // Create overlay\n  const overlay = document.createElement('div');\n  overlay.style.cssText = `\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.5);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 10000;\n    backdrop-filter: blur(4px);\n  `;\n\n  // Create dialog\n  const dialog = document.createElement('div');\n  dialog.style.cssText = `\n    background: white;\n    border-radius: 12px;\n    padding: 24px;\n    max-width: 500px;\n    width: 90%;\n    max-height: 80vh;\n    overflow-y: auto;\n    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  `;\n\n  // Title\n  const title = document.createElement('h2');\n  title.textContent = card.image ? 'Redigera bildkort' : 'Redigera textkort';\n  title.style.cssText = `\n    margin: 0 0 20px 0;\n    font-size: 24px;\n    color: #1a1a1a;\n  `;\n  dialog.appendChild(title);\n\n  // If image card, show image\n  if (card.image) {\n    const img = document.createElement('img');\n    // Handle both direct base64 string and object format\n    const imageSrc = typeof card.image === 'string' ? card.image : card.image.base64;\n    img.src = imageSrc;\n    img.style.cssText = `\n      width: 100%;\n      border-radius: 8px;\n      margin-bottom: 16px;\n    `;\n    dialog.appendChild(img);\n  }\n\n  // Text area\n  const textarea = document.createElement('textarea');\n  const textToEdit = card.image ? (card.backText || '') : (card.text || '');\n  textarea.value = textToEdit;\n  textarea.style.cssText = `\n    width: 100%;\n    min-height: 200px;\n    padding: 12px;\n    font-size: 16px;\n    font-family: sans-serif;\n    border: 2px solid #e0e0e0;\n    border-radius: 8px;\n    resize: vertical;\n    margin-bottom: 16px;\n  `;\n  dialog.appendChild(textarea);\n\n  // Buttons container\n  const buttonContainer = document.createElement('div');\n  buttonContainer.style.cssText = `\n    display: flex;\n    gap: 12px;\n    justify-content: flex-end;\n  `;\n\n  // Delete button\n  const deleteBtn = document.createElement('button');\n  deleteBtn.textContent = ' Ta bort';\n  deleteBtn.style.cssText = `\n    padding: 10px 20px;\n    background: #dc3545;\n    color: white;\n    border: none;\n    border-radius: 6px;\n    font-size: 14px;\n    cursor: pointer;\n    transition: all 0.2s;\n  `;\n  deleteBtn.addEventListener('mouseenter', () => {\n    deleteBtn.style.background = '#c82333';\n  });\n  deleteBtn.addEventListener('mouseleave', () => {\n    deleteBtn.style.background = '#dc3545';\n  });\n  deleteBtn.addEventListener('click', async () => {\n    if (confirm('r du sker p att du vill ta bort detta kort?')) {\n      const { deleteCard } = await import('./lib/storage.js');\n      await deleteCard(card.id);\n      overlay.remove();\n      await renderColumnView(); // Refresh the view\n    }\n  });\n\n  // Cancel button\n  const cancelBtn = document.createElement('button');\n  cancelBtn.textContent = 'Avbryt';\n  cancelBtn.style.cssText = `\n    padding: 10px 20px;\n    background: #6c757d;\n    color: white;\n    border: none;\n    border-radius: 6px;\n    font-size: 14px;\n    cursor: pointer;\n    transition: all 0.2s;\n  `;\n  cancelBtn.addEventListener('mouseenter', () => {\n    cancelBtn.style.background = '#5a6268';\n  });\n  cancelBtn.addEventListener('mouseleave', () => {\n    cancelBtn.style.background = '#6c757d';\n  });\n  cancelBtn.addEventListener('click', () => {\n    overlay.remove();\n  });\n\n  // Save button\n  const saveBtn = document.createElement('button');\n  saveBtn.textContent = 'Spara';\n  saveBtn.style.cssText = `\n    padding: 10px 20px;\n    background: #28a745;\n    color: white;\n    border: none;\n    border-radius: 6px;\n    font-size: 14px;\n    cursor: pointer;\n    transition: all 0.2s;\n  `;\n  saveBtn.addEventListener('mouseenter', () => {\n    saveBtn.style.background = '#218838';\n  });\n  saveBtn.addEventListener('mouseleave', () => {\n    saveBtn.style.background = '#28a745';\n  });\n  saveBtn.addEventListener('click', async () => {\n    const newText = textarea.value;\n    const { updateCard } = await import('./lib/storage.js');\n\n    if (card.image) {\n      await updateCard(card.id, { backText: newText });\n    } else {\n      await updateCard(card.id, { text: newText });\n    }\n\n    overlay.remove();\n    await renderColumnView(); // Refresh the view\n  });\n\n  buttonContainer.appendChild(deleteBtn);\n  buttonContainer.appendChild(cancelBtn);\n  buttonContainer.appendChild(saveBtn);\n  dialog.appendChild(buttonContainer);\n\n  overlay.appendChild(dialog);\n  document.body.appendChild(overlay);\n\n  // Focus textarea\n  textarea.focus();\n  textarea.select();\n\n  // Close on overlay click\n  overlay.addEventListener('click', (e) => {\n    if (e.target === overlay) {\n      overlay.remove();\n    }\n  });\n\n  // Close on ESC\n  const escHandler = (e) => {\n    if (e.key === 'Escape') {\n      overlay.remove();\n      document.removeEventListener('keydown', escHandler);\n    }\n  };\n  document.addEventListener('keydown', escHandler);\n}\n\n/**\n * Toggle theme\n */\nfunction toggleTheme() {\n  const body = document.body;\n\n  // Get current theme from class\n  let currentTheme = 'light';\n  if (body.classList.contains('dark-theme')) currentTheme = 'dark';\n  else if (body.classList.contains('eink-theme')) currentTheme = 'eink';\n\n  const themes = ['light', 'dark', 'eink'];\n  const currentIndex = themes.indexOf(currentTheme);\n  const nextIndex = (currentIndex + 1) % themes.length;\n  const nextTheme = themes[nextIndex];\n\n  // Remove all theme classes\n  body.classList.remove('dark-theme', 'eink-theme', 'sepia-theme');\n\n  // Add new theme class (except for light which is default)\n  if (nextTheme === 'dark') {\n    body.classList.add('dark-theme');\n  } else if (nextTheme === 'eink') {\n    body.classList.add('eink-theme');\n  }\n\n  // Also set data attribute for consistency\n  body.setAttribute('data-theme', nextTheme);\n  localStorage.setItem('theme', nextTheme);\n  state.theme = nextTheme;\n\n  // Update button text\n  const themeBtn = document.getElementById('btn-theme-toggle');\n  const themeNames = {\n    'light': ' Ljust',\n    'dark': ' Mrkt',\n    'eink': ' E-ink'\n  };\n  if (themeBtn) {\n    themeBtn.textContent = themeNames[nextTheme] || ' Tema';\n  }\n\n  console.log(`Theme changed to: ${nextTheme}`);\n}\n\n/**\n * Toggle UI mode (full -> minimal -> toggle-only -> full)\n */\nfunction toggleUIMode() {\n  const modes = ['full', 'minimal', 'toggle-only'];\n  const currentIndex = modes.indexOf(state.uiMode);\n  const nextIndex = (currentIndex + 1) % modes.length;\n  state.uiMode = modes[nextIndex];\n\n  // Save to localStorage\n  localStorage.setItem('uiMode', state.uiMode);\n\n  // Apply the new mode\n  applyUIMode();\n\n  console.log(`UI mode changed to: ${state.uiMode}`);\n}\n\n/**\n * Apply UI mode - show/hide buttons\n */\nfunction applyUIMode() {\n  const toolbar = document.getElementById('toolbar');\n  const toolbarActions = document.getElementById('toolbar-actions');\n  const commandPaletteBtn = document.getElementById('command-palette-button');\n  const addBtn = document.getElementById('add-button');\n  const fitAllBtn = document.getElementById('fit-all-button');\n  const uiToggleBtn = document.getElementById('btn-ui-mode-toggle');\n\n  if (!toolbar) return;\n\n  // Reset toggle button to default position first\n  if (uiToggleBtn) {\n    uiToggleBtn.style.position = '';\n    uiToggleBtn.style.top = '';\n    uiToggleBtn.style.right = '';\n    uiToggleBtn.style.zIndex = '';\n  }\n\n  // Mode 1: Full - show everything\n  if (state.uiMode === 'full') {\n    toolbar.style.display = 'flex';\n    if (toolbarActions) {\n      toolbarActions.style.display = 'flex';\n      // Show all buttons in toolbar\n      Array.from(toolbarActions.children).forEach(child => {\n        child.style.display = '';\n      });\n    }\n    if (commandPaletteBtn) commandPaletteBtn.style.display = 'flex';\n    if (addBtn) addBtn.style.display = 'flex';\n    if (fitAllBtn) fitAllBtn.style.display = 'flex';\n    if (uiToggleBtn) uiToggleBtn.textContent = ' Full';\n  }\n\n  // Mode 2: Minimal - hide toolbar buttons EXCEPT toggle, show floating command palette\n  else if (state.uiMode === 'minimal') {\n    // Hide toolbar buttons except toggle\n    if (toolbarActions) {\n      Array.from(toolbarActions.children).forEach(child => {\n        if (child.id === 'btn-ui-mode-toggle') {\n          child.style.display = '';\n        } else {\n          child.style.display = 'none';\n        }\n      });\n      toolbarActions.style.display = 'flex';\n    }\n    // Show floating command palette button\n    if (commandPaletteBtn) commandPaletteBtn.style.display = 'flex';\n    if (addBtn) addBtn.style.display = 'none';\n    if (fitAllBtn) fitAllBtn.style.display = 'none';\n    toolbar.style.display = 'flex';\n    if (uiToggleBtn) uiToggleBtn.textContent = ' Minimal';\n  }\n\n  // Mode 3: Toggle-only - show ONLY toggle button\n  else if (state.uiMode === 'toggle-only') {\n    // Hide toolbar buttons except toggle\n    if (toolbarActions) {\n      Array.from(toolbarActions.children).forEach(child => {\n        if (child.id === 'btn-ui-mode-toggle') {\n          child.style.display = '';\n        } else {\n          child.style.display = 'none';\n        }\n      });\n      toolbarActions.style.display = 'flex';\n    }\n    // Hide floating buttons\n    if (commandPaletteBtn) commandPaletteBtn.style.display = 'none';\n    if (addBtn) addBtn.style.display = 'none';\n    if (fitAllBtn) fitAllBtn.style.display = 'none';\n    toolbar.style.display = 'flex';\n    if (uiToggleBtn) uiToggleBtn.textContent = '';\n  }\n\n  console.log(`Applied UI mode: ${state.uiMode}`);\n}\n\n/**\n * Handle import action\n */\nasync function handleImport() {\n  if (state.currentView !== 'board') {\n    alert('Byt till Board-vy fr att lgga till bilder');\n    return;\n  }\n\n  // Open file picker directly (quality dialog shows after)\n  try {\n    await importImage();\n  } catch (error) {\n    console.error('Import failed:', error);\n    alert('Misslyckades att importera bild: ' + error.message);\n  }\n}\n\n/**\n * Handle download backup\n */\nasync function handleDownloadBackup() {\n  try {\n    const JSZip = (await import('jszip')).default;\n    const { getAllCards } = await import('./lib/storage.js');\n\n    console.log('Creating backup...');\n    const zip = new JSZip();\n\n    // Get all cards\n    const cards = await getAllCards();\n\n    // Create JSON export\n    const jsonData = {\n      version: '1.0',\n      exportDate: new Date().toISOString(),\n      cards: cards\n    };\n\n    zip.file('cards.json', JSON.stringify(jsonData, null, 2));\n\n    // Add images folder\n    const imagesFolder = zip.folder('images');\n    let imageCount = 0;\n\n    // Extract and save images\n    for (const card of cards) {\n      if (card.image) {\n        try {\n          // Handle both direct base64 string and object format\n          const imageSrc = typeof card.image === 'string' ? card.image : card.image.base64;\n\n          // Extract base64 data (remove data:image/png;base64, prefix)\n          const base64Data = imageSrc.split(',')[1];\n\n          if (base64Data) {\n            // Use card ID as filename\n            const filename = `card_${card.id}.png`;\n            imagesFolder.file(filename, base64Data, { base64: true });\n            imageCount++;\n          }\n        } catch (error) {\n          console.error(`Failed to export image for card ${card.id}:`, error);\n        }\n      }\n    }\n\n    console.log(`Exporting ${cards.length} cards and ${imageCount} images...`);\n\n    // Generate zip file\n    const blob = await zip.generateAsync({ type: 'blob' });\n\n    // Download\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n\n    // Create filename with date\n    const date = new Date().toISOString().split('T')[0];\n    a.download = `spatial-view-backup-${date}.zip`;\n\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n\n    console.log(`Backup created successfully: ${cards.length} cards, ${imageCount} images`);\n    alert(`Backup skapad!\\n\\n${cards.length} kort och ${imageCount} bilder exporterade.`);\n\n  } catch (error) {\n    console.error('Backup failed:', error);\n    alert('Misslyckades att skapa backup: ' + error.message);\n  }\n}\n\n/**\n * Handle search input\n */\nasync function handleSearch(event) {\n  const query = event.target.value;\n  console.log('[main.js] handleSearch called with:', query);\n  console.log('[main.js] currentView:', state.currentView);\n\n  if (state.currentView === 'board') {\n    await searchCards(query);\n  } else {\n    // Column view - filter cards\n    await renderColumnView(query);\n  }\n}\n\n/**\n * Debounce helper\n */\nfunction debounce(func, wait) {\n  let timeout;\n  return function executedFunction(...args) {\n    const later = () => {\n      clearTimeout(timeout);\n      func(...args);\n    };\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n}\n\n// Start app when DOM is ready\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', init);\n} else {\n  init();\n}\n\n// Export state for debugging\nif (import.meta.env.DEV) {\n  window.__SPATIAL_VIEW__ = state;\n}\n"],"file":"index-BF5Ouzzg.js"}